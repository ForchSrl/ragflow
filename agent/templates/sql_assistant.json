{
    "id": 17,
    "title": {
        "en": "SQL Assistant",
        "zh": "SQL助理",
        "it": "Assistente SQL"
    },
    "description": {
        "en": "SQL Assistant is an AI-powered tool that lets business users turn plain-English questions into fully formed SQL queries. Simply type your question (e.g., “Show me last quarter’s top 10 products by revenue”) and SQL Assistant generates the exact SQL, runs it against your database, and returns the results in seconds. ",
        "zh": "用户能够将简单文本问题转化为完整的SQL查询并输出结果。只需输入您的问题（例如，“展示上个季度前十名按收入排序的产品”），SQL助理就会生成精确的SQL语句，对其运行您的数据库，并几秒钟内返回结果。",
        "it": "Assistente SQL è uno strumento basato su AI che consente agli utenti di trasformare domande in linguaggio naturale in query SQL complete. Scrivi la tua richiesta (ad es. “Mostrami i 10 prodotti con maggiori ricavi dell'ultimo trimestre”) e l'Assistente SQL genera l'SQL esatto, lo esegue sul tuo database e restituisce i risultati in pochi secondi."
    },
    "canvas_type": "Marketing",
    "dsl": {
        "components": {
            "Agent:WickedGoatsDivide": {
                "downstream": [
                    "ValidateSQL:CarefulSanitizer"
                ],
                "obj": {
                    "component_name": "Agent",
                    "params": {
                        "cite": true,
                        "context": null,
                        "debug_inputs": [],
                        "delay_after_error": 1,
                        "description": "",
                        "exception_default_value": "",
                        "exception_goto": [],
                        "exception_method": "",
                        "frequencyPenaltyEnabled": false,
                        "frequency_penalty": 0.7,
                        "function_name": "agent",
                        "inputs": {
                            "Retrieval:HappyTiesFilm@formalized_content": {
                                "value": "\nID: 24\n├── Title: navision_schema_enriched.json\n└── Content:\n{\"360\": {\"metadata\": {\"sample_data\": {\"2\": {\"FIRR Over 2nd Band One Repr_ _\": \"1.00000000000000000000\", \"FIRR 1st Band Multi Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band Multi Repr_ _\": \"2.00000000000000000000\", \"FIRR Over 2nd Band MultiRepr _\": \"1.00000000000000000000\", \"Assistential Fund 1st Band\": \"13000000.00000000000000000000\", \"Assistential Fund 2nd Band\": \"0E-20\", \"Assistential Fund 3rd Band\": \"0E-20\", \"Assistential Fund 1st Band _\": \"0E-20\", \"Assistential Fund 2nd Band _\": \"0E-20\", \"Assistential Fund 3rd Band _\": \"0E-20\", \"Assist_ Fund Over 3rd Band _\": \"0E-20\", \"Nr_ Posizione ENASARCO\": \"\", \"Nr_ Prot_ Interfaccia ENASARCO\": \"\", \"Ind_ Agenti Mesi Fascia 1\": \"0\", \"Ind_ Agenti Mesi Fascia 2\": \"0\", \"Ind_ Agenti Mesi Fascia 3\": \"0\", \"Indennità  _ Agenti Fascia 1\": \"0E-20\", \"Indennità _ Agenti Fascia 2\": \"0E-20\", \"Indennità _ Agenti Fascia 3\": \"0E-20\", \"Conto Debiti V_Enasarco\": \"3373753750\", \"Conto Costo Enasarco Az_\": \"8020012002\", \"Conto Debiti V_FIRR\": \"3373753760\"}}}}}{\"360\": {\"metadata\": {\"sample_data\": {\"2\": {\"Conto Costo FIRR\": \"8020012003\", \"Conto Debiti Ind_ Suppl_\": \"\", \"Conto Costo Ind_ Suppl_\": \"\", \"Max Range FISC\": \"0E-20\", \"Batch Template Name\": \"\", \"Batch Name\": \"\", \"Salesp_ Ass_ Fund 1st Band _\": \"0E-20\", \"Salesp_ Ass_ Fund 2nd Band _\": \"0E-20\", \"Salesp_ Ass_ Fund 3rd Band _\": \"0E-20\", \"Sal_ Ass_ Fund Over 3rd Band _\": \"0E-20\", \"FIRR Batch Template Name\": \"\", \"FIRR Batch Name\": \"\", \"Prev_ Fund _ - Company Ch mult\": \"3.00000000000000000000\", \"Prev_ Fund _ - Salesp_ Ch mult\": \"1.00000000000000000000\"}}}, \"description\": \"Records and transactions related to forch$contribution setup.\"}}\n\nID: 93\n├── Title: FORCH_NAVISION.md\n└── Content:\n## dbo.FRC_Statisitiche_Vendita_Agenti (VIEW)| Column | Type | Nullable | Default |\n|--|--|--|--|\n| timestamp | timestamp | NO |  |\n| Salesperson Code | nvarchar | NO |  |\n| Anno | int | NO |  |\n| Mese | int | NO |  |\n| Trimestre | int | NO |  |\n| Periodo | nvarchar | NO |  |\n| Group Code | nvarchar | NO |  |\n| Area Code | nvarchar | NO |  |\n| Giorni Lavorativi | int | NO |  |\n| Giorni Lavorati | int | NO |  |\n| Budget | decimal | NO |  |\n| Clienti Con ordine nel mese | int | NO |  |\n| Clienti Attivi | int | NO |  |\n| Clienti Nuovi | int | NO |  |\n| Clienti Riattivati | int | NO |  |\n| Importo ordini | decimal | NO |  |\n| Ordini nel Periodo | int | NO |  |\n| Righe Ordini periodo | int | NO |  |\n| Nr Visite periodo | int | NO |  |## dbo.FRC_Statisitiche_Vendita_Articoli (VIEW)| Colum | Type | Nullable | Default |\n|--|--|--|--|\n| timestamp | timestamp | NO |  |\n| Documet No_ | varchar | NO |  |\n| Salesperso Code | varchar | NO |  |\n| Lie No_ | it | NO |  |\n| Cod_ Articolo | varchar | NO |  |\n| Postig date | datetime | NO |  |\n| Gruppo | varchar | NO |  |\n| Sottogruppo | varchar | NO |  |\n| Tipo Riga | it | NO |  |\n| Nr_ Coto C_G | varchar | NO |  |\n| Group Code | varchar | NO |  |\n| Area Code | varchar | NO |  |\n| Cod_ raggr_ Art_ | varchar | NO |  |\n| Documet Sales Qty | decimal | NO |  |\n| Documet Sales Amout | decimal | NO |  |\n| Documet Cost Amout | decimal | NO |  |\n| Ao | it | NO |  |\n| Mese | i\n\nID: 26\n├── Title: FORCH_NAVISION.md\n└── Content:\n## dbo.FORCH$Statisitiche Vendita Agenti (BASE TABLE)Primary Key: Salesperson Code, Anno, Mese\n\n| Column | Type | Nullable | Default |\n|--|--|--|--|\n| timestamp | timestamp | NO |  |\n| Salesperson Code | nvarchar | NO |  |\n| Anno | int | NO |  |\n| Mese | int | NO |  |\n| Trimestre | int | NO |  |\n| Periodo | nvarchar | NO |  |\n| Group Code | nvarchar | NO |  |\n| Area Code | nvarchar | NO |  |\n| Giorni Lavorativi | int | NO |  |\n| Giorni Lavorati | int | NO |  |\n| Budget | decimal | NO |  |\n| Clienti Con ordine nel mese | int | NO |  |\n| Clienti Attivi | int | NO |  |\n| Clienti Nuovi | int | NO |  |\n| Clienti Riattivati | int | NO |  |\n| Importo ordini | decimal | NO |  |\n| Ordini nel Periodo | int | NO |  |\n| Righe Ordini periodo | int | NO |  |\n| Nr Visite periodo | int | NO |  |## dbo.FORCH$Statisitiche Vendita Agenti 2 (BASE TABLE)Primary Key: Salesperson Code, Nr Riga\n\n| Column | Type | Nullable | Default |\n|--|--|--|--|\n| timestamp | timestamp | NO |  |\n| Salesperson Code | nvarchar | NO |  |\n| Nr Riga | int | NO |  |\n| Anno | int | NO |  |\n| Mese | int | NO |  |\n| Trimestre | int | NO |  |\n| Periodo | nvarchar | NO |  |\n| Group Code | nvarchar | NO |  |\n| Area Code | nvarchar | NO |  |\n| Giorni Lavorativi | int | NO |  |\n| Giorni Lavorati | int | NO |  |\n| Budget | decimal | NO |  |\n| Sales Amount | decimal | NO |  |\n| Cost Amount | decimal | NO |  |\n| Clienti Con ordine nel mese | int | NO |  |\n| Clienti Attivi | int | NO |  |\n| Clienti Nuovi | int | NO |  |\n| Clienti Riattivati | int | NO |  |\n| Importo ordini | decimal | NO |  |\n| Ordini nel Periodo | int | NO |  |\n| Righe Ordini periodo | int | NO |  |\n| Nr Visite periodo | int | NO |  |\n| GA_ | decimal | NO |  |\n| EVOL_ | decimal | NO |  |\n| CM_ | decimal | NO |  |\n| CM EUR | decimal | NO |  |\n| EVOLCM_ | decimal | NO |  |\n| FattLastYear | decimal | NO |  |\n| LastYearCM_ | decimal | NO |  |\n| Last Year CM EUR | decimal | NO |  |\n| OADAY | decimal | NO |  |\n| OP_O | decimal | NO |  |\n| OP_AV_VALUE | decimal | NO |  |\n| O_AV_VALUE | decimal | NO |  |\n| AV_VISIT | decimal | NO |  |\n| AV_Order_VISIT | decimal | NO |  |\n| CostLastYear | decimal | NO |  |\n| Counter | int | NO |  |\n\nID: 97\n├── Title: FORCH2002.md\n└── Content:\ne Cliete | varchar | NO |  |\n| Origial quatity | decimal | NO |  |\n| Customer item code | varchar | NO |  |\n| Salesperso 1 | varchar | NO |  |## dbo.vwFORCH_Ship_to_Address (VIEW)| Column | Type | Nullable | Default |\n|--|--|--|--|\n| Customer No_ | nvarchar | NO |  |\n| Code | nvarchar | NO |  |\n| Name | nvarchar | NO |  |\n| Name 2 | nvarchar | NO |  |\n| Address | nvarchar | NO |  |\n| Address 2 | nvarchar | NO |  |\n| City | nvarchar | NO |  |\n| Contact | nvarchar | NO |  |\n| Phone No_ | nvarchar | NO |  |\n| Telex No_ | nvarchar | NO |  |\n| Shipment Method Code | nvarchar | NO |  |\n| Shipping Agent Code | nvarchar | NO |  |\n| Place of Export | nvarchar | NO |  |\n| Country_Region Code | nvarchar | NO |  |\n| Last Date Modified | datetime | NO |  |\n| Location Code | nvarchar | NO |  |\n| Fax No_ | nvarchar | NO |  |\n| Telex Answer Back | nvarchar | NO |  |\n| Post Code | nvarchar | NO |  |\n| County | nvarchar | NO |  |\n| E-Mail | nvarchar | NO |  |\n| Home Page | nvarchar | NO |  |\n| Tax Area Code | nvarchar | NO |  |\n| Tax Liable | tinyint | NO |  |\n| Shipping Agent Service Code | nvarchar | NO |  |\n| Service Zone Code | nvarchar | NO |  |\n| Salesperson Code | nvarchar | NO |  |## dbo.vwFORCH_SottogruppoCliente (VIEW)| Column | Type | Nullable | Default |\n|--|--|--|--|\n| timestamp | timestamp | NO |  |\n| Code | nvarchar | NO |  |\n| Description | nvarchar | NO |  |\n| New | tinyint | NO |  |\n| Group Code | nvarchar | NO |  |\n| Cust_ Class Code | nvarchar | NO |  |## dbo.vwFORCH_Statisitiche_Vendita_Agenti (VIEW)| Column | Type | Nullable | Default |\n|--|--|--|--|\n| timestamp | timestamp | NO |  |\n| Salesperson Code | nvarchar | NO |  |\n| Anno | int | NO |  |\n| Mese | int | NO |  |\n| Trimestre | int | NO |  |\n| Periodo | nvarchar | NO |  |\n| Group Code | nvarchar | NO |  |\n| Area Code | nvarchar | NO |  |\n| Giorni Lavorativi | int | NO |  |\n| Giorni Lavorati | int | NO |  |\n| Budget | decimal | NO |  |\n| Clienti Con ordine nel mese | int | NO |  |\n| Clienti Attivi | int | NO |  |\n| Clienti Nuovi | int | NO |  |\n| Clienti Riattivati | int | NO |  |\n| Importo ordini | decimal | NO |  |\n| Ordini nel Periodo | int | NO |  |\n| Righe Ordini periodo | int | NO |  |\n| Nr Visite periodo | int | NO |  |\n\nID: 55\n├── Title: navision_schema_enriched.json\n└── Content:\n{\"360\": {\"metadata\": {\"sample_data\": {\"0\": {\"FIRR Over 2nd Band One Repr_ _\": \"1.00000000000000000000\", \"FIRR 1st Band Multi Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band Multi Repr_ _\": \"2.00000000000000000000\", \"FIRR Over 2nd Band MultiRepr _\": \"1.00000000000000000000\", \"Assistential Fund 1st Band\": \"0E-20\", \"Assistential Fund 2nd Band\": \"0E-20\", \"Assistential Fund 3rd Band\": \"0E-20\", \"Assistential Fund 1st Band _\": \"0E-20\", \"Assistential Fund 2nd Band _\": \"0E-20\", \"Assistential Fund 3rd Band _\": \"0E-20\", \"Assist_ Fund Over 3rd Band _\": \"0E-20\", \"Nr_ Posizione ENASARCO\": \"\", \"Nr_ Prot_ Interfaccia ENASARCO\": \"\", \"Ind_ Agenti Mesi Fascia 1\": \"0\", \"Ind_ Agenti Mesi Fascia 2\": \"0\", \"Ind_ Agenti Mesi Fascia 3\": \"0\", \"Indennità  _ Agenti Fascia 1\": \"0E-20\", \"Indennità _ Agenti Fascia 2\": \"0E-20\", \"Indennità _ Agenti Fascia 3\": \"0E-20\", \"Conto Debiti V_Enasarco\": \"3373753750\", \"Conto Costo Enasarco Az_\": \"8020012002\", \"Conto Debiti V_FIRR\": \"3373753760\", \"Conto Costo FIRR\": \"8020012003\"}}}}}{\"360\": {\"metadata\": {\"sample_data\": {\"0\": {\"Conto Debiti Ind_ Suppl_\": \"\", \"Conto Costo Ind_ Suppl_\": \"\", \"Max Range FISC\": \"0E-20\", \"Batch Template Name\": \"\", \"Batch Name\": \"\", \"Salesp_ Ass_ Fund 1st Band _\": \"0E-20\", \"Salesp_ Ass_ Fund 2nd Band _\": \"0E-20\", \"Salesp_ Ass_ Fund 3rd Band _\": \"0E-20\", \"Sal_ Ass_ Fund Over 3rd Band _\": \"0E-20\", \"FIRR Batch Template Name\": \"\", \"FIRR Batch Name\": \"\", \"Prev_ Fund _ - Company Ch mult\": \"3.00000000000000000000\", \"Prev_ Fund _ - Salesp_ Ch mult\": \"1.00000000000000000000\"}}}}}\n\nID: 74\n├── Title: navision_schema_enriched.json\n└── Content:\n{\"360\": {\"metadata\": {\"sample_data\": {\"1\": {\"timestamp\": \"<binary data>\", \"Primary Key\": \"\", \"Starting Date\": \"2017-01-01 00:00:00\", \"Prev_ Fund _\": \"15.65000000000000000000\", \"Prev_ Fund _ - Company Charged\": \"7.78000000000000000000\", \"Prev_ Fund _ - Salesp_ Charged\": \"7.78000000000000000000\", \"Prev_ Fund - Max Amount One\": \"37500.00000000000000000000\", \"Prev_ Fund - Max Amount Multi\": \"25000.00000000000000000000\", \"Prev_ Fund - Min Amount One\": \"836.00000000000000000000\", \"Prev_ Fund - Min Amount Multi\": \"418.00000000000000000000\", \"Prev-Min Amt Comp_ One-Assoc_\": \"0E-20\", \"Prev-Min Amt Company\": \"0E-20\", \"Assistential Fund _\": \"1.00000000000000000000\", \"FIRR 1st Band One Repr_\": \"12400.00000000000000000000\", \"FIRR 2nd Band One Repr_\": \"18600.00000000000000000000\", \"FIRR 1st Band Multi Repr_\": \"6200.00000000000000000000\", \"FIRR 2nd Band Multi Repr_\": \"9300.00000000000000000000\", \"FIRR 1st Band One Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band One Repr_ _\": \"2.00000000000000000000\"}}}}}{\"360\": {\"metadata\": {\"sample_data\": {\"1\": {\"FIRR Over 2nd Band One Repr_ _\": \"1.00000000000000000000\", \"FIRR 1st Band Multi Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band Multi Repr_ _\": \"2.00000000000000000000\", \"FIRR Over 2nd Band MultiRepr _\": \"1.00000000000000000000\", \"Assistential Fund 1st Band\": \"13000000.00000000000000000000\", \"Assistential Fund 2nd Band\": \"0E-20\", \"Assistential Fund 3rd Band\": \"0E-20\", \"Assistential Fund 1st Band _\": \"0E-20\", \"Assistential Fund 2nd Band _\": \"0E-20\", \"Assistential Fund 3rd Band _\": \"0E-20\", \"Assist_ Fund Over 3rd Band _\": \"0E-20\", \"Nr_ Posizione ENASARCO\": \"\", \"Nr_ Prot_ Interfaccia ENASARCO\": \"\", \"Ind_ Agenti Mesi Fascia 1\": \"0\", \"Ind_ Agenti Mesi Fascia 2\": \"0\", \"Ind_ Agenti Mesi Fascia 3\": \"0\", \"Indennità  _ Agenti Fascia 1\": \"0E-20\", \"Indennità _ Agenti Fascia 2\": \"0E-20\", \"Indennità _ Agenti Fascia 3\": \"0E-20\", \"Conto Debiti V_Enasarco\": \"3373753750\", \"Conto Costo Enasarco Az_\": \"8020012002\", \"Conto Debiti V_FIRR\": \"3373753760\"}}}}}\n\nID: 61\n├── Title: FORCH_NAVISION.md\n└── Content:\n<table>\n<thead>\n<tr>\n<th>Column</th>\n<th>Type</th>\n<th>Nullable</th>\n<th>Default</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>timestamp</td>\n<td>timestamp</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Primary Key</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Starting Date</td>\n<td>datetime</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund _ - Company Charged</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund _ - Salesp_ Charged</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund - Max Amount One</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund - Max Amount Multi</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund - Min Amount One</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund - Min Amount Multi</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev-Min Amt Comp_ One-Assoc_</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev-Min Amt Company</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assistential Fund _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 1st Band One Repr_</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 2nd Band One Repr_</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 1st Band Multi Repr_</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 2nd Band Multi Repr_</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 1st Band One Repr_ _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 2nd Band One Repr_ _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR Over 2nd Band One Repr_ _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 1st Band Multi Repr_ _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 2nd Band Multi Repr_ _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR Over 2nd Band MultiRepr _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assistential Fund 1st Band</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assistential Fund 2nd Band</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assistential Fund 3rd Band</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assistential Fund 1st Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assistential Fund 2nd Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assistential Fund 3rd Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assist_ Fund Over 3rd Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Nr_ Posizione ENASARCO</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Nr_ Prot_ Interfaccia ENASARCO</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Ind_ Agenti Mesi Fascia 1</td>\n<td>int</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Ind_ Agenti Mesi Fascia 2</td>\n<td>int</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Ind_ Agenti Mesi Fascia 3</td>\n<td>int</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Indennità  _ Agenti Fascia 1</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Indennità _ Agenti Fascia 2</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Indennità _ Agenti Fascia 3</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Conto Debiti V_Enasarco</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Conto Costo Enasarco Az_</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Conto Debiti V_FIRR</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Conto Costo FIRR</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Conto Debiti Ind_ Suppl_</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Conto Costo Ind_ Suppl_</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Max Range FISC</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Batch Template Name</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Batch Name</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Salesp_ Ass_ Fund 1st Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Salesp_ Ass_ Fund 2nd Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Salesp_ Ass_ Fund 3rd Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Sal_ Ass_ Fund Over 3rd Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR Batch Template Name</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR Batch Name</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund _ - Company Ch mult</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund _ - Salesp_ Ch mult</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n\nID: 57\n├── Title: navision_schema_enriched.json\n└── Content:\n{\"86\": {\"table\": \"FORCH$Area Agenti\", \"text\": \"Table: FORCH$Area Agenti\\nRow Count: 14\\nDescription: Records and transactions related to forch$area agenti.\\nColumns:\\n- timestamp (timestamp, NOT NULL)\\n- Codice Area (nvarchar(10), NOT NULL, Primary Key)\\n- Descrizione (nvarchar(30), NOT NULL)\\n\\nSample Data:\\nRow 1:\\n  timestamp: <binary data>\\n  Codice Area: 0\\n  Descrizione: \\nRow 2:\\n  timestamp: <binary data>\\n  Codice Area: 10\\n  Descrizione: \\nRow 3:\\n  timestamp: <binary data>\\n  Codice Area: 11\\n  Descrizione: Area Fornoni\"}}{\"86\": {\"metadata\": {\"primary_key\": {\"0\": \"Codice Area\"}, \"foreign_keys\": {}, \"row_count\": 14, \"columns\": {\"timestamp\": {\"data_type\": \"timestamp\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Codice Area\": {\"data_type\": \"nvarchar\", \"max_length\": 10, \"is_nullable\": \"NO\", \"default_value\": null}, \"Descrizione\": {\"data_type\": \"nvarchar\", \"max_length\": 30, \"is_nullable\": \"NO\", \"default_value\": null}}, \"sample_data\": {\"0\": {\"timestamp\": \"<binary data>\", \"Codice Area\": \"0\", \"Descrizione\": \"\"}, \"1\": {\"timestamp\": \"<binary data>\", \"Codice Area\": \"10\", \"Descrizione\": \"\"}, \"2\": {\"timestamp\": \"<binary data>\", \"Codice Area\": \"11\", \"Descrizione\": \"Area Fornoni\"}}}, \"description\": \"Records and transactions related to forch$area agenti.\"}}{\"87\": {\"table\": \"FORCH$Articoli - Accisa\", \"text\": \"Table: FORCH$Articoli - Accisa\\nRow Count: 197\\nDescription: Records and transactions related to forch$articoli - accisa.\\nColumns:\\n- timestamp (timestamp, NOT NULL)\\n- Item No_ (nvarchar(20), NOT NULL, Primary Key)\\n- Tipologia Accisa (nvarchar(10), NOT NULL, Primary Key)\\n- Descrizione (nvarchar(30), NOT NULL)\\n- Peso Articolo Unitario (gr) (decimal, NOT NULL)\\n- Peso Olio Minerale (gr) (decimal, NOT NULL)\\n- _Olio Minerale Unitario (decimal, NOT NULL)\\n\\nSample Data:\\nRow 1:\\n  timestamp: <binary data>\\n  Item No_: 548220001\\n  Tipologia Accisa: GAS COMB\\n  Descrizione: \\n  Peso Articolo Unitario (gr): 190.00000000000000000000\\n  Peso Olio Minerale (gr): 0E-20\\n  _Olio Minerale Unitario: 0E-20\\nRow 2:\\n  timestamp: <binary data>\\n  Item No_: 548260\\n  Tipologia Accisa: GAS COMB\\n  Descrizione: \\n  Peso Articolo Unitario (gr): 600.00000000000000000000\\n  Peso Olio Minerale (gr): 0E-20\\n  _Olio Minerale Unitario: 0E-20\\nRow 3:\\n  timestamp: <binary data>\\n  Item No_: 548263\\n  Tipologia Accisa: GAS COMB\\n  Descrizione: \\n  Peso Articolo Unitario (gr): 600.00000000000000000000\\n  Peso Olio Minerale (gr): 0E-20\\n  _Olio Minerale Unitario: 0E-20\"}}"
                            },
                            "Retrieval:SmartNewsHammer@formalized_content": {
                                "value": "\nID: 29\n├── Title: italian_query_examples.md\n└── Content:\n**Note importanti**:\r- La query mostra i primi 10 agenti per numero di note di credito\r\n- Include sia il numero di note di credito che l'importo totale\r\n- I risultati sono ordinati per numero di note di credito in ordine decrescente\r\n- Il periodo di riferimento è il mese precedente\r\n- Il JOIN con la tabella Salesperson è necessario per ottenere i nomi degli agenti\r\n\r### \"Chi ha fatto la vendita più grande a gennaio?\"\r**SQL**:\r```sql\r\nSELECT TOP 1\r\n    sp.[No_] AS CodiceAgente,\r\n    sp.[Name] AS NomeAgente,\r\n    SUM(sl.[Line Amount]) AS ImportoTotaleVendite,\r\n    COUNT(DISTINCT sh.[No_]) AS NumeroOrdini\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Salesperson] sp\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh \r\n        ON sp.[No_] = sh.[Salesperson Code]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Line] sl \r\n        ON sh.[No_] = sl.[Document No_] \r\n        AND sh.[Document Type] = sl.[Document Type]\r\nWHERE \r\n    MONTH(sh.[Posting Date]) = 1  -- Gennaio\r\n    AND YEAR(sh.[Posting Date]) = YEAR(GETDATE())  -- Anno corrente\r\n    AND sh.[Document Type] = 1  -- 1 = Order\r\nGROUP BY \r\n    sp.[No_], sp.[Name]\r\nORDER BY \r\n    ImportoTotaleVendite DESC;\r\n```\r**Note importanti**:\r- La query mostra l'agente con l'importo totale di vendite più alto\r\n- Include sia l'importo totale che il numero di ordini\r\n- Considera solo gli ordini (Document Type = 1)\r\n- Il periodo di riferimento è gennaio dell'anno corrente\r\n- I risultati sono ordinati per importo totale in ordine decrescente\r\n\r### \"Negli ultimi 5 anni, quanti agenti sono entrati e quanti sono usciti dalla forza vendita?\"\r**SQL**:\r```sql\r\nWITH AgentChanges AS (\r\n    SELECT \r\n        [No_] AS CodiceAgente,\r\n        [Name] AS NomeAgente,\r\n        [Data Inizio Mandato] AS DataInizio,\r\n        [Data Fine Mandato] AS DataFine\r\n    FROM \r\n        [FORCH_NAVISION].[dbo].[FORCH$Salesperson]\r\n    WHERE \r\n        [Data Inizio Mandato] >= DATEADD(YEAR, -5, GETDATE())  -- Entrati negli ultimi 5 anni\r\n        OR [Data Fine Mandato] >= DATEADD(YEAR, -5, GETDATE())  -- Usciti negli ultimi 5 anni\r\n)\r\nSELECT \r\n    COUNT(CASE WHEN DataInizio >= DATEADD(YEAR, -5, GETDATE()) THEN 1 END) AS AgentiEntrati,\r\n    COUNT(CASE WHEN DataFine >= DATEADD(YEAR, -5, GETDATE()) THEN 1 END) AS AgentiUsciti,\r\n    COUNT(*) AS TotaleAgenti\r\nFROM \r\n    AgentChanges;\r\n```\r\n\nID: 88\n├── Title: italian_query_examples.md\n└── Content:\n**Note importanti**:\r- Quando un utente chiede informazioni sugli \"Agenti\", si riferisce ai \"Salesperson\" nel database\r\n- Utilizzare l'alias \"sp\" per la tabella Salesperson\r\n- Collegare Salesperson a Sales Header tramite il campo \"Salesperson Code\"\r\n\r### \"Quanti viti dell'AGR 1011 sono state vendute il 24 febbraio e da chi?\"\r**SQL**:\r```sql\r\nSELECT \r\n    sp.[No_] AS CodiceAgente,\r\n    sp.[Name] AS NomeAgente,\r\n    SUM(sl.[Quantity]) AS QuantitàVenduta,\r\n    SUM(sl.[Line Amount]) AS ImportoTotale\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Line] sl\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh \r\n        ON sl.[Document No_] = sh.[No_] \r\n        AND sl.[Document Type] = sh.[Document Type]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Item] i \r\n        ON sl.[No_] = i.[No_]\r\nJOIN\r\n    [FORCH_NAVISION].[dbo].[FORCH$Salesperson] sp\r\n        ON sh.[Salesperson Code] = sp.[No_]\r\nWHERE \r\n    LEFT(i.[No_], 4) = '1011'  -- AGR code per viti specifiche\r\n    AND sh.[Posting Date] = '2025-02-24'\r\nGROUP BY \r\n    sp.[No_], sp.[Name]\r\nORDER BY \r\n    QuantitàVenduta DESC;\r\n```\r**Note importanti**:\r- La query mostra sia il codice che il nome dell'agente per una migliore identificazione\r\n- Include anche l'importo totale delle vendite per ogni agente\r\n- I risultati sono ordinati per quantità venduta in ordine decrescente\r\n- Il JOIN con la tabella Salesperson è necessario per ottenere il nome dell'agente\r\n\r### \"Chi sono gli agenti che hanno avuto più note di credito il mese scorso?\"\r**SQL**:\r```sql\r\nSELECT TOP 10\r\n    sp.[No_] AS CodiceAgente,\r\n    sp.[Name] AS NomeAgente,\r\n    COUNT(DISTINCT scmh.[No_]) AS NumeroNoteCredito,\r\n    SUM(scml.[Line Amount]) AS ImportoTotaleNoteCredito\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Salesperson] sp\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Cr_Memo Header] scmh \r\n        ON sp.[No_] = scmh.[Salesperson Code]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Cr_Memo Line] scml \r\n        ON scmh.[No_] = scml.[Document No_]\r\nWHERE \r\n    scmh.[Posting Date] >= DATEADD(MONTH, -1, GETDATE())\r\nGROUP BY \r\n    sp.[No_], sp.[Name]\r\nORDER BY \r\n    NumeroNoteCredito DESC;\r\n```\r\n\nID: 72\n├── Title: italian_query_examples.md\n└── Content:\n# Esempi di Query SQL in Italiano\rQuesto documento fornisce esempi di come tradurre domande in italiano in query SQL per il database Navision, con particolare attenzione ai problemi di mappatura delle categorie di prodotti.\r## Importante: Traduzione di Termini Comuni\r- **\"Agenti\"** si riferisce ai venditori o rappresentanti commerciali (tabella \"Salesperson\" in inglese)\r\n- **\"Cliente Attivo\"** si riferisce a un cliente che ha effettuato almeno un ordine in un determinato periodo di tempo\r\n- **\"Settore\"** può riferirsi a due concetti distinti:\r\n  - Per i clienti: si riferisce al codice ATECO (campo `Ateco Group Code` della tabella Customer)\r\n  - Per gli agenti: si riferisce al campo `ADM Description` della tabella Salesperson\r\n\r## Query di Vendita\r### \"Quanti trapani sono stati venduti il mese scorso?\"\r**Mappatura Vector DB**: \"trapano\" → Item Category Code '53'\r\n\r\n**SQL**:\r```sql\r\n-- Query per contare quanti trapani sono stati venduti il mese scorso\r\nSELECT \r\n    SUM(sl.[Quantity]) AS TotalTrapanitVenduti\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Line] sl\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh \r\n        ON sl.[Document No_] = sh.[No_] \r\n        AND sl.[Document Type] = sh.[Document Type]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Item] i \r\n        ON sl.[No_] = i.[No_]\r\nWHERE \r\n    i.[Item Category Code] = '53'  -- Codice categoria come testo con apici\r\n    AND sh.[Posting Date] >= DATEADD(MONTH, -1, GETDATE());\r\n```\r**Punto importante**: Il codice della categoria articolo (`Item Category Code`) deve essere trattato come testo ('53') e non come numero (53).\r### \"Quali sono i trapani più venduti?\"\r**Mappatura Vector DB**: \"trapano\" → Item Category Code '53'\r\n\r\n**SQL**:\r```sql\r\n-- Query per trovare i trapani più venduti\r\nSELECT TOP 10\r\n    i.[No_], \r\n    i.[Description],\r\n    SUM(sl.[Quantity]) AS QuantitàVenduta\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Line] sl\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh \r\n        ON sl.[Document No_] = sh.[No_] \r\n        AND sl.[Document Type] = sh.[Document Type]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Item] i \r\n        ON sl.[No_] = i.[No_]\r\nWHERE \r\n    i.[Item Category Code] = '53'  -- Codice categoria come testo con apici\r\n    AND sh.[Posting Date] >= DATEADD(MONTH, -6, GETDATE())\r\nGROUP BY \r\n    i.[No_], i.[Description]\r\nORDER BY \r\n    QuantitàVenduta DESC;\r\n```\r\n\nID: 38\n├── Title: italian_query_examples.md\n└── Content:\n### \"Qual è la media dei clienti attivi per ogni agente nel 2024?\"\r**SQL**:\r```sql\r\nWITH ActiveClients AS (\r\n    SELECT \r\n        COUNT(DISTINCT sh.[Sell-to Customer No_]) AS TotalActiveClients\r\n    FROM \r\n        [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh\r\n    WHERE \r\n        sh.[Document Type] = 1  -- Only orders\r\n        AND YEAR(sh.[Posting Date]) = 2024\r\n),\r\nActiveSalespeople AS (\r\n    SELECT \r\n        COUNT(DISTINCT sh.[Salesperson Code]) AS TotalActiveSalespeople\r\n    FROM \r\n        [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh\r\n    WHERE \r\n        sh.[Document Type] = 1  -- Only orders\r\n        AND YEAR(sh.[Posting Date]) = 2024\r\n        AND sh.[Salesperson Code] <> ''  -- Exclude empty salesperson codes\r\n)\r\nSELECT \r\n    FORMAT(CAST(ac.TotalActiveClients AS FLOAT) / asp.TotalActiveSalespeople, 'N2') AS MediaClientiAttiviPerAgente,\r\n    ac.TotalActiveClients AS TotaleClientiAttivi,\r\n    asp.TotalActiveSalespeople AS NumeroAgentiAttivi\r\nFROM \r\n    ActiveClients ac\r\nCROSS JOIN \r\n    ActiveSalespeople asp;\r\n```\r**Note importanti**:\r- La query calcola la media di clienti attivi per agente nel 2024\r\n- Un cliente è considerato attivo se ha effettuato almeno un ordine nel 2024\r\n- Un agente è considerato attivo se ha effettuato almeno una vendita nel 2024\r\n- Il calcolo viene fatto dividendo il numero totale di clienti attivi per il numero di agenti attivi\r\n- La query mostra:\r\n  - Media di clienti attivi per agente (arrotondata a 2 decimali)\r\n  - Numero totale di clienti attivi nel 2024\r\n  - Numero di agenti che hanno effettuato vendite nel 2024\r\n- Considera solo gli ordini effettivi (Document Type = 1)\r\n- La data di riferimento è la data di registrazione (Posting Date) dell'ordine\r\n- Il risultato rappresenta il numero medio di clienti attivi che ogni agente attivo gestisce\n\nID: 66\n├── Title: italian_query_examples.md\n└── Content:\n**Note importanti**:\r- Utilizzare i campi `[Data Inizio Mandato]` e `[Data Fine Mandato]` della tabella Salesperson\r\n- La query considera gli ultimi 5 anni dalla data corrente\r\n- Un agente può essere sia entrato che uscito negli ultimi 5 anni\r\n- Il totale degli agenti include tutti quelli che hanno avuto cambiamenti negli ultimi 5 anni\r\n- La query mostra:\r\n  - Numero di agenti entrati negli ultimi 5 anni\r\n  - Numero di agenti usciti negli ultimi 5 anni\r\n  - Totale degli agenti con cambiamenti negli ultimi 5 anni\r\n\r## Query relative al DB (Margine di Profitto)\r### \"Quanto è il DB medio per gli articoli 8017?\"\r**SQL**:\r```sql\r\nSELECT \r\n    i.[No_],\r\n    i.[Description],\r\n    AVG(sl.[Line Amount] - (sl.[Unit Cost] * sl.[Quantity])) AS DBMedio,\r\n    AVG((sl.[Line Amount] - (sl.[Unit Cost] * sl.[Quantity])) / NULLIF(sl.[Line Amount], 0) * 100) AS DBPercentuale\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Item] i\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Line] sl ON i.[No_] = sl.[No_]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh \r\n        ON sl.[Document No_] = sh.[No_] \r\n        AND sl.[Document Type] = sh.[Document Type]\r\nWHERE \r\n    LEFT(i.[No_], 4) = '8017'  -- AGR code per articoli specifici\r\n    AND sh.[Posting Date] >= DATEADD(MONTH, -12, GETDATE())  -- Ultimi 12 mesi\r\nGROUP BY \r\n    i.[No_], i.[Description]\r\nORDER BY \r\n    DBMedio DESC;\r\n```\r**Note importanti**:\r- DB (Deckungsbeitrag) si riferisce al margine di profitto\r\n- Il DB si calcola come differenza tra il prezzo di vendita (`Line Amount`) e il costo totale (`Unit Cost * Quantity`)\r\n- La percentuale di DB si calcola come (DB / Prezzo di vendita) * 100\r\n- NULLIF viene utilizzato per evitare divisioni per zero\r\n- La query mostra:\r\n  - Codice e descrizione dell'articolo\r\n  - DB medio in valore assoluto\r\n  - DB medio in percentuale\r\n- I risultati sono ordinati per DB medio in ordine decrescente\r\n- Il periodo di riferimento è l'ultimo anno per avere dati significativi\r\n\r\n\nID: 38\n├── Title: italian_query_examples.md\n└── Content:\n### \"Quale cliente ha acquistato più trapani?\"\r**Mappatura Vector DB**: \"trapano\" → Item Category Code '53'\r\n\r\n**SQL**:\r```sql\r\n-- Query per trovare il cliente che ha acquistato più trapani\r\nSELECT TOP 1\r\n    c.[No_],\r\n    c.[Name],\r\n    SUM(sl.[Quantity]) AS QuantitàTrapaniAcquistati\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Customer] c\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh \r\n        ON c.[No_] = sh.[Sell-to Customer No_]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Line] sl \r\n        ON sh.[No_] = sl.[Document No_] \r\n        AND sh.[Document Type] = sl.[Document Type]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Item] i \r\n        ON sl.[No_] = i.[No_]\r\nWHERE \r\n    i.[Item Category Code] = '53'  -- Codice categoria come testo con apici\r\n    AND sh.[Posting Date] >= DATEADD(MONTH, -12, GETDATE())\r\nGROUP BY \r\n    c.[No_], c.[Name]\r\nORDER BY \r\n    QuantitàTrapaniAcquistati DESC;\r\n```\r## Query relative agli Agenti (Salespersons)\r### \"Quali sono le vendite per agente nell'ultimo trimestre?\"\r**SQL**:\r```sql\r\n-- Query per mostrare le vendite totali per agente\r\nSELECT \r\n    sp.[No_], \r\n    sp.[Name] AS NomeAgente,\r\n    SUM(sl.[Quantity]) AS QuantitàVenduta,\r\n    SUM(sl.[Line Amount]) AS ImportoTotale\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Salesperson] sp\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh ON sp.[No_] = sh.[Salesperson Code]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Line] sl \r\n        ON sh.[No_] = sl.[Document No_] \r\n        AND sh.[Document Type] = sh.[Document Type]\r\nWHERE \r\n    sh.[Posting Date] >= DATEADD(MONTH, -3, GETDATE())\r\nGROUP BY \r\n    sp.[No_], sp.[Name]\r\nORDER BY \r\n    ImportoTotale DESC;\r\n```\r\n\nID: 85\n├── Title: italian_query_examples.md\n└── Content:\n**Note importanti**:\r- La query calcola la media giornaliera di ordini per ogni agente nel 2024\r\n- Utilizza una subquery per prima calcolare il valore totale degli ordini per ogni giorno e agente\r\n- Considera solo gli ordini effettivi (Document Type = 1)\r\n- Il valore dell'ordine è la somma di tutti i Line Amount per quel giorno\r\n- La data di riferimento è la data di registrazione (Posting Date) dell'ordine\r\n- FORMAT('N2') viene utilizzato per arrotondare i risultati a 2 decimali\r\n- Il simbolo € viene aggiunto ai valori monetari\r\n- La query mostra:\r\n  - Codice e nome dell'agente\r\n  - Media giornaliera di ordini\r\n  - Numero di giorni con ordini\r\n  - Valore totale degli ordini\r\n- I risultati sono ordinati per media giornaliera in ordine decrescente\r\n\r### \"Quanti ordini trasmette in media al giorno un venditore?\"\r**SQL**:\r```sql\r\nSELECT \r\n    FORMAT(AVG(DailyOrdersPerSalesperson), 'N2') AS MediaOrdiniGiornalieriPerVenditore\r\nFROM (\r\n    SELECT \r\n        sh.[Salesperson Code],\r\n        CAST(sh.[Posting Date] AS DATE) AS OrderDate,\r\n        COUNT(DISTINCT sh.[No_]) AS DailyOrdersPerSalesperson\r\n    FROM \r\n        [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh\r\n    WHERE \r\n        sh.[Document Type] = 1  -- Only orders\r\n        AND sh.[Posting Date] >= DATEADD(MONTH, -12, GETDATE())  -- Ultimi 12 mesi\r\n    GROUP BY \r\n        sh.[Salesperson Code],\r\n        CAST(sh.[Posting Date] AS DATE)\r\n) AS DailyOrdersPerSalesperson;\r\n```\r**Note importanti**:\r- La query calcola la media di ordini giornalieri per venditore\r\n- Utilizza una subquery per prima calcolare il numero di ordini per ogni venditore per ogni giorno\r\n- Considera solo gli ordini effettivi (Document Type = 1)\r\n- La data di riferimento è la data di registrazione (Posting Date) dell'ordine\r\n- FORMAT('N2') viene utilizzato per arrotondare la media a 2 decimali\r\n- Il periodo di riferimento è l'ultimo anno per avere dati significativi\r\n- Il risultato rappresenta il numero medio di ordini che un venditore tipicamente processa in un giorno\r\n\r\n\nID: 93\n├── Title: italian_query_examples.md\n└── Content:\n## Query di Inventario\r### \"Quanti trapani abbiamo in magazzino?\"\r**Mappatura Vector DB**: \"trapano\" → Item Category Code '53'\r\n\r\n**SQL**:\r```sql\r\n-- Query per contare quanti trapani sono disponibili in magazzino\r\nSELECT \r\n    COUNT(*) AS NumeroTrapani\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Item] i\r\nWHERE \r\n    i.[Item Category Code] = '53'  -- Codice categoria come testo con apici\r\n    AND i.[Blocked] = 0;\r\n```\r### \"Quanti set di cacciaviti abbiamo in vendita?\"\r**Mappatura Vector DB**: \"cacciaviti\" → Item Category Code '42'\r\n\r\n**SQL**:\r```sql\r\n-- Query per trovare i set di cacciaviti disponibili\r\nSELECT \r\n    i.[No_], \r\n    i.[Description],\r\n    i.[Unit Price]\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Item] i\r\nWHERE \r\n    i.[Item Category Code] = '42'  -- Codice categoria per cacciaviti\r\n    AND (\r\n        UPPER(i.[Description]) LIKE '%SET%' \r\n        OR UPPER(i.[Description]) LIKE '%KIT%'\r\n    )\r\n    AND i.[Blocked] = 0\r\nORDER BY \r\n    i.[Description];\r\n```\r**Note importanti**:\r- La query cerca sia \"SET\" che \"KIT\" nella descrizione del prodotto\r\n- UPPER() viene utilizzato per gestire le variazioni di maiuscole/minuscole\r\n- Vengono mostrati solo gli articoli non bloccati\r\n- I risultati sono ordinati per descrizione per una migliore leggibilità\r\n\r### \"Quali viti sono quasi esaurite?\"\r**Mappatura Vector DB**: \"viti\" → AGG code '1'\r\n\r\n**SQL**:\r```sql\r\n-- Query per trovare le viti\r\nSELECT \r\n    i.[No_], \r\n    i.[Description],\r\n    i.[Reorder Point]\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Item] i\r\nWHERE \r\n    LEFT(i.[No_], 1) = '1'  -- AGG code per viti\r\n    AND i.[Blocked] = 0\r\nORDER BY \r\n    i.[Reorder Point] DESC;\r\n```\r## Query di Analisi Cliente\r"
                            },
                            "Retrieval:SweetDancersAppear@formalized_content": {
                                "value": "\nID: 72\n├── Title: navision_schema_docs.json\n└── Content:\n{\"360\": {\"metadata\": {\"sample_data\": {\"0\": {\"timestamp\": \"<binary data>\", \"Primary Key\": \"\", \"Starting Date\": \"2016-01-01 00:00:00\", \"Prev_ Fund _\": \"15.10000000000000000000\", \"Prev_ Fund _ - Company Charged\": \"7.55000000000000000000\", \"Prev_ Fund _ - Salesp_ Charged\": \"7.55000000000000000000\", \"Prev_ Fund - Max Amount One\": \"37500.00000000000000000000\", \"Prev_ Fund - Max Amount Multi\": \"25000.00000000000000000000\", \"Prev_ Fund - Min Amount One\": \"836.00000000000000000000\", \"Prev_ Fund - Min Amount Multi\": \"418.00000000000000000000\", \"Prev-Min Amt Comp_ One-Assoc_\": \"0E-20\", \"Prev-Min Amt Company\": \"0E-20\", \"Assistential Fund _\": \"1.00000000000000000000\", \"FIRR 1st Band One Repr_\": \"12400.00000000000000000000\", \"FIRR 2nd Band One Repr_\": \"18600.00000000000000000000\", \"FIRR 1st Band Multi Repr_\": \"6200.00000000000000000000\", \"FIRR 2nd Band Multi Repr_\": \"9300.00000000000000000000\", \"FIRR 1st Band One Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band One Repr_ _\": \"2.00000000000000000000\"}}}}}{\"360\": {\"metadata\": {\"sample_data\": {\"0\": {\"FIRR Over 2nd Band One Repr_ _\": \"1.00000000000000000000\", \"FIRR 1st Band Multi Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band Multi Repr_ _\": \"2.00000000000000000000\", \"FIRR Over 2nd Band MultiRepr _\": \"1.00000000000000000000\", \"Assistential Fund 1st Band\": \"0E-20\", \"Assistential Fund 2nd Band\": \"0E-20\", \"Assistential Fund 3rd Band\": \"0E-20\", \"Assistential Fund 1st Band _\": \"0E-20\", \"Assistential Fund 2nd Band _\": \"0E-20\", \"Assistential Fund 3rd Band _\": \"0E-20\", \"Assist_ Fund Over 3rd Band _\": \"0E-20\", \"Nr_ Posizione ENASARCO\": \"\", \"Nr_ Prot_ Interfaccia ENASARCO\": \"\", \"Ind_ Agenti Mesi Fascia 1\": \"0\", \"Ind_ Agenti Mesi Fascia 2\": \"0\", \"Ind_ Agenti Mesi Fascia 3\": \"0\", \"Indennità  _ Agenti Fascia 1\": \"0E-20\", \"Indennità _ Agenti Fascia 2\": \"0E-20\", \"Indennità _ Agenti Fascia 3\": \"0E-20\", \"Conto Debiti V_Enasarco\": \"3373753750\", \"Conto Costo Enasarco Az_\": \"8020012002\", \"Conto Debiti V_FIRR\": \"3373753760\", \"Conto Costo FIRR\": \"8020012003\"}}}}}\n\nID: 6\n├── Title: navision_schema_docs.json\n└── Content:\n{\"360\": {\"metadata\": {\"sample_data\": {\"1\": {\"FIRR Over 2nd Band One Repr_ _\": \"1.00000000000000000000\", \"FIRR 1st Band Multi Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band Multi Repr_ _\": \"2.00000000000000000000\", \"FIRR Over 2nd Band MultiRepr _\": \"1.00000000000000000000\", \"Assistential Fund 1st Band\": \"13000000.00000000000000000000\", \"Assistential Fund 2nd Band\": \"0E-20\", \"Assistential Fund 3rd Band\": \"0E-20\", \"Assistential Fund 1st Band _\": \"0E-20\", \"Assistential Fund 2nd Band _\": \"0E-20\", \"Assistential Fund 3rd Band _\": \"0E-20\", \"Assist_ Fund Over 3rd Band _\": \"0E-20\", \"Nr_ Posizione ENASARCO\": \"\", \"Nr_ Prot_ Interfaccia ENASARCO\": \"\", \"Ind_ Agenti Mesi Fascia 1\": \"0\", \"Ind_ Agenti Mesi Fascia 2\": \"0\", \"Ind_ Agenti Mesi Fascia 3\": \"0\", \"Indennità  _ Agenti Fascia 1\": \"0E-20\", \"Indennità _ Agenti Fascia 2\": \"0E-20\", \"Indennità _ Agenti Fascia 3\": \"0E-20\", \"Conto Debiti V_Enasarco\": \"3373753750\", \"Conto Costo Enasarco Az_\": \"8020012002\", \"Conto Debiti V_FIRR\": \"3373753760\"}}}}}{\"360\": {\"metadata\": {\"sample_data\": {\"1\": {\"Conto Costo FIRR\": \"8020012003\", \"Conto Debiti Ind_ Suppl_\": \"\", \"Conto Costo Ind_ Suppl_\": \"\", \"Max Range FISC\": \"0E-20\", \"Batch Template Name\": \"\", \"Batch Name\": \"\", \"Salesp_ Ass_ Fund 1st Band _\": \"0E-20\", \"Salesp_ Ass_ Fund 2nd Band _\": \"0E-20\", \"Salesp_ Ass_ Fund 3rd Band _\": \"0E-20\", \"Sal_ Ass_ Fund Over 3rd Band _\": \"0E-20\", \"FIRR Batch Template Name\": \"\", \"FIRR Batch Name\": \"\", \"Prev_ Fund _ - Company Ch mult\": \"3.00000000000000000000\", \"Prev_ Fund _ - Salesp_ Ch mult\": \"1.00000000000000000000\"}}}}}\n\nID: 1\n├── Title: navision_schema_docs.json\n└── Content:\n{\"360\": {\"metadata\": {\"sample_data\": {\"2\": {\"timestamp\": \"<binary data>\", \"Primary Key\": \"\", \"Starting Date\": \"2018-01-01 00:00:00\", \"Prev_ Fund _\": \"16.00000000000000000000\", \"Prev_ Fund _ - Company Charged\": \"8.00000000000000000000\", \"Prev_ Fund _ - Salesp_ Charged\": \"8.00000000000000000000\", \"Prev_ Fund - Max Amount One\": \"37913.00000000000000000000\", \"Prev_ Fund - Max Amount Multi\": \"25275.00000000000000000000\", \"Prev_ Fund - Min Amount One\": \"846.00000000000000000000\", \"Prev_ Fund - Min Amount Multi\": \"423.00000000000000000000\", \"Prev-Min Amt Comp_ One-Assoc_\": \"0E-20\", \"Prev-Min Amt Company\": \"0E-20\", \"Assistential Fund _\": \"1.00000000000000000000\", \"FIRR 1st Band One Repr_\": \"12400.00000000000000000000\", \"FIRR 2nd Band One Repr_\": \"18600.00000000000000000000\", \"FIRR 1st Band Multi Repr_\": \"6200.00000000000000000000\", \"FIRR 2nd Band Multi Repr_\": \"9300.00000000000000000000\", \"FIRR 1st Band One Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band One Repr_ _\": \"2.00000000000000000000\"}}}}}{\"360\": {\"metadata\": {\"sample_data\": {\"2\": {\"FIRR Over 2nd Band One Repr_ _\": \"1.00000000000000000000\", \"FIRR 1st Band Multi Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band Multi Repr_ _\": \"2.00000000000000000000\", \"FIRR Over 2nd Band MultiRepr _\": \"1.00000000000000000000\", \"Assistential Fund 1st Band\": \"13000000.00000000000000000000\", \"Assistential Fund 2nd Band\": \"0E-20\", \"Assistential Fund 3rd Band\": \"0E-20\", \"Assistential Fund 1st Band _\": \"0E-20\", \"Assistential Fund 2nd Band _\": \"0E-20\", \"Assistential Fund 3rd Band _\": \"0E-20\", \"Assist_ Fund Over 3rd Band _\": \"0E-20\", \"Nr_ Posizione ENASARCO\": \"\", \"Nr_ Prot_ Interfaccia ENASARCO\": \"\", \"Ind_ Agenti Mesi Fascia 1\": \"0\", \"Ind_ Agenti Mesi Fascia 2\": \"0\", \"Ind_ Agenti Mesi Fascia 3\": \"0\", \"Indennità  _ Agenti Fascia 1\": \"0E-20\", \"Indennità _ Agenti Fascia 2\": \"0E-20\", \"Indennità _ Agenti Fascia 3\": \"0E-20\", \"Conto Debiti V_Enasarco\": \"3373753750\", \"Conto Costo Enasarco Az_\": \"8020012002\", \"Conto Debiti V_FIRR\": \"3373753760\"}}}}}\n\nID: 59\n├── Title: database_structure.md\n└── Content:\n<table>\n<thead>\n<tr>\n<th>Table Name</th>\n<th>Description</th>\n<th>Key Fields</th>\n<th>Usage</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>FORCH$Sales Header</td>\n<td>Header information for sales documents</td>\n<td>No_, Document Type, Posting Date, Sell-to Customer No_</td>\n<td>Contains customer reference and posting date</td>\n</tr>\n<tr>\n<td>FORCH$Sales Line</td>\n<td>Line items for sales documents</td>\n<td>Document No_, Document Type, Line No_, No_, Quantity, Line Amount</td>\n<td>Contains the products sold and quantities</td>\n</tr>\n<tr>\n<td>FORCH$Customer</td>\n<td>Customer master data</td>\n<td>No_, Name, Address</td>\n<td>Contains customer details</td>\n</tr>\n<tr>\n<td>FORCH$Salesperson</td>\n<td>Salesperson data (referred to as \"Agenti\" in Italian)</td>\n<td>No_, Name</td>\n<td>Tracks sales representatives information</td>\n</tr>\n</tbody>\n</table>\n\nID: 76\n├── Title: navision_schema_docs.json\n└── Content:\n{\"1500\": {\"metadata\": {\"sample_data\": {\"1\": {\"timestamp\": \"<binary data>\", \"Salesperson Code\": \"51\", \"Nr Riga\": \"2\", \"Anno\": \"2025\", \"Mese\": \"2\", \"Trimestre\": \"1\", \"Periodo\": \"2025/02\", \"Group Code\": \"\", \"Area Code\": \"\", \"Giorni Lavorativi\": \"0\", \"Giorni Lavorati\": \"0\", \"Budget\": \"0E-20\", \"Sales Amount\": \"0E-20\", \"Cost Amount\": \"0E-20\", \"Clienti Con ordine nel mese\": \"0\", \"Clienti Attivi\": \"0\", \"Clienti Nuovi\": \"0\", \"Clienti Riattivati\": \"0\", \"Importo ordini\": \"0E-20\", \"Ordini nel Periodo\": \"0\", \"Righe Ordini periodo\": \"0\", \"Nr Visite periodo\": \"0\", \"GA_\": \"0E-20\", \"EVOL_\": \"-100.00000000000000000000\", \"CM_\": \"0E-20\", \"CM EUR\": \"0E-20\", \"EVOLCM_\": \"-100.00000000000000000000\", \"FattLastYear\": \"75400.08000000000000000000\", \"LastYearCM_\": \"54.13000000000000000000\", \"Last Year CM EUR\": \"40814.12000000000000000000\", \"OADAY\": \"0E-20\", \"OP_O\": \"0E-20\", \"OP_AV_VALUE\": \"0E-20\", \"O_AV_VALUE\": \"0E-20\", \"AV_VISIT\": \"0E-20\", \"AV_Order_VISIT\": \"0E-20\", \"CostLastYear\": \"-34585.96000000000000000000\", \"Counter\": \"0\"}}}}}{\"1500\": {\"metadata\": {\"sample_data\": {\"2\": {\"timestamp\": \"<binary data>\", \"Salesperson Code\": \"51\", \"Nr Riga\": \"3\", \"Anno\": \"2025\", \"Mese\": \"3\", \"Trimestre\": \"1\", \"Periodo\": \"2025/03\", \"Group Code\": \"\", \"Area Code\": \"\", \"Giorni Lavorativi\": \"0\", \"Giorni Lavorati\": \"0\", \"Budget\": \"0E-20\", \"Sales Amount\": \"0E-20\", \"Cost Amount\": \"0E-20\", \"Clienti Con ordine nel mese\": \"0\", \"Clienti Attivi\": \"0\", \"Clienti Nuovi\": \"0\", \"Clienti Riattivati\": \"0\", \"Importo ordini\": \"0E-20\", \"Ordini nel Periodo\": \"0\", \"Righe Ordini periodo\": \"0\", \"Nr Visite periodo\": \"0\", \"GA_\": \"0E-20\", \"EVOL_\": \"-100.00000000000000000000\", \"CM_\": \"0E-20\", \"CM EUR\": \"0E-20\", \"EVOLCM_\": \"-100.00000000000000000000\", \"FattLastYear\": \"80290.39000000000000000000\", \"LastYearCM_\": \"55.64000000000000000000\", \"Last Year CM EUR\": \"44672.62000000000000000000\", \"OADAY\": \"0E-20\", \"OP_O\": \"0E-20\", \"OP_AV_VALUE\": \"0E-20\", \"O_AV_VALUE\": \"0E-20\", \"AV_VISIT\": \"0E-20\", \"AV_Order_VISIT\": \"0E-20\", \"CostLastYear\": \"-35617.77000000000000000000\", \"Counter\": \"0\"}}}}}\n\nID: 51\n├── Title: intranet_schema_with_descriptions.json\n└── Content:\n{\"371\": {\"metadata\": {\"columns\": {\"Nr Visite periodo\": {\"data_type\": \"int\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}}, \"sample_data\": {\"0\": {\"timestamp\": \"<binary data>\", \"Salesperson Code\": \"001\", \"Anno\": \"2006\", \"Mese\": \"1\", \"Trimestre\": \"1\", \"Periodo\": \"\", \"Group Code\": \"\", \"Area Code\": \"\", \"Giorni Lavorativi\": \"16\", \"Giorni Lavorati\": \"16\", \"Budget\": \"0E-20\", \"Clienti Con ordine nel mese\": \"0\", \"Clienti Attivi\": \"0\", \"Clienti Nuovi\": \"0\", \"Clienti Riattivati\": \"0\", \"Importo ordini\": \"0E-20\", \"Ordini nel Periodo\": \"0\", \"Righe Ordini periodo\": \"0\", \"Nr Visite periodo\": \"0\"}}}}}{\"371\": {\"metadata\": {\"sample_data\": {\"1\": {\"timestamp\": \"<binary data>\", \"Salesperson Code\": \"001\", \"Anno\": \"2006\", \"Mese\": \"2\", \"Trimestre\": \"1\", \"Periodo\": \"\", \"Group Code\": \"\", \"Area Code\": \"\", \"Giorni Lavorativi\": \"19\", \"Giorni Lavorati\": \"19\", \"Budget\": \"0E-20\", \"Clienti Con ordine nel mese\": \"0\", \"Clienti Attivi\": \"0\", \"Clienti Nuovi\": \"0\", \"Clienti Riattivati\": \"0\", \"Importo ordini\": \"0E-20\", \"Ordini nel Periodo\": \"0\", \"Righe Ordini periodo\": \"0\", \"Nr Visite periodo\": \"0\"}, \"2\": {\"timestamp\": \"<binary data>\", \"Salesperson Code\": \"001\", \"Anno\": \"2006\", \"Mese\": \"3\", \"Trimestre\": \"1\", \"Periodo\": \"\", \"Group Code\": \"\", \"Area Code\": \"\", \"Giorni Lavorativi\": \"22\", \"Giorni Lavorati\": \"22\", \"Budget\": \"0E-20\", \"Clienti Con ordine nel mese\": \"0\", \"Clienti Attivi\": \"0\", \"Clienti Nuovi\": \"0\", \"Clienti Riattivati\": \"0\", \"Importo ordini\": \"0E-20\", \"Ordini nel Periodo\": \"0\", \"Righe Ordini periodo\": \"0\", \"Nr Visite periodo\": \"0\"}}}}}\n\nID: 58\n├── Title: navision_schema_docs.json\n└── Content:\n  Ordii el Periodo: 0  Righe Ordii periodo: 0  Nr Visite periodo: 0  GA_: 0E-20  EVOL_: -100.00000000000000000000  CM_: 0E-20  CM EUR: 0E-20  EVOLCM_: -100.00000000000000000000  FattLastYear: 72726.32000000000000000000  LastYearCM_: 53.06000000000000000000  Last Year CM EUR: 38591.12000000000000000000  OADAY: 0E-20  OP_O: 0E-20  OP_AV_VALUE: 0E-20  O_AV_VALUE: 0E-20  AV_VISIT: 0E-20  AV_Order_VISIT: 0E-20  CostLastYear: -34135.20000000000000000000  Couter: 0Row 2:  timestamp: <biary data>  Salesperso Code: 51  Nr Riga: 2  Ao: 2025  Mese: 2  Trimestre: 1  Periodo: 2025/02  Group Code:   Area Code:   Giori Lavorativi: 0  Giori Lavorati: 0  Budget: 0E-20  Sales Amout: 0E-20  Cost Amout: 0E-20  Clieti Co ordie el mese: 0  Clieti Attivi: 0  Clieti Nuovi: 0  Clieti Riattivati: 0  Importo ordii: 0E-20  Ordii el Periodo: 0  Righe Ordii periodo: 0  Nr Visite periodo: 0  GA_: 0E-20  EVOL_: -100.00000000000000000000  CM_: 0E-20  CM EUR: 0E-20  EVOLCM_: -100.00000000000000000000  FattLastYear: 75400.08000000000000000000  LastYearCM_: 54.13000000000000000000  Last Year CM EUR: 40814.12000000000000000000\n\nID: 43\n├── Title: navision_schema_docs.json\n└── Content:\n{\"360\": {\"metadata\": {\"columns\": {\"Assistential Fund 1st Band\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Assistential Fund 2nd Band\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Assistential Fund 3rd Band\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Assistential Fund 1st Band _\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Assistential Fund 2nd Band _\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Assistential Fund 3rd Band _\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Assist_ Fund Over 3rd Band _\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Nr_ Posizione ENASARCO\": {\"data_type\": \"nvarchar\", \"max_length\": 20, \"is_nullable\": \"NO\", \"default_value\": null}}}}}{\"360\": {\"metadata\": {\"columns\": {\"Nr_ Prot_ Interfaccia ENASARCO\": {\"data_type\": \"nvarchar\", \"max_length\": 4, \"is_nullable\": \"NO\", \"default_value\": null}, \"Ind_ Agenti Mesi Fascia 1\": {\"data_type\": \"int\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Ind_ Agenti Mesi Fascia 2\": {\"data_type\": \"int\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Ind_ Agenti Mesi Fascia 3\": {\"data_type\": \"int\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Indennità  _ Agenti Fascia 1\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Indennità _ Agenti Fascia 2\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Indennità _ Agenti Fascia 3\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Conto Debiti V_Enasarco\": {\"data_type\": \"nvarchar\", \"max_length\": 20, \"is_nullable\": \"NO\", \"default_value\": null}}}}}"
                            },
                            "context": {
                                "description": "All relevant background information, prior facts, decisions, and state needed by the agent to solve the current query. Should be as detailed and self-contained as possible.",
                                "required": true,
                                "type": "string",
                                "value": null
                            },
                            "reasoning": {
                                "description": "Supervisor's reasoning for choosing the this agent. Explain why this agent is being invoked and what is expected of it.",
                                "required": true,
                                "type": "string",
                                "value": null
                            },
                            "sys.query": {
                                "value": "Quanti agenti attivi ci sono al momento?"
                            },
                            "user_prompt": {
                                "default": "",
                                "description": "This is the order you need to send to the agent.",
                                "required": true,
                                "type": "string",
                                "value": null
                            }
                        },
                        "llm_id": "gemini-2.5-flash@Gemini",
                        "maxTokensEnabled": false,
                        "max_retries": 3,
                        "max_rounds": 5,
                        "max_tokens": 256,
                        "mcp": [],
                        "message_history_window_size": 12,
                        "meta": {
                            "description": "This is an agent for a specific task.",
                            "name": "agent",
                            "parameters": {
                                "context": {
                                    "description": "All relevant background information, prior facts, decisions, and state needed by the agent to solve the current query. Should be as detailed and self-contained as possible.",
                                    "required": true,
                                    "type": "string"
                                },
                                "reasoning": {
                                    "description": "Supervisor's reasoning for choosing the this agent. Explain why this agent is being invoked and what is expected of it.",
                                    "required": true,
                                    "type": "string"
                                },
                                "user_prompt": {
                                    "default": "",
                                    "description": "This is the order you need to send to the agent.",
                                    "required": true,
                                    "type": "string"
                                }
                            }
                        },
                        "output_structure": null,
                        "outputs": {
                            "_created_time": {
                                "type": "<class 'float'>",
                                "value": 103619.771813872
                            },
                            "_elapsed_time": {
                                "type": "<class 'float'>",
                                "value": 12.410281677002786
                            },
                            "content": {
                                "type": "string",
                                "value": "SELECT\n  COUNT(DISTINCT \"Salesperson Code\")\nFROM dbo.\"FORCH$Statisitiche Vendita Agenti\"\nWHERE\n  Anno = (\n    SELECT\n      MAX(Anno)\n    FROM dbo.\"FORCH$Statisitiche Vendita Agenti\"\n  ) AND Mese = (\n    SELECT\n      MAX(Mese)\n    FROM dbo.\"FORCH$Statisitiche Vendita Agenti\"\n    WHERE\n      Anno = (\n        SELECT\n          MAX(Anno)\n        FROM dbo.\"FORCH$Statisitiche Vendita Agenti\"\n      )\n  ) AND \"Ordini nel Periodo\" > 0;"
                            }
                        },
                        "presencePenaltyEnabled": false,
                        "presence_penalty": 0.4,
                        "prompts": [
                            {
                                "content": "User's query: Quanti agenti attivi ci sono al momento?\n\nSchema: \nID: 24\n├── Title: navision_schema_enriched.json\n└── Content:\n{\"360\": {\"metadata\": {\"sample_data\": {\"2\": {\"FIRR Over 2nd Band One Repr_ _\": \"1.00000000000000000000\", \"FIRR 1st Band Multi Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band Multi Repr_ _\": \"2.00000000000000000000\", \"FIRR Over 2nd Band MultiRepr _\": \"1.00000000000000000000\", \"Assistential Fund 1st Band\": \"13000000.00000000000000000000\", \"Assistential Fund 2nd Band\": \"0E-20\", \"Assistential Fund 3rd Band\": \"0E-20\", \"Assistential Fund 1st Band _\": \"0E-20\", \"Assistential Fund 2nd Band _\": \"0E-20\", \"Assistential Fund 3rd Band _\": \"0E-20\", \"Assist_ Fund Over 3rd Band _\": \"0E-20\", \"Nr_ Posizione ENASARCO\": \"\", \"Nr_ Prot_ Interfaccia ENASARCO\": \"\", \"Ind_ Agenti Mesi Fascia 1\": \"0\", \"Ind_ Agenti Mesi Fascia 2\": \"0\", \"Ind_ Agenti Mesi Fascia 3\": \"0\", \"Indennità  _ Agenti Fascia 1\": \"0E-20\", \"Indennità _ Agenti Fascia 2\": \"0E-20\", \"Indennità _ Agenti Fascia 3\": \"0E-20\", \"Conto Debiti V_Enasarco\": \"3373753750\", \"Conto Costo Enasarco Az_\": \"8020012002\", \"Conto Debiti V_FIRR\": \"3373753760\"}}}}}{\"360\": {\"metadata\": {\"sample_data\": {\"2\": {\"Conto Costo FIRR\": \"8020012003\", \"Conto Debiti Ind_ Suppl_\": \"\", \"Conto Costo Ind_ Suppl_\": \"\", \"Max Range FISC\": \"0E-20\", \"Batch Template Name\": \"\", \"Batch Name\": \"\", \"Salesp_ Ass_ Fund 1st Band _\": \"0E-20\", \"Salesp_ Ass_ Fund 2nd Band _\": \"0E-20\", \"Salesp_ Ass_ Fund 3rd Band _\": \"0E-20\", \"Sal_ Ass_ Fund Over 3rd Band _\": \"0E-20\", \"FIRR Batch Template Name\": \"\", \"FIRR Batch Name\": \"\", \"Prev_ Fund _ - Company Ch mult\": \"3.00000000000000000000\", \"Prev_ Fund _ - Salesp_ Ch mult\": \"1.00000000000000000000\"}}}, \"description\": \"Records and transactions related to forch$contribution setup.\"}}\n\nID: 93\n├── Title: FORCH_NAVISION.md\n└── Content:\n## dbo.FRC_Statisitiche_Vendita_Agenti (VIEW)| Column | Type | Nullable | Default |\n|--|--|--|--|\n| timestamp | timestamp | NO |  |\n| Salesperson Code | nvarchar | NO |  |\n| Anno | int | NO |  |\n| Mese | int | NO |  |\n| Trimestre | int | NO |  |\n| Periodo | nvarchar | NO |  |\n| Group Code | nvarchar | NO |  |\n| Area Code | nvarchar | NO |  |\n| Giorni Lavorativi | int | NO |  |\n| Giorni Lavorati | int | NO |  |\n| Budget | decimal | NO |  |\n| Clienti Con ordine nel mese | int | NO |  |\n| Clienti Attivi | int | NO |  |\n| Clienti Nuovi | int | NO |  |\n| Clienti Riattivati | int | NO |  |\n| Importo ordini | decimal | NO |  |\n| Ordini nel Periodo | int | NO |  |\n| Righe Ordini periodo | int | NO |  |\n| Nr Visite periodo | int | NO |  |## dbo.FRC_Statisitiche_Vendita_Articoli (VIEW)| Colum | Type | Nullable | Default |\n|--|--|--|--|\n| timestamp | timestamp | NO |  |\n| Documet No_ | varchar | NO |  |\n| Salesperso Code | varchar | NO |  |\n| Lie No_ | it | NO |  |\n| Cod_ Articolo | varchar | NO |  |\n| Postig date | datetime | NO |  |\n| Gruppo | varchar | NO |  |\n| Sottogruppo | varchar | NO |  |\n| Tipo Riga | it | NO |  |\n| Nr_ Coto C_G | varchar | NO |  |\n| Group Code | varchar | NO |  |\n| Area Code | varchar | NO |  |\n| Cod_ raggr_ Art_ | varchar | NO |  |\n| Documet Sales Qty | decimal | NO |  |\n| Documet Sales Amout | decimal | NO |  |\n| Documet Cost Amout | decimal | NO |  |\n| Ao | it | NO |  |\n| Mese | i\n\nID: 26\n├── Title: FORCH_NAVISION.md\n└── Content:\n## dbo.FORCH$Statisitiche Vendita Agenti (BASE TABLE)Primary Key: Salesperson Code, Anno, Mese\n\n| Column | Type | Nullable | Default |\n|--|--|--|--|\n| timestamp | timestamp | NO |  |\n| Salesperson Code | nvarchar | NO |  |\n| Anno | int | NO |  |\n| Mese | int | NO |  |\n| Trimestre | int | NO |  |\n| Periodo | nvarchar | NO |  |\n| Group Code | nvarchar | NO |  |\n| Area Code | nvarchar | NO |  |\n| Giorni Lavorativi | int | NO |  |\n| Giorni Lavorati | int | NO |  |\n| Budget | decimal | NO |  |\n| Clienti Con ordine nel mese | int | NO |  |\n| Clienti Attivi | int | NO |  |\n| Clienti Nuovi | int | NO |  |\n| Clienti Riattivati | int | NO |  |\n| Importo ordini | decimal | NO |  |\n| Ordini nel Periodo | int | NO |  |\n| Righe Ordini periodo | int | NO |  |\n| Nr Visite periodo | int | NO |  |## dbo.FORCH$Statisitiche Vendita Agenti 2 (BASE TABLE)Primary Key: Salesperson Code, Nr Riga\n\n| Column | Type | Nullable | Default |\n|--|--|--|--|\n| timestamp | timestamp | NO |  |\n| Salesperson Code | nvarchar | NO |  |\n| Nr Riga | int | NO |  |\n| Anno | int | NO |  |\n| Mese | int | NO |  |\n| Trimestre | int | NO |  |\n| Periodo | nvarchar | NO |  |\n| Group Code | nvarchar | NO |  |\n| Area Code | nvarchar | NO |  |\n| Giorni Lavorativi | int | NO |  |\n| Giorni Lavorati | int | NO |  |\n| Budget | decimal | NO |  |\n| Sales Amount | decimal | NO |  |\n| Cost Amount | decimal | NO |  |\n| Clienti Con ordine nel mese | int | NO |  |\n| Clienti Attivi | int | NO |  |\n| Clienti Nuovi | int | NO |  |\n| Clienti Riattivati | int | NO |  |\n| Importo ordini | decimal | NO |  |\n| Ordini nel Periodo | int | NO |  |\n| Righe Ordini periodo | int | NO |  |\n| Nr Visite periodo | int | NO |  |\n| GA_ | decimal | NO |  |\n| EVOL_ | decimal | NO |  |\n| CM_ | decimal | NO |  |\n| CM EUR | decimal | NO |  |\n| EVOLCM_ | decimal | NO |  |\n| FattLastYear | decimal | NO |  |\n| LastYearCM_ | decimal | NO |  |\n| Last Year CM EUR | decimal | NO |  |\n| OADAY | decimal | NO |  |\n| OP_O | decimal | NO |  |\n| OP_AV_VALUE | decimal | NO |  |\n| O_AV_VALUE | decimal | NO |  |\n| AV_VISIT | decimal | NO |  |\n| AV_Order_VISIT | decimal | NO |  |\n| CostLastYear | decimal | NO |  |\n| Counter | int | NO |  |\n\nID: 97\n├── Title: FORCH2002.md\n└── Content:\ne Cliete | varchar | NO |  |\n| Origial quatity | decimal | NO |  |\n| Customer item code | varchar | NO |  |\n| Salesperso 1 | varchar | NO |  |## dbo.vwFORCH_Ship_to_Address (VIEW)| Column | Type | Nullable | Default |\n|--|--|--|--|\n| Customer No_ | nvarchar | NO |  |\n| Code | nvarchar | NO |  |\n| Name | nvarchar | NO |  |\n| Name 2 | nvarchar | NO |  |\n| Address | nvarchar | NO |  |\n| Address 2 | nvarchar | NO |  |\n| City | nvarchar | NO |  |\n| Contact | nvarchar | NO |  |\n| Phone No_ | nvarchar | NO |  |\n| Telex No_ | nvarchar | NO |  |\n| Shipment Method Code | nvarchar | NO |  |\n| Shipping Agent Code | nvarchar | NO |  |\n| Place of Export | nvarchar | NO |  |\n| Country_Region Code | nvarchar | NO |  |\n| Last Date Modified | datetime | NO |  |\n| Location Code | nvarchar | NO |  |\n| Fax No_ | nvarchar | NO |  |\n| Telex Answer Back | nvarchar | NO |  |\n| Post Code | nvarchar | NO |  |\n| County | nvarchar | NO |  |\n| E-Mail | nvarchar | NO |  |\n| Home Page | nvarchar | NO |  |\n| Tax Area Code | nvarchar | NO |  |\n| Tax Liable | tinyint | NO |  |\n| Shipping Agent Service Code | nvarchar | NO |  |\n| Service Zone Code | nvarchar | NO |  |\n| Salesperson Code | nvarchar | NO |  |## dbo.vwFORCH_SottogruppoCliente (VIEW)| Column | Type | Nullable | Default |\n|--|--|--|--|\n| timestamp | timestamp | NO |  |\n| Code | nvarchar | NO |  |\n| Description | nvarchar | NO |  |\n| New | tinyint | NO |  |\n| Group Code | nvarchar | NO |  |\n| Cust_ Class Code | nvarchar | NO |  |## dbo.vwFORCH_Statisitiche_Vendita_Agenti (VIEW)| Column | Type | Nullable | Default |\n|--|--|--|--|\n| timestamp | timestamp | NO |  |\n| Salesperson Code | nvarchar | NO |  |\n| Anno | int | NO |  |\n| Mese | int | NO |  |\n| Trimestre | int | NO |  |\n| Periodo | nvarchar | NO |  |\n| Group Code | nvarchar | NO |  |\n| Area Code | nvarchar | NO |  |\n| Giorni Lavorativi | int | NO |  |\n| Giorni Lavorati | int | NO |  |\n| Budget | decimal | NO |  |\n| Clienti Con ordine nel mese | int | NO |  |\n| Clienti Attivi | int | NO |  |\n| Clienti Nuovi | int | NO |  |\n| Clienti Riattivati | int | NO |  |\n| Importo ordini | decimal | NO |  |\n| Ordini nel Periodo | int | NO |  |\n| Righe Ordini periodo | int | NO |  |\n| Nr Visite periodo | int | NO |  |\n\nID: 55\n├── Title: navision_schema_enriched.json\n└── Content:\n{\"360\": {\"metadata\": {\"sample_data\": {\"0\": {\"FIRR Over 2nd Band One Repr_ _\": \"1.00000000000000000000\", \"FIRR 1st Band Multi Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band Multi Repr_ _\": \"2.00000000000000000000\", \"FIRR Over 2nd Band MultiRepr _\": \"1.00000000000000000000\", \"Assistential Fund 1st Band\": \"0E-20\", \"Assistential Fund 2nd Band\": \"0E-20\", \"Assistential Fund 3rd Band\": \"0E-20\", \"Assistential Fund 1st Band _\": \"0E-20\", \"Assistential Fund 2nd Band _\": \"0E-20\", \"Assistential Fund 3rd Band _\": \"0E-20\", \"Assist_ Fund Over 3rd Band _\": \"0E-20\", \"Nr_ Posizione ENASARCO\": \"\", \"Nr_ Prot_ Interfaccia ENASARCO\": \"\", \"Ind_ Agenti Mesi Fascia 1\": \"0\", \"Ind_ Agenti Mesi Fascia 2\": \"0\", \"Ind_ Agenti Mesi Fascia 3\": \"0\", \"Indennità  _ Agenti Fascia 1\": \"0E-20\", \"Indennità _ Agenti Fascia 2\": \"0E-20\", \"Indennità _ Agenti Fascia 3\": \"0E-20\", \"Conto Debiti V_Enasarco\": \"3373753750\", \"Conto Costo Enasarco Az_\": \"8020012002\", \"Conto Debiti V_FIRR\": \"3373753760\", \"Conto Costo FIRR\": \"8020012003\"}}}}}{\"360\": {\"metadata\": {\"sample_data\": {\"0\": {\"Conto Debiti Ind_ Suppl_\": \"\", \"Conto Costo Ind_ Suppl_\": \"\", \"Max Range FISC\": \"0E-20\", \"Batch Template Name\": \"\", \"Batch Name\": \"\", \"Salesp_ Ass_ Fund 1st Band _\": \"0E-20\", \"Salesp_ Ass_ Fund 2nd Band _\": \"0E-20\", \"Salesp_ Ass_ Fund 3rd Band _\": \"0E-20\", \"Sal_ Ass_ Fund Over 3rd Band _\": \"0E-20\", \"FIRR Batch Template Name\": \"\", \"FIRR Batch Name\": \"\", \"Prev_ Fund _ - Company Ch mult\": \"3.00000000000000000000\", \"Prev_ Fund _ - Salesp_ Ch mult\": \"1.00000000000000000000\"}}}}}\n\nID: 74\n├── Title: navision_schema_enriched.json\n└── Content:\n{\"360\": {\"metadata\": {\"sample_data\": {\"1\": {\"timestamp\": \"<binary data>\", \"Primary Key\": \"\", \"Starting Date\": \"2017-01-01 00:00:00\", \"Prev_ Fund _\": \"15.65000000000000000000\", \"Prev_ Fund _ - Company Charged\": \"7.78000000000000000000\", \"Prev_ Fund _ - Salesp_ Charged\": \"7.78000000000000000000\", \"Prev_ Fund - Max Amount One\": \"37500.00000000000000000000\", \"Prev_ Fund - Max Amount Multi\": \"25000.00000000000000000000\", \"Prev_ Fund - Min Amount One\": \"836.00000000000000000000\", \"Prev_ Fund - Min Amount Multi\": \"418.00000000000000000000\", \"Prev-Min Amt Comp_ One-Assoc_\": \"0E-20\", \"Prev-Min Amt Company\": \"0E-20\", \"Assistential Fund _\": \"1.00000000000000000000\", \"FIRR 1st Band One Repr_\": \"12400.00000000000000000000\", \"FIRR 2nd Band One Repr_\": \"18600.00000000000000000000\", \"FIRR 1st Band Multi Repr_\": \"6200.00000000000000000000\", \"FIRR 2nd Band Multi Repr_\": \"9300.00000000000000000000\", \"FIRR 1st Band One Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band One Repr_ _\": \"2.00000000000000000000\"}}}}}{\"360\": {\"metadata\": {\"sample_data\": {\"1\": {\"FIRR Over 2nd Band One Repr_ _\": \"1.00000000000000000000\", \"FIRR 1st Band Multi Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band Multi Repr_ _\": \"2.00000000000000000000\", \"FIRR Over 2nd Band MultiRepr _\": \"1.00000000000000000000\", \"Assistential Fund 1st Band\": \"13000000.00000000000000000000\", \"Assistential Fund 2nd Band\": \"0E-20\", \"Assistential Fund 3rd Band\": \"0E-20\", \"Assistential Fund 1st Band _\": \"0E-20\", \"Assistential Fund 2nd Band _\": \"0E-20\", \"Assistential Fund 3rd Band _\": \"0E-20\", \"Assist_ Fund Over 3rd Band _\": \"0E-20\", \"Nr_ Posizione ENASARCO\": \"\", \"Nr_ Prot_ Interfaccia ENASARCO\": \"\", \"Ind_ Agenti Mesi Fascia 1\": \"0\", \"Ind_ Agenti Mesi Fascia 2\": \"0\", \"Ind_ Agenti Mesi Fascia 3\": \"0\", \"Indennità  _ Agenti Fascia 1\": \"0E-20\", \"Indennità _ Agenti Fascia 2\": \"0E-20\", \"Indennità _ Agenti Fascia 3\": \"0E-20\", \"Conto Debiti V_Enasarco\": \"3373753750\", \"Conto Costo Enasarco Az_\": \"8020012002\", \"Conto Debiti V_FIRR\": \"3373753760\"}}}}}\n\nID: 61\n├── Title: FORCH_NAVISION.md\n└── Content:\n<table>\n<thead>\n<tr>\n<th>Column</th>\n<th>Type</th>\n<th>Nullable</th>\n<th>Default</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>timestamp</td>\n<td>timestamp</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Primary Key</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Starting Date</td>\n<td>datetime</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund _ - Company Charged</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund _ - Salesp_ Charged</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund - Max Amount One</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund - Max Amount Multi</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund - Min Amount One</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund - Min Amount Multi</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev-Min Amt Comp_ One-Assoc_</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev-Min Amt Company</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assistential Fund _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 1st Band One Repr_</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 2nd Band One Repr_</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 1st Band Multi Repr_</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 2nd Band Multi Repr_</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 1st Band One Repr_ _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 2nd Band One Repr_ _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR Over 2nd Band One Repr_ _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 1st Band Multi Repr_ _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 2nd Band Multi Repr_ _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR Over 2nd Band MultiRepr _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assistential Fund 1st Band</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assistential Fund 2nd Band</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assistential Fund 3rd Band</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assistential Fund 1st Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assistential Fund 2nd Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assistential Fund 3rd Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assist_ Fund Over 3rd Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Nr_ Posizione ENASARCO</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Nr_ Prot_ Interfaccia ENASARCO</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Ind_ Agenti Mesi Fascia 1</td>\n<td>int</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Ind_ Agenti Mesi Fascia 2</td>\n<td>int</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Ind_ Agenti Mesi Fascia 3</td>\n<td>int</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Indennità  _ Agenti Fascia 1</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Indennità _ Agenti Fascia 2</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Indennità _ Agenti Fascia 3</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Conto Debiti V_Enasarco</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Conto Costo Enasarco Az_</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Conto Debiti V_FIRR</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Conto Costo FIRR</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Conto Debiti Ind_ Suppl_</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Conto Costo Ind_ Suppl_</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Max Range FISC</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Batch Template Name</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Batch Name</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Salesp_ Ass_ Fund 1st Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Salesp_ Ass_ Fund 2nd Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Salesp_ Ass_ Fund 3rd Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Sal_ Ass_ Fund Over 3rd Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR Batch Template Name</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR Batch Name</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund _ - Company Ch mult</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund _ - Salesp_ Ch mult</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n\nID: 57\n├── Title: navision_schema_enriched.json\n└── Content:\n{\"86\": {\"table\": \"FORCH$Area Agenti\", \"text\": \"Table: FORCH$Area Agenti\\nRow Count: 14\\nDescription: Records and transactions related to forch$area agenti.\\nColumns:\\n- timestamp (timestamp, NOT NULL)\\n- Codice Area (nvarchar(10), NOT NULL, Primary Key)\\n- Descrizione (nvarchar(30), NOT NULL)\\n\\nSample Data:\\nRow 1:\\n  timestamp: <binary data>\\n  Codice Area: 0\\n  Descrizione: \\nRow 2:\\n  timestamp: <binary data>\\n  Codice Area: 10\\n  Descrizione: \\nRow 3:\\n  timestamp: <binary data>\\n  Codice Area: 11\\n  Descrizione: Area Fornoni\"}}{\"86\": {\"metadata\": {\"primary_key\": {\"0\": \"Codice Area\"}, \"foreign_keys\": {}, \"row_count\": 14, \"columns\": {\"timestamp\": {\"data_type\": \"timestamp\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Codice Area\": {\"data_type\": \"nvarchar\", \"max_length\": 10, \"is_nullable\": \"NO\", \"default_value\": null}, \"Descrizione\": {\"data_type\": \"nvarchar\", \"max_length\": 30, \"is_nullable\": \"NO\", \"default_value\": null}}, \"sample_data\": {\"0\": {\"timestamp\": \"<binary data>\", \"Codice Area\": \"0\", \"Descrizione\": \"\"}, \"1\": {\"timestamp\": \"<binary data>\", \"Codice Area\": \"10\", \"Descrizione\": \"\"}, \"2\": {\"timestamp\": \"<binary data>\", \"Codice Area\": \"11\", \"Descrizione\": \"Area Fornoni\"}}}, \"description\": \"Records and transactions related to forch$area agenti.\"}}{\"87\": {\"table\": \"FORCH$Articoli - Accisa\", \"text\": \"Table: FORCH$Articoli - Accisa\\nRow Count: 197\\nDescription: Records and transactions related to forch$articoli - accisa.\\nColumns:\\n- timestamp (timestamp, NOT NULL)\\n- Item No_ (nvarchar(20), NOT NULL, Primary Key)\\n- Tipologia Accisa (nvarchar(10), NOT NULL, Primary Key)\\n- Descrizione (nvarchar(30), NOT NULL)\\n- Peso Articolo Unitario (gr) (decimal, NOT NULL)\\n- Peso Olio Minerale (gr) (decimal, NOT NULL)\\n- _Olio Minerale Unitario (decimal, NOT NULL)\\n\\nSample Data:\\nRow 1:\\n  timestamp: <binary data>\\n  Item No_: 548220001\\n  Tipologia Accisa: GAS COMB\\n  Descrizione: \\n  Peso Articolo Unitario (gr): 190.00000000000000000000\\n  Peso Olio Minerale (gr): 0E-20\\n  _Olio Minerale Unitario: 0E-20\\nRow 2:\\n  timestamp: <binary data>\\n  Item No_: 548260\\n  Tipologia Accisa: GAS COMB\\n  Descrizione: \\n  Peso Articolo Unitario (gr): 600.00000000000000000000\\n  Peso Olio Minerale (gr): 0E-20\\n  _Olio Minerale Unitario: 0E-20\\nRow 3:\\n  timestamp: <binary data>\\n  Item No_: 548263\\n  Tipologia Accisa: GAS COMB\\n  Descrizione: \\n  Peso Articolo Unitario (gr): 600.00000000000000000000\\n  Peso Olio Minerale (gr): 0E-20\\n  _Olio Minerale Unitario: 0E-20\"}}\n\nSamples about question to SQL: \nID: 29\n├── Title: italian_query_examples.md\n└── Content:\n**Note importanti**:\r- La query mostra i primi 10 agenti per numero di note di credito\r\n- Include sia il numero di note di credito che l'importo totale\r\n- I risultati sono ordinati per numero di note di credito in ordine decrescente\r\n- Il periodo di riferimento è il mese precedente\r\n- Il JOIN con la tabella Salesperson è necessario per ottenere i nomi degli agenti\r\n\r### \"Chi ha fatto la vendita più grande a gennaio?\"\r**SQL**:\r```sql\r\nSELECT TOP 1\r\n    sp.[No_] AS CodiceAgente,\r\n    sp.[Name] AS NomeAgente,\r\n    SUM(sl.[Line Amount]) AS ImportoTotaleVendite,\r\n    COUNT(DISTINCT sh.[No_]) AS NumeroOrdini\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Salesperson] sp\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh \r\n        ON sp.[No_] = sh.[Salesperson Code]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Line] sl \r\n        ON sh.[No_] = sl.[Document No_] \r\n        AND sh.[Document Type] = sl.[Document Type]\r\nWHERE \r\n    MONTH(sh.[Posting Date]) = 1  -- Gennaio\r\n    AND YEAR(sh.[Posting Date]) = YEAR(GETDATE())  -- Anno corrente\r\n    AND sh.[Document Type] = 1  -- 1 = Order\r\nGROUP BY \r\n    sp.[No_], sp.[Name]\r\nORDER BY \r\n    ImportoTotaleVendite DESC;\r\n```\r**Note importanti**:\r- La query mostra l'agente con l'importo totale di vendite più alto\r\n- Include sia l'importo totale che il numero di ordini\r\n- Considera solo gli ordini (Document Type = 1)\r\n- Il periodo di riferimento è gennaio dell'anno corrente\r\n- I risultati sono ordinati per importo totale in ordine decrescente\r\n\r### \"Negli ultimi 5 anni, quanti agenti sono entrati e quanti sono usciti dalla forza vendita?\"\r**SQL**:\r```sql\r\nWITH AgentChanges AS (\r\n    SELECT \r\n        [No_] AS CodiceAgente,\r\n        [Name] AS NomeAgente,\r\n        [Data Inizio Mandato] AS DataInizio,\r\n        [Data Fine Mandato] AS DataFine\r\n    FROM \r\n        [FORCH_NAVISION].[dbo].[FORCH$Salesperson]\r\n    WHERE \r\n        [Data Inizio Mandato] >= DATEADD(YEAR, -5, GETDATE())  -- Entrati negli ultimi 5 anni\r\n        OR [Data Fine Mandato] >= DATEADD(YEAR, -5, GETDATE())  -- Usciti negli ultimi 5 anni\r\n)\r\nSELECT \r\n    COUNT(CASE WHEN DataInizio >= DATEADD(YEAR, -5, GETDATE()) THEN 1 END) AS AgentiEntrati,\r\n    COUNT(CASE WHEN DataFine >= DATEADD(YEAR, -5, GETDATE()) THEN 1 END) AS AgentiUsciti,\r\n    COUNT(*) AS TotaleAgenti\r\nFROM \r\n    AgentChanges;\r\n```\r\n\nID: 88\n├── Title: italian_query_examples.md\n└── Content:\n**Note importanti**:\r- Quando un utente chiede informazioni sugli \"Agenti\", si riferisce ai \"Salesperson\" nel database\r\n- Utilizzare l'alias \"sp\" per la tabella Salesperson\r\n- Collegare Salesperson a Sales Header tramite il campo \"Salesperson Code\"\r\n\r### \"Quanti viti dell'AGR 1011 sono state vendute il 24 febbraio e da chi?\"\r**SQL**:\r```sql\r\nSELECT \r\n    sp.[No_] AS CodiceAgente,\r\n    sp.[Name] AS NomeAgente,\r\n    SUM(sl.[Quantity]) AS QuantitàVenduta,\r\n    SUM(sl.[Line Amount]) AS ImportoTotale\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Line] sl\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh \r\n        ON sl.[Document No_] = sh.[No_] \r\n        AND sl.[Document Type] = sh.[Document Type]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Item] i \r\n        ON sl.[No_] = i.[No_]\r\nJOIN\r\n    [FORCH_NAVISION].[dbo].[FORCH$Salesperson] sp\r\n        ON sh.[Salesperson Code] = sp.[No_]\r\nWHERE \r\n    LEFT(i.[No_], 4) = '1011'  -- AGR code per viti specifiche\r\n    AND sh.[Posting Date] = '2025-02-24'\r\nGROUP BY \r\n    sp.[No_], sp.[Name]\r\nORDER BY \r\n    QuantitàVenduta DESC;\r\n```\r**Note importanti**:\r- La query mostra sia il codice che il nome dell'agente per una migliore identificazione\r\n- Include anche l'importo totale delle vendite per ogni agente\r\n- I risultati sono ordinati per quantità venduta in ordine decrescente\r\n- Il JOIN con la tabella Salesperson è necessario per ottenere il nome dell'agente\r\n\r### \"Chi sono gli agenti che hanno avuto più note di credito il mese scorso?\"\r**SQL**:\r```sql\r\nSELECT TOP 10\r\n    sp.[No_] AS CodiceAgente,\r\n    sp.[Name] AS NomeAgente,\r\n    COUNT(DISTINCT scmh.[No_]) AS NumeroNoteCredito,\r\n    SUM(scml.[Line Amount]) AS ImportoTotaleNoteCredito\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Salesperson] sp\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Cr_Memo Header] scmh \r\n        ON sp.[No_] = scmh.[Salesperson Code]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Cr_Memo Line] scml \r\n        ON scmh.[No_] = scml.[Document No_]\r\nWHERE \r\n    scmh.[Posting Date] >= DATEADD(MONTH, -1, GETDATE())\r\nGROUP BY \r\n    sp.[No_], sp.[Name]\r\nORDER BY \r\n    NumeroNoteCredito DESC;\r\n```\r\n\nID: 72\n├── Title: italian_query_examples.md\n└── Content:\n# Esempi di Query SQL in Italiano\rQuesto documento fornisce esempi di come tradurre domande in italiano in query SQL per il database Navision, con particolare attenzione ai problemi di mappatura delle categorie di prodotti.\r## Importante: Traduzione di Termini Comuni\r- **\"Agenti\"** si riferisce ai venditori o rappresentanti commerciali (tabella \"Salesperson\" in inglese)\r\n- **\"Cliente Attivo\"** si riferisce a un cliente che ha effettuato almeno un ordine in un determinato periodo di tempo\r\n- **\"Settore\"** può riferirsi a due concetti distinti:\r\n  - Per i clienti: si riferisce al codice ATECO (campo `Ateco Group Code` della tabella Customer)\r\n  - Per gli agenti: si riferisce al campo `ADM Description` della tabella Salesperson\r\n\r## Query di Vendita\r### \"Quanti trapani sono stati venduti il mese scorso?\"\r**Mappatura Vector DB**: \"trapano\" → Item Category Code '53'\r\n\r\n**SQL**:\r```sql\r\n-- Query per contare quanti trapani sono stati venduti il mese scorso\r\nSELECT \r\n    SUM(sl.[Quantity]) AS TotalTrapanitVenduti\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Line] sl\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh \r\n        ON sl.[Document No_] = sh.[No_] \r\n        AND sl.[Document Type] = sh.[Document Type]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Item] i \r\n        ON sl.[No_] = i.[No_]\r\nWHERE \r\n    i.[Item Category Code] = '53'  -- Codice categoria come testo con apici\r\n    AND sh.[Posting Date] >= DATEADD(MONTH, -1, GETDATE());\r\n```\r**Punto importante**: Il codice della categoria articolo (`Item Category Code`) deve essere trattato come testo ('53') e non come numero (53).\r### \"Quali sono i trapani più venduti?\"\r**Mappatura Vector DB**: \"trapano\" → Item Category Code '53'\r\n\r\n**SQL**:\r```sql\r\n-- Query per trovare i trapani più venduti\r\nSELECT TOP 10\r\n    i.[No_], \r\n    i.[Description],\r\n    SUM(sl.[Quantity]) AS QuantitàVenduta\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Line] sl\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh \r\n        ON sl.[Document No_] = sh.[No_] \r\n        AND sl.[Document Type] = sh.[Document Type]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Item] i \r\n        ON sl.[No_] = i.[No_]\r\nWHERE \r\n    i.[Item Category Code] = '53'  -- Codice categoria come testo con apici\r\n    AND sh.[Posting Date] >= DATEADD(MONTH, -6, GETDATE())\r\nGROUP BY \r\n    i.[No_], i.[Description]\r\nORDER BY \r\n    QuantitàVenduta DESC;\r\n```\r\n\nID: 38\n├── Title: italian_query_examples.md\n└── Content:\n### \"Qual è la media dei clienti attivi per ogni agente nel 2024?\"\r**SQL**:\r```sql\r\nWITH ActiveClients AS (\r\n    SELECT \r\n        COUNT(DISTINCT sh.[Sell-to Customer No_]) AS TotalActiveClients\r\n    FROM \r\n        [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh\r\n    WHERE \r\n        sh.[Document Type] = 1  -- Only orders\r\n        AND YEAR(sh.[Posting Date]) = 2024\r\n),\r\nActiveSalespeople AS (\r\n    SELECT \r\n        COUNT(DISTINCT sh.[Salesperson Code]) AS TotalActiveSalespeople\r\n    FROM \r\n        [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh\r\n    WHERE \r\n        sh.[Document Type] = 1  -- Only orders\r\n        AND YEAR(sh.[Posting Date]) = 2024\r\n        AND sh.[Salesperson Code] <> ''  -- Exclude empty salesperson codes\r\n)\r\nSELECT \r\n    FORMAT(CAST(ac.TotalActiveClients AS FLOAT) / asp.TotalActiveSalespeople, 'N2') AS MediaClientiAttiviPerAgente,\r\n    ac.TotalActiveClients AS TotaleClientiAttivi,\r\n    asp.TotalActiveSalespeople AS NumeroAgentiAttivi\r\nFROM \r\n    ActiveClients ac\r\nCROSS JOIN \r\n    ActiveSalespeople asp;\r\n```\r**Note importanti**:\r- La query calcola la media di clienti attivi per agente nel 2024\r\n- Un cliente è considerato attivo se ha effettuato almeno un ordine nel 2024\r\n- Un agente è considerato attivo se ha effettuato almeno una vendita nel 2024\r\n- Il calcolo viene fatto dividendo il numero totale di clienti attivi per il numero di agenti attivi\r\n- La query mostra:\r\n  - Media di clienti attivi per agente (arrotondata a 2 decimali)\r\n  - Numero totale di clienti attivi nel 2024\r\n  - Numero di agenti che hanno effettuato vendite nel 2024\r\n- Considera solo gli ordini effettivi (Document Type = 1)\r\n- La data di riferimento è la data di registrazione (Posting Date) dell'ordine\r\n- Il risultato rappresenta il numero medio di clienti attivi che ogni agente attivo gestisce\n\nID: 66\n├── Title: italian_query_examples.md\n└── Content:\n**Note importanti**:\r- Utilizzare i campi `[Data Inizio Mandato]` e `[Data Fine Mandato]` della tabella Salesperson\r\n- La query considera gli ultimi 5 anni dalla data corrente\r\n- Un agente può essere sia entrato che uscito negli ultimi 5 anni\r\n- Il totale degli agenti include tutti quelli che hanno avuto cambiamenti negli ultimi 5 anni\r\n- La query mostra:\r\n  - Numero di agenti entrati negli ultimi 5 anni\r\n  - Numero di agenti usciti negli ultimi 5 anni\r\n  - Totale degli agenti con cambiamenti negli ultimi 5 anni\r\n\r## Query relative al DB (Margine di Profitto)\r### \"Quanto è il DB medio per gli articoli 8017?\"\r**SQL**:\r```sql\r\nSELECT \r\n    i.[No_],\r\n    i.[Description],\r\n    AVG(sl.[Line Amount] - (sl.[Unit Cost] * sl.[Quantity])) AS DBMedio,\r\n    AVG((sl.[Line Amount] - (sl.[Unit Cost] * sl.[Quantity])) / NULLIF(sl.[Line Amount], 0) * 100) AS DBPercentuale\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Item] i\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Line] sl ON i.[No_] = sl.[No_]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh \r\n        ON sl.[Document No_] = sh.[No_] \r\n        AND sl.[Document Type] = sh.[Document Type]\r\nWHERE \r\n    LEFT(i.[No_], 4) = '8017'  -- AGR code per articoli specifici\r\n    AND sh.[Posting Date] >= DATEADD(MONTH, -12, GETDATE())  -- Ultimi 12 mesi\r\nGROUP BY \r\n    i.[No_], i.[Description]\r\nORDER BY \r\n    DBMedio DESC;\r\n```\r**Note importanti**:\r- DB (Deckungsbeitrag) si riferisce al margine di profitto\r\n- Il DB si calcola come differenza tra il prezzo di vendita (`Line Amount`) e il costo totale (`Unit Cost * Quantity`)\r\n- La percentuale di DB si calcola come (DB / Prezzo di vendita) * 100\r\n- NULLIF viene utilizzato per evitare divisioni per zero\r\n- La query mostra:\r\n  - Codice e descrizione dell'articolo\r\n  - DB medio in valore assoluto\r\n  - DB medio in percentuale\r\n- I risultati sono ordinati per DB medio in ordine decrescente\r\n- Il periodo di riferimento è l'ultimo anno per avere dati significativi\r\n\r\n\nID: 38\n├── Title: italian_query_examples.md\n└── Content:\n### \"Quale cliente ha acquistato più trapani?\"\r**Mappatura Vector DB**: \"trapano\" → Item Category Code '53'\r\n\r\n**SQL**:\r```sql\r\n-- Query per trovare il cliente che ha acquistato più trapani\r\nSELECT TOP 1\r\n    c.[No_],\r\n    c.[Name],\r\n    SUM(sl.[Quantity]) AS QuantitàTrapaniAcquistati\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Customer] c\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh \r\n        ON c.[No_] = sh.[Sell-to Customer No_]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Line] sl \r\n        ON sh.[No_] = sl.[Document No_] \r\n        AND sh.[Document Type] = sl.[Document Type]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Item] i \r\n        ON sl.[No_] = i.[No_]\r\nWHERE \r\n    i.[Item Category Code] = '53'  -- Codice categoria come testo con apici\r\n    AND sh.[Posting Date] >= DATEADD(MONTH, -12, GETDATE())\r\nGROUP BY \r\n    c.[No_], c.[Name]\r\nORDER BY \r\n    QuantitàTrapaniAcquistati DESC;\r\n```\r## Query relative agli Agenti (Salespersons)\r### \"Quali sono le vendite per agente nell'ultimo trimestre?\"\r**SQL**:\r```sql\r\n-- Query per mostrare le vendite totali per agente\r\nSELECT \r\n    sp.[No_], \r\n    sp.[Name] AS NomeAgente,\r\n    SUM(sl.[Quantity]) AS QuantitàVenduta,\r\n    SUM(sl.[Line Amount]) AS ImportoTotale\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Salesperson] sp\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh ON sp.[No_] = sh.[Salesperson Code]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Line] sl \r\n        ON sh.[No_] = sl.[Document No_] \r\n        AND sh.[Document Type] = sh.[Document Type]\r\nWHERE \r\n    sh.[Posting Date] >= DATEADD(MONTH, -3, GETDATE())\r\nGROUP BY \r\n    sp.[No_], sp.[Name]\r\nORDER BY \r\n    ImportoTotale DESC;\r\n```\r\n\nID: 85\n├── Title: italian_query_examples.md\n└── Content:\n**Note importanti**:\r- La query calcola la media giornaliera di ordini per ogni agente nel 2024\r\n- Utilizza una subquery per prima calcolare il valore totale degli ordini per ogni giorno e agente\r\n- Considera solo gli ordini effettivi (Document Type = 1)\r\n- Il valore dell'ordine è la somma di tutti i Line Amount per quel giorno\r\n- La data di riferimento è la data di registrazione (Posting Date) dell'ordine\r\n- FORMAT('N2') viene utilizzato per arrotondare i risultati a 2 decimali\r\n- Il simbolo € viene aggiunto ai valori monetari\r\n- La query mostra:\r\n  - Codice e nome dell'agente\r\n  - Media giornaliera di ordini\r\n  - Numero di giorni con ordini\r\n  - Valore totale degli ordini\r\n- I risultati sono ordinati per media giornaliera in ordine decrescente\r\n\r### \"Quanti ordini trasmette in media al giorno un venditore?\"\r**SQL**:\r```sql\r\nSELECT \r\n    FORMAT(AVG(DailyOrdersPerSalesperson), 'N2') AS MediaOrdiniGiornalieriPerVenditore\r\nFROM (\r\n    SELECT \r\n        sh.[Salesperson Code],\r\n        CAST(sh.[Posting Date] AS DATE) AS OrderDate,\r\n        COUNT(DISTINCT sh.[No_]) AS DailyOrdersPerSalesperson\r\n    FROM \r\n        [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh\r\n    WHERE \r\n        sh.[Document Type] = 1  -- Only orders\r\n        AND sh.[Posting Date] >= DATEADD(MONTH, -12, GETDATE())  -- Ultimi 12 mesi\r\n    GROUP BY \r\n        sh.[Salesperson Code],\r\n        CAST(sh.[Posting Date] AS DATE)\r\n) AS DailyOrdersPerSalesperson;\r\n```\r**Note importanti**:\r- La query calcola la media di ordini giornalieri per venditore\r\n- Utilizza una subquery per prima calcolare il numero di ordini per ogni venditore per ogni giorno\r\n- Considera solo gli ordini effettivi (Document Type = 1)\r\n- La data di riferimento è la data di registrazione (Posting Date) dell'ordine\r\n- FORMAT('N2') viene utilizzato per arrotondare la media a 2 decimali\r\n- Il periodo di riferimento è l'ultimo anno per avere dati significativi\r\n- Il risultato rappresenta il numero medio di ordini che un venditore tipicamente processa in un giorno\r\n\r\n\nID: 93\n├── Title: italian_query_examples.md\n└── Content:\n## Query di Inventario\r### \"Quanti trapani abbiamo in magazzino?\"\r**Mappatura Vector DB**: \"trapano\" → Item Category Code '53'\r\n\r\n**SQL**:\r```sql\r\n-- Query per contare quanti trapani sono disponibili in magazzino\r\nSELECT \r\n    COUNT(*) AS NumeroTrapani\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Item] i\r\nWHERE \r\n    i.[Item Category Code] = '53'  -- Codice categoria come testo con apici\r\n    AND i.[Blocked] = 0;\r\n```\r### \"Quanti set di cacciaviti abbiamo in vendita?\"\r**Mappatura Vector DB**: \"cacciaviti\" → Item Category Code '42'\r\n\r\n**SQL**:\r```sql\r\n-- Query per trovare i set di cacciaviti disponibili\r\nSELECT \r\n    i.[No_], \r\n    i.[Description],\r\n    i.[Unit Price]\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Item] i\r\nWHERE \r\n    i.[Item Category Code] = '42'  -- Codice categoria per cacciaviti\r\n    AND (\r\n        UPPER(i.[Description]) LIKE '%SET%' \r\n        OR UPPER(i.[Description]) LIKE '%KIT%'\r\n    )\r\n    AND i.[Blocked] = 0\r\nORDER BY \r\n    i.[Description];\r\n```\r**Note importanti**:\r- La query cerca sia \"SET\" che \"KIT\" nella descrizione del prodotto\r\n- UPPER() viene utilizzato per gestire le variazioni di maiuscole/minuscole\r\n- Vengono mostrati solo gli articoli non bloccati\r\n- I risultati sono ordinati per descrizione per una migliore leggibilità\r\n\r### \"Quali viti sono quasi esaurite?\"\r**Mappatura Vector DB**: \"viti\" → AGG code '1'\r\n\r\n**SQL**:\r```sql\r\n-- Query per trovare le viti\r\nSELECT \r\n    i.[No_], \r\n    i.[Description],\r\n    i.[Reorder Point]\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Item] i\r\nWHERE \r\n    LEFT(i.[No_], 1) = '1'  -- AGG code per viti\r\n    AND i.[Blocked] = 0\r\nORDER BY \r\n    i.[Reorder Point] DESC;\r\n```\r## Query di Analisi Cliente\r\n\nDescription about meanings of tables and files: \nID: 72\n├── Title: navision_schema_docs.json\n└── Content:\n{\"360\": {\"metadata\": {\"sample_data\": {\"0\": {\"timestamp\": \"<binary data>\", \"Primary Key\": \"\", \"Starting Date\": \"2016-01-01 00:00:00\", \"Prev_ Fund _\": \"15.10000000000000000000\", \"Prev_ Fund _ - Company Charged\": \"7.55000000000000000000\", \"Prev_ Fund _ - Salesp_ Charged\": \"7.55000000000000000000\", \"Prev_ Fund - Max Amount One\": \"37500.00000000000000000000\", \"Prev_ Fund - Max Amount Multi\": \"25000.00000000000000000000\", \"Prev_ Fund - Min Amount One\": \"836.00000000000000000000\", \"Prev_ Fund - Min Amount Multi\": \"418.00000000000000000000\", \"Prev-Min Amt Comp_ One-Assoc_\": \"0E-20\", \"Prev-Min Amt Company\": \"0E-20\", \"Assistential Fund _\": \"1.00000000000000000000\", \"FIRR 1st Band One Repr_\": \"12400.00000000000000000000\", \"FIRR 2nd Band One Repr_\": \"18600.00000000000000000000\", \"FIRR 1st Band Multi Repr_\": \"6200.00000000000000000000\", \"FIRR 2nd Band Multi Repr_\": \"9300.00000000000000000000\", \"FIRR 1st Band One Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band One Repr_ _\": \"2.00000000000000000000\"}}}}}{\"360\": {\"metadata\": {\"sample_data\": {\"0\": {\"FIRR Over 2nd Band One Repr_ _\": \"1.00000000000000000000\", \"FIRR 1st Band Multi Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band Multi Repr_ _\": \"2.00000000000000000000\", \"FIRR Over 2nd Band MultiRepr _\": \"1.00000000000000000000\", \"Assistential Fund 1st Band\": \"0E-20\", \"Assistential Fund 2nd Band\": \"0E-20\", \"Assistential Fund 3rd Band\": \"0E-20\", \"Assistential Fund 1st Band _\": \"0E-20\", \"Assistential Fund 2nd Band _\": \"0E-20\", \"Assistential Fund 3rd Band _\": \"0E-20\", \"Assist_ Fund Over 3rd Band _\": \"0E-20\", \"Nr_ Posizione ENASARCO\": \"\", \"Nr_ Prot_ Interfaccia ENASARCO\": \"\", \"Ind_ Agenti Mesi Fascia 1\": \"0\", \"Ind_ Agenti Mesi Fascia 2\": \"0\", \"Ind_ Agenti Mesi Fascia 3\": \"0\", \"Indennità  _ Agenti Fascia 1\": \"0E-20\", \"Indennità _ Agenti Fascia 2\": \"0E-20\", \"Indennità _ Agenti Fascia 3\": \"0E-20\", \"Conto Debiti V_Enasarco\": \"3373753750\", \"Conto Costo Enasarco Az_\": \"8020012002\", \"Conto Debiti V_FIRR\": \"3373753760\", \"Conto Costo FIRR\": \"8020012003\"}}}}}\n\nID: 6\n├── Title: navision_schema_docs.json\n└── Content:\n{\"360\": {\"metadata\": {\"sample_data\": {\"1\": {\"FIRR Over 2nd Band One Repr_ _\": \"1.00000000000000000000\", \"FIRR 1st Band Multi Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band Multi Repr_ _\": \"2.00000000000000000000\", \"FIRR Over 2nd Band MultiRepr _\": \"1.00000000000000000000\", \"Assistential Fund 1st Band\": \"13000000.00000000000000000000\", \"Assistential Fund 2nd Band\": \"0E-20\", \"Assistential Fund 3rd Band\": \"0E-20\", \"Assistential Fund 1st Band _\": \"0E-20\", \"Assistential Fund 2nd Band _\": \"0E-20\", \"Assistential Fund 3rd Band _\": \"0E-20\", \"Assist_ Fund Over 3rd Band _\": \"0E-20\", \"Nr_ Posizione ENASARCO\": \"\", \"Nr_ Prot_ Interfaccia ENASARCO\": \"\", \"Ind_ Agenti Mesi Fascia 1\": \"0\", \"Ind_ Agenti Mesi Fascia 2\": \"0\", \"Ind_ Agenti Mesi Fascia 3\": \"0\", \"Indennità  _ Agenti Fascia 1\": \"0E-20\", \"Indennità _ Agenti Fascia 2\": \"0E-20\", \"Indennità _ Agenti Fascia 3\": \"0E-20\", \"Conto Debiti V_Enasarco\": \"3373753750\", \"Conto Costo Enasarco Az_\": \"8020012002\", \"Conto Debiti V_FIRR\": \"3373753760\"}}}}}{\"360\": {\"metadata\": {\"sample_data\": {\"1\": {\"Conto Costo FIRR\": \"8020012003\", \"Conto Debiti Ind_ Suppl_\": \"\", \"Conto Costo Ind_ Suppl_\": \"\", \"Max Range FISC\": \"0E-20\", \"Batch Template Name\": \"\", \"Batch Name\": \"\", \"Salesp_ Ass_ Fund 1st Band _\": \"0E-20\", \"Salesp_ Ass_ Fund 2nd Band _\": \"0E-20\", \"Salesp_ Ass_ Fund 3rd Band _\": \"0E-20\", \"Sal_ Ass_ Fund Over 3rd Band _\": \"0E-20\", \"FIRR Batch Template Name\": \"\", \"FIRR Batch Name\": \"\", \"Prev_ Fund _ - Company Ch mult\": \"3.00000000000000000000\", \"Prev_ Fund _ - Salesp_ Ch mult\": \"1.00000000000000000000\"}}}}}\n\nID: 1\n├── Title: navision_schema_docs.json\n└── Content:\n{\"360\": {\"metadata\": {\"sample_data\": {\"2\": {\"timestamp\": \"<binary data>\", \"Primary Key\": \"\", \"Starting Date\": \"2018-01-01 00:00:00\", \"Prev_ Fund _\": \"16.00000000000000000000\", \"Prev_ Fund _ - Company Charged\": \"8.00000000000000000000\", \"Prev_ Fund _ - Salesp_ Charged\": \"8.00000000000000000000\", \"Prev_ Fund - Max Amount One\": \"37913.00000000000000000000\", \"Prev_ Fund - Max Amount Multi\": \"25275.00000000000000000000\", \"Prev_ Fund - Min Amount One\": \"846.00000000000000000000\", \"Prev_ Fund - Min Amount Multi\": \"423.00000000000000000000\", \"Prev-Min Amt Comp_ One-Assoc_\": \"0E-20\", \"Prev-Min Amt Company\": \"0E-20\", \"Assistential Fund _\": \"1.00000000000000000000\", \"FIRR 1st Band One Repr_\": \"12400.00000000000000000000\", \"FIRR 2nd Band One Repr_\": \"18600.00000000000000000000\", \"FIRR 1st Band Multi Repr_\": \"6200.00000000000000000000\", \"FIRR 2nd Band Multi Repr_\": \"9300.00000000000000000000\", \"FIRR 1st Band One Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band One Repr_ _\": \"2.00000000000000000000\"}}}}}{\"360\": {\"metadata\": {\"sample_data\": {\"2\": {\"FIRR Over 2nd Band One Repr_ _\": \"1.00000000000000000000\", \"FIRR 1st Band Multi Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band Multi Repr_ _\": \"2.00000000000000000000\", \"FIRR Over 2nd Band MultiRepr _\": \"1.00000000000000000000\", \"Assistential Fund 1st Band\": \"13000000.00000000000000000000\", \"Assistential Fund 2nd Band\": \"0E-20\", \"Assistential Fund 3rd Band\": \"0E-20\", \"Assistential Fund 1st Band _\": \"0E-20\", \"Assistential Fund 2nd Band _\": \"0E-20\", \"Assistential Fund 3rd Band _\": \"0E-20\", \"Assist_ Fund Over 3rd Band _\": \"0E-20\", \"Nr_ Posizione ENASARCO\": \"\", \"Nr_ Prot_ Interfaccia ENASARCO\": \"\", \"Ind_ Agenti Mesi Fascia 1\": \"0\", \"Ind_ Agenti Mesi Fascia 2\": \"0\", \"Ind_ Agenti Mesi Fascia 3\": \"0\", \"Indennità  _ Agenti Fascia 1\": \"0E-20\", \"Indennità _ Agenti Fascia 2\": \"0E-20\", \"Indennità _ Agenti Fascia 3\": \"0E-20\", \"Conto Debiti V_Enasarco\": \"3373753750\", \"Conto Costo Enasarco Az_\": \"8020012002\", \"Conto Debiti V_FIRR\": \"3373753760\"}}}}}\n\nID: 59\n├── Title: database_structure.md\n└── Content:\n<table>\n<thead>\n<tr>\n<th>Table Name</th>\n<th>Description</th>\n<th>Key Fields</th>\n<th>Usage</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>FORCH$Sales Header</td>\n<td>Header information for sales documents</td>\n<td>No_, Document Type, Posting Date, Sell-to Customer No_</td>\n<td>Contains customer reference and posting date</td>\n</tr>\n<tr>\n<td>FORCH$Sales Line</td>\n<td>Line items for sales documents</td>\n<td>Document No_, Document Type, Line No_, No_, Quantity, Line Amount</td>\n<td>Contains the products sold and quantities</td>\n</tr>\n<tr>\n<td>FORCH$Customer</td>\n<td>Customer master data</td>\n<td>No_, Name, Address</td>\n<td>Contains customer details</td>\n</tr>\n<tr>\n<td>FORCH$Salesperson</td>\n<td>Salesperson data (referred to as \"Agenti\" in Italian)</td>\n<td>No_, Name</td>\n<td>Tracks sales representatives information</td>\n</tr>\n</tbody>\n</table>\n\nID: 76\n├── Title: navision_schema_docs.json\n└── Content:\n{\"1500\": {\"metadata\": {\"sample_data\": {\"1\": {\"timestamp\": \"<binary data>\", \"Salesperson Code\": \"51\", \"Nr Riga\": \"2\", \"Anno\": \"2025\", \"Mese\": \"2\", \"Trimestre\": \"1\", \"Periodo\": \"2025/02\", \"Group Code\": \"\", \"Area Code\": \"\", \"Giorni Lavorativi\": \"0\", \"Giorni Lavorati\": \"0\", \"Budget\": \"0E-20\", \"Sales Amount\": \"0E-20\", \"Cost Amount\": \"0E-20\", \"Clienti Con ordine nel mese\": \"0\", \"Clienti Attivi\": \"0\", \"Clienti Nuovi\": \"0\", \"Clienti Riattivati\": \"0\", \"Importo ordini\": \"0E-20\", \"Ordini nel Periodo\": \"0\", \"Righe Ordini periodo\": \"0\", \"Nr Visite periodo\": \"0\", \"GA_\": \"0E-20\", \"EVOL_\": \"-100.00000000000000000000\", \"CM_\": \"0E-20\", \"CM EUR\": \"0E-20\", \"EVOLCM_\": \"-100.00000000000000000000\", \"FattLastYear\": \"75400.08000000000000000000\", \"LastYearCM_\": \"54.13000000000000000000\", \"Last Year CM EUR\": \"40814.12000000000000000000\", \"OADAY\": \"0E-20\", \"OP_O\": \"0E-20\", \"OP_AV_VALUE\": \"0E-20\", \"O_AV_VALUE\": \"0E-20\", \"AV_VISIT\": \"0E-20\", \"AV_Order_VISIT\": \"0E-20\", \"CostLastYear\": \"-34585.96000000000000000000\", \"Counter\": \"0\"}}}}}{\"1500\": {\"metadata\": {\"sample_data\": {\"2\": {\"timestamp\": \"<binary data>\", \"Salesperson Code\": \"51\", \"Nr Riga\": \"3\", \"Anno\": \"2025\", \"Mese\": \"3\", \"Trimestre\": \"1\", \"Periodo\": \"2025/03\", \"Group Code\": \"\", \"Area Code\": \"\", \"Giorni Lavorativi\": \"0\", \"Giorni Lavorati\": \"0\", \"Budget\": \"0E-20\", \"Sales Amount\": \"0E-20\", \"Cost Amount\": \"0E-20\", \"Clienti Con ordine nel mese\": \"0\", \"Clienti Attivi\": \"0\", \"Clienti Nuovi\": \"0\", \"Clienti Riattivati\": \"0\", \"Importo ordini\": \"0E-20\", \"Ordini nel Periodo\": \"0\", \"Righe Ordini periodo\": \"0\", \"Nr Visite periodo\": \"0\", \"GA_\": \"0E-20\", \"EVOL_\": \"-100.00000000000000000000\", \"CM_\": \"0E-20\", \"CM EUR\": \"0E-20\", \"EVOLCM_\": \"-100.00000000000000000000\", \"FattLastYear\": \"80290.39000000000000000000\", \"LastYearCM_\": \"55.64000000000000000000\", \"Last Year CM EUR\": \"44672.62000000000000000000\", \"OADAY\": \"0E-20\", \"OP_O\": \"0E-20\", \"OP_AV_VALUE\": \"0E-20\", \"O_AV_VALUE\": \"0E-20\", \"AV_VISIT\": \"0E-20\", \"AV_Order_VISIT\": \"0E-20\", \"CostLastYear\": \"-35617.77000000000000000000\", \"Counter\": \"0\"}}}}}\n\nID: 51\n├── Title: intranet_schema_with_descriptions.json\n└── Content:\n{\"371\": {\"metadata\": {\"columns\": {\"Nr Visite periodo\": {\"data_type\": \"int\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}}, \"sample_data\": {\"0\": {\"timestamp\": \"<binary data>\", \"Salesperson Code\": \"001\", \"Anno\": \"2006\", \"Mese\": \"1\", \"Trimestre\": \"1\", \"Periodo\": \"\", \"Group Code\": \"\", \"Area Code\": \"\", \"Giorni Lavorativi\": \"16\", \"Giorni Lavorati\": \"16\", \"Budget\": \"0E-20\", \"Clienti Con ordine nel mese\": \"0\", \"Clienti Attivi\": \"0\", \"Clienti Nuovi\": \"0\", \"Clienti Riattivati\": \"0\", \"Importo ordini\": \"0E-20\", \"Ordini nel Periodo\": \"0\", \"Righe Ordini periodo\": \"0\", \"Nr Visite periodo\": \"0\"}}}}}{\"371\": {\"metadata\": {\"sample_data\": {\"1\": {\"timestamp\": \"<binary data>\", \"Salesperson Code\": \"001\", \"Anno\": \"2006\", \"Mese\": \"2\", \"Trimestre\": \"1\", \"Periodo\": \"\", \"Group Code\": \"\", \"Area Code\": \"\", \"Giorni Lavorativi\": \"19\", \"Giorni Lavorati\": \"19\", \"Budget\": \"0E-20\", \"Clienti Con ordine nel mese\": \"0\", \"Clienti Attivi\": \"0\", \"Clienti Nuovi\": \"0\", \"Clienti Riattivati\": \"0\", \"Importo ordini\": \"0E-20\", \"Ordini nel Periodo\": \"0\", \"Righe Ordini periodo\": \"0\", \"Nr Visite periodo\": \"0\"}, \"2\": {\"timestamp\": \"<binary data>\", \"Salesperson Code\": \"001\", \"Anno\": \"2006\", \"Mese\": \"3\", \"Trimestre\": \"1\", \"Periodo\": \"\", \"Group Code\": \"\", \"Area Code\": \"\", \"Giorni Lavorativi\": \"22\", \"Giorni Lavorati\": \"22\", \"Budget\": \"0E-20\", \"Clienti Con ordine nel mese\": \"0\", \"Clienti Attivi\": \"0\", \"Clienti Nuovi\": \"0\", \"Clienti Riattivati\": \"0\", \"Importo ordini\": \"0E-20\", \"Ordini nel Periodo\": \"0\", \"Righe Ordini periodo\": \"0\", \"Nr Visite periodo\": \"0\"}}}}}\n\nID: 58\n├── Title: navision_schema_docs.json\n└── Content:\n  Ordii el Periodo: 0  Righe Ordii periodo: 0  Nr Visite periodo: 0  GA_: 0E-20  EVOL_: -100.00000000000000000000  CM_: 0E-20  CM EUR: 0E-20  EVOLCM_: -100.00000000000000000000  FattLastYear: 72726.32000000000000000000  LastYearCM_: 53.06000000000000000000  Last Year CM EUR: 38591.12000000000000000000  OADAY: 0E-20  OP_O: 0E-20  OP_AV_VALUE: 0E-20  O_AV_VALUE: 0E-20  AV_VISIT: 0E-20  AV_Order_VISIT: 0E-20  CostLastYear: -34135.20000000000000000000  Couter: 0Row 2:  timestamp: <biary data>  Salesperso Code: 51  Nr Riga: 2  Ao: 2025  Mese: 2  Trimestre: 1  Periodo: 2025/02  Group Code:   Area Code:   Giori Lavorativi: 0  Giori Lavorati: 0  Budget: 0E-20  Sales Amout: 0E-20  Cost Amout: 0E-20  Clieti Co ordie el mese: 0  Clieti Attivi: 0  Clieti Nuovi: 0  Clieti Riattivati: 0  Importo ordii: 0E-20  Ordii el Periodo: 0  Righe Ordii periodo: 0  Nr Visite periodo: 0  GA_: 0E-20  EVOL_: -100.00000000000000000000  CM_: 0E-20  CM EUR: 0E-20  EVOLCM_: -100.00000000000000000000  FattLastYear: 75400.08000000000000000000  LastYearCM_: 54.13000000000000000000  Last Year CM EUR: 40814.12000000000000000000\n\nID: 43\n├── Title: navision_schema_docs.json\n└── Content:\n{\"360\": {\"metadata\": {\"columns\": {\"Assistential Fund 1st Band\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Assistential Fund 2nd Band\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Assistential Fund 3rd Band\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Assistential Fund 1st Band _\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Assistential Fund 2nd Band _\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Assistential Fund 3rd Band _\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Assist_ Fund Over 3rd Band _\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Nr_ Posizione ENASARCO\": {\"data_type\": \"nvarchar\", \"max_length\": 20, \"is_nullable\": \"NO\", \"default_value\": null}}}}}{\"360\": {\"metadata\": {\"columns\": {\"Nr_ Prot_ Interfaccia ENASARCO\": {\"data_type\": \"nvarchar\", \"max_length\": 4, \"is_nullable\": \"NO\", \"default_value\": null}, \"Ind_ Agenti Mesi Fascia 1\": {\"data_type\": \"int\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Ind_ Agenti Mesi Fascia 2\": {\"data_type\": \"int\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Ind_ Agenti Mesi Fascia 3\": {\"data_type\": \"int\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Indennità  _ Agenti Fascia 1\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Indennità _ Agenti Fascia 2\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Indennità _ Agenti Fascia 3\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Conto Debiti V_Enasarco\": {\"data_type\": \"nvarchar\", \"max_length\": 20, \"is_nullable\": \"NO\", \"default_value\": null}}}}}",
                                "role": "user"
                            }
                        ],
                        "reasoning": null,
                        "sys_prompt": "### ROLE\nYou are a Text-to-SQL assistant for Microsoft SQL Server (T-SQL). Given a database schema and a natural-language request, produce a **single, syntactically-correct T-SQL SELECT** that answers the request. Return **only the SQL statement** — no fences, no commentary, no comments.\n\n### DIALECT RULES (MSSQL)\n1. Use square brackets for identifiers with spaces/special chars: [Salesperson Code], [FORCH$Statisitiche Vendita Agenti].\n2. Prefer schema-qualified names (e.g., dbo.[Table Name]).\n3. Use TOP n instead of LIMIT (e.g., SELECT TOP 1000 ...). For pagination, use OFFSET .. ROWS FETCH NEXT .. ROWS ONLY.\n4. Date helpers: YEAR(col), MONTH(col), DATENAME(MONTH,col), FORMAT(col,'yyyy-MM'), DATEFROMPARTS, EOMONTH, DATEADD, DATEDIFF.\n5. String helpers: CONCAT, LEFT, RIGHT, SUBSTRING, CHARINDEX, LEN, LOWER/UPPER, REPLACE.\n6. Count distinct: COUNT(DISTINCT col).\n7. Always generate **one single SELECT statement** (CTEs allowed). No DML/DDL.\n8. If table/column names contain quotes/backticks from other dialects, convert to [bracketed] identifiers.\n9. If you must cap result size, include TOP 1000 unless the question needs a smaller cap.\n10. If a database name override is necessary, add a leading directive on the first line exactly as: `-- DB: DatabaseName` (no quotes).\n\n### OUTPUT GUIDELINES\n- Output only the final SQL, no trailing semicolon required.\n- Use explicit joins with ON conditions.\n- Use safe defaults (e.g., TOP 1000) when the user asks for a sample or list without limits.\n- When referencing objects shown as dbo.\"FORCH$...\" or with spaces, normalize to dbo.[FORCH$...] and [Column Name].\n\n### EXAMPLES\n-- Example 1\nUser: Elenca il numero di agenti attivi nell'ultimo mese disponibile.\nSQL:\nWITH latest AS (\n  SELECT MAX(Anno) AS y FROM dbo.[FORCH$Statisitiche Vendita Agenti]\n)\nSELECT COUNT(DISTINCT [Salesperson Code]) AS agents\nFROM dbo.[FORCH$Statisitiche Vendita Agenti] t\nCROSS JOIN latest\nWHERE t.Anno = latest.y;\n\n-- Example 2\nUser: Mostra i 10 agenti con più ordini nell'anno corrente.\nSQL:\nSELECT TOP 10 [Salesperson Code], SUM([Ordini nel Periodo]) AS total_orders\nFROM dbo.[FORCH$Statisitiche Vendita Agenti]\nWHERE Anno = YEAR(GETDATE())\nGROUP BY [Salesperson Code]\nORDER BY total_orders DESC;",
                        "temperature": 0.1,
                        "temperatureEnabled": false,
                        "tools": [],
                        "topPEnabled": false,
                        "top_p": 0.3,
                        "user_prompt": "",
                        "visual_files_var": ""
                    }
                },
                "upstream": [
                    "Retrieval:HappyTiesFilm",
                    "Retrieval:SmartNewsHammer",
                    "Retrieval:SweetDancersAppear"
                ]
            },
            "ExeSQL:TiredShirtsPull": {
                "downstream": [
                    "Message:ShaggyMasksAttend"
                ],
                "obj": {
                    "component_name": "ExeSQL",
                    "params": {
                        "connection_profile": "mssql_rag",
                        "database": "",
                        "db_type": "mssql",
                        "debug_inputs": [],
                        "delay_after_error": 2.0,
                        "description": "",
                        "exception_default_value": null,
                        "exception_goto": null,
                        "exception_method": null,
                        "host": "",
                        "inputs": {
                            "sql": {
                                "default": "{sys.query}",
                                "description": "The SQL needs to be executed.",
                                "required": true,
                                "type": "string",
                                "value": "SELECT TOP 1000 COUNT(DISTINCT \"Salesperson Code\")\nFROM dbo.\"FORCH$Statisitiche Vendita Agenti\"\nWHERE\n  Anno = (\n    SELECT\n      MAX(Anno)\n    FROM dbo.\"FORCH$Statisitiche Vendita Agenti\"\n  ) AND Mese = (\n    SELECT\n      MAX(Mese)\n    FROM dbo.\"FORCH$Statisitiche Vendita Agenti\"\n    WHERE\n      Anno = (\n        SELECT\n          MAX(Anno)\n        FROM dbo.\"FORCH$Statisitiche Vendita Agenti\"\n      )\n  ) AND \"Ordini nel Periodo\" > 0"
                            }
                        },
                        "max_records": 1024,
                        "max_retries": 0,
                        "message_history_window_size": 13,
                        "meta": {
                            "description": "This is a tool that can execute SQL.",
                            "name": "execute_sql",
                            "parameters": {
                                "sql": {
                                    "default": "{sys.query}",
                                    "description": "The SQL needs to be executed.",
                                    "required": true,
                                    "type": "string"
                                }
                            }
                        },
                        "outputs": {
                            "_created_time": {
                                "type": "<class 'float'>",
                                "value": 103632.234550707
                            },
                            "_elapsed_time": {
                                "type": "<class 'float'>",
                                "value": 0.30785724200541154
                            },
                            "formalized_content": {
                                "type": "string",
                                "value": "|            |\n|-----------:|\n| 132.000000 |"
                            },
                            "json": {
                                "type": "Array<Object>",
                                "value": [
                                    [
                                        {
                                            "": 132
                                        }
                                    ]
                                ]
                            }
                        },
                        "password": "",
                        "port": 1433,
                        "sql": "ValidateSQL:CarefulSanitizer@sql",
                        "username": ""
                    }
                },
                "upstream": [
                    "ValidateSQL:CarefulSanitizer"
                ]
            },
            "Message:ShaggyMasksAttend": {
                "downstream": [],
                "obj": {
                    "component_name": "Message",
                    "params": {
                        "content": [
                            "{ExeSQL:TiredShirtsPull@formalized_content}"
                        ],
                        "debug_inputs": {},
                        "delay_after_error": 2.0,
                        "description": "",
                        "exception_default_value": null,
                        "exception_goto": null,
                        "exception_method": null,
                        "inputs": {},
                        "max_retries": 0,
                        "message_history_window_size": 13,
                        "outputs": {
                            "_created_time": {
                                "type": "<class 'float'>",
                                "value": 103632.543711735
                            },
                            "_elapsed_time": {
                                "type": "<class 'float'>",
                                "value": 0.0006317080114968121
                            },
                            "content": {
                                "type": "str",
                                "value": "|            |\n|-----------:|\n| 132.000000 |"
                            }
                        },
                        "stream": true
                    }
                },
                "upstream": [
                    "ExeSQL:TiredShirtsPull"
                ]
            },
            "Retrieval:HappyTiesFilm": {
                "downstream": [
                    "Agent:WickedGoatsDivide"
                ],
                "obj": {
                    "component_name": "Retrieval",
                    "params": {
                        "cross_languages": [],
                        "debug_inputs": [],
                        "delay_after_error": 2.0,
                        "description": "This tool can be utilized for relevant content searching in the datasets.",
                        "empty_response": "",
                        "exception_default_value": null,
                        "exception_goto": null,
                        "exception_method": null,
                        "function_name": "search_my_dateset",
                        "inputs": {
                            "query": {
                                "default": "",
                                "description": "The keywords to search the dataset. The keywords should be the most important words/terms(includes synonyms) from the original request.",
                                "required": true,
                                "type": "string",
                                "value": "Quanti agenti attivi ci sono al momento?"
                            }
                        },
                        "kb_ids": [
                            "ed31364c727211f0bdb2bafe6e7908e6",
                            "04aa54e0873411f0b38c865056c3bd63",
                            "e9f935a8873311f0a8af865056c3bd63"
                        ],
                        "kb_vars": [],
                        "keywords_similarity_weight": 0.7,
                        "max_retries": 0,
                        "message_history_window_size": 13,
                        "meta": {
                            "description": "This tool can be utilized for relevant content searching in the datasets.",
                            "name": "search_my_dateset",
                            "parameters": {
                                "query": {
                                    "default": "",
                                    "description": "The keywords to search the dataset. The keywords should be the most important words/terms(includes synonyms) from the original request.",
                                    "required": true,
                                    "type": "string"
                                }
                            }
                        },
                        "outputs": {
                            "_created_time": {
                                "type": "<class 'float'>",
                                "value": 103618.530381809
                            },
                            "_elapsed_time": {
                                "type": "<class 'float'>",
                                "value": 1.2354769939993275
                            },
                            "formalized_content": {
                                "type": "string",
                                "value": "\nID: 24\n├── Title: navision_schema_enriched.json\n└── Content:\n{\"360\": {\"metadata\": {\"sample_data\": {\"2\": {\"FIRR Over 2nd Band One Repr_ _\": \"1.00000000000000000000\", \"FIRR 1st Band Multi Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band Multi Repr_ _\": \"2.00000000000000000000\", \"FIRR Over 2nd Band MultiRepr _\": \"1.00000000000000000000\", \"Assistential Fund 1st Band\": \"13000000.00000000000000000000\", \"Assistential Fund 2nd Band\": \"0E-20\", \"Assistential Fund 3rd Band\": \"0E-20\", \"Assistential Fund 1st Band _\": \"0E-20\", \"Assistential Fund 2nd Band _\": \"0E-20\", \"Assistential Fund 3rd Band _\": \"0E-20\", \"Assist_ Fund Over 3rd Band _\": \"0E-20\", \"Nr_ Posizione ENASARCO\": \"\", \"Nr_ Prot_ Interfaccia ENASARCO\": \"\", \"Ind_ Agenti Mesi Fascia 1\": \"0\", \"Ind_ Agenti Mesi Fascia 2\": \"0\", \"Ind_ Agenti Mesi Fascia 3\": \"0\", \"Indennità  _ Agenti Fascia 1\": \"0E-20\", \"Indennità _ Agenti Fascia 2\": \"0E-20\", \"Indennità _ Agenti Fascia 3\": \"0E-20\", \"Conto Debiti V_Enasarco\": \"3373753750\", \"Conto Costo Enasarco Az_\": \"8020012002\", \"Conto Debiti V_FIRR\": \"3373753760\"}}}}}{\"360\": {\"metadata\": {\"sample_data\": {\"2\": {\"Conto Costo FIRR\": \"8020012003\", \"Conto Debiti Ind_ Suppl_\": \"\", \"Conto Costo Ind_ Suppl_\": \"\", \"Max Range FISC\": \"0E-20\", \"Batch Template Name\": \"\", \"Batch Name\": \"\", \"Salesp_ Ass_ Fund 1st Band _\": \"0E-20\", \"Salesp_ Ass_ Fund 2nd Band _\": \"0E-20\", \"Salesp_ Ass_ Fund 3rd Band _\": \"0E-20\", \"Sal_ Ass_ Fund Over 3rd Band _\": \"0E-20\", \"FIRR Batch Template Name\": \"\", \"FIRR Batch Name\": \"\", \"Prev_ Fund _ - Company Ch mult\": \"3.00000000000000000000\", \"Prev_ Fund _ - Salesp_ Ch mult\": \"1.00000000000000000000\"}}}, \"description\": \"Records and transactions related to forch$contribution setup.\"}}\n\nID: 93\n├── Title: FORCH_NAVISION.md\n└── Content:\n## dbo.FRC_Statisitiche_Vendita_Agenti (VIEW)| Column | Type | Nullable | Default |\n|--|--|--|--|\n| timestamp | timestamp | NO |  |\n| Salesperson Code | nvarchar | NO |  |\n| Anno | int | NO |  |\n| Mese | int | NO |  |\n| Trimestre | int | NO |  |\n| Periodo | nvarchar | NO |  |\n| Group Code | nvarchar | NO |  |\n| Area Code | nvarchar | NO |  |\n| Giorni Lavorativi | int | NO |  |\n| Giorni Lavorati | int | NO |  |\n| Budget | decimal | NO |  |\n| Clienti Con ordine nel mese | int | NO |  |\n| Clienti Attivi | int | NO |  |\n| Clienti Nuovi | int | NO |  |\n| Clienti Riattivati | int | NO |  |\n| Importo ordini | decimal | NO |  |\n| Ordini nel Periodo | int | NO |  |\n| Righe Ordini periodo | int | NO |  |\n| Nr Visite periodo | int | NO |  |## dbo.FRC_Statisitiche_Vendita_Articoli (VIEW)| Colum | Type | Nullable | Default |\n|--|--|--|--|\n| timestamp | timestamp | NO |  |\n| Documet No_ | varchar | NO |  |\n| Salesperso Code | varchar | NO |  |\n| Lie No_ | it | NO |  |\n| Cod_ Articolo | varchar | NO |  |\n| Postig date | datetime | NO |  |\n| Gruppo | varchar | NO |  |\n| Sottogruppo | varchar | NO |  |\n| Tipo Riga | it | NO |  |\n| Nr_ Coto C_G | varchar | NO |  |\n| Group Code | varchar | NO |  |\n| Area Code | varchar | NO |  |\n| Cod_ raggr_ Art_ | varchar | NO |  |\n| Documet Sales Qty | decimal | NO |  |\n| Documet Sales Amout | decimal | NO |  |\n| Documet Cost Amout | decimal | NO |  |\n| Ao | it | NO |  |\n| Mese | i\n\nID: 26\n├── Title: FORCH_NAVISION.md\n└── Content:\n## dbo.FORCH$Statisitiche Vendita Agenti (BASE TABLE)Primary Key: Salesperson Code, Anno, Mese\n\n| Column | Type | Nullable | Default |\n|--|--|--|--|\n| timestamp | timestamp | NO |  |\n| Salesperson Code | nvarchar | NO |  |\n| Anno | int | NO |  |\n| Mese | int | NO |  |\n| Trimestre | int | NO |  |\n| Periodo | nvarchar | NO |  |\n| Group Code | nvarchar | NO |  |\n| Area Code | nvarchar | NO |  |\n| Giorni Lavorativi | int | NO |  |\n| Giorni Lavorati | int | NO |  |\n| Budget | decimal | NO |  |\n| Clienti Con ordine nel mese | int | NO |  |\n| Clienti Attivi | int | NO |  |\n| Clienti Nuovi | int | NO |  |\n| Clienti Riattivati | int | NO |  |\n| Importo ordini | decimal | NO |  |\n| Ordini nel Periodo | int | NO |  |\n| Righe Ordini periodo | int | NO |  |\n| Nr Visite periodo | int | NO |  |## dbo.FORCH$Statisitiche Vendita Agenti 2 (BASE TABLE)Primary Key: Salesperson Code, Nr Riga\n\n| Column | Type | Nullable | Default |\n|--|--|--|--|\n| timestamp | timestamp | NO |  |\n| Salesperson Code | nvarchar | NO |  |\n| Nr Riga | int | NO |  |\n| Anno | int | NO |  |\n| Mese | int | NO |  |\n| Trimestre | int | NO |  |\n| Periodo | nvarchar | NO |  |\n| Group Code | nvarchar | NO |  |\n| Area Code | nvarchar | NO |  |\n| Giorni Lavorativi | int | NO |  |\n| Giorni Lavorati | int | NO |  |\n| Budget | decimal | NO |  |\n| Sales Amount | decimal | NO |  |\n| Cost Amount | decimal | NO |  |\n| Clienti Con ordine nel mese | int | NO |  |\n| Clienti Attivi | int | NO |  |\n| Clienti Nuovi | int | NO |  |\n| Clienti Riattivati | int | NO |  |\n| Importo ordini | decimal | NO |  |\n| Ordini nel Periodo | int | NO |  |\n| Righe Ordini periodo | int | NO |  |\n| Nr Visite periodo | int | NO |  |\n| GA_ | decimal | NO |  |\n| EVOL_ | decimal | NO |  |\n| CM_ | decimal | NO |  |\n| CM EUR | decimal | NO |  |\n| EVOLCM_ | decimal | NO |  |\n| FattLastYear | decimal | NO |  |\n| LastYearCM_ | decimal | NO |  |\n| Last Year CM EUR | decimal | NO |  |\n| OADAY | decimal | NO |  |\n| OP_O | decimal | NO |  |\n| OP_AV_VALUE | decimal | NO |  |\n| O_AV_VALUE | decimal | NO |  |\n| AV_VISIT | decimal | NO |  |\n| AV_Order_VISIT | decimal | NO |  |\n| CostLastYear | decimal | NO |  |\n| Counter | int | NO |  |\n\nID: 97\n├── Title: FORCH2002.md\n└── Content:\ne Cliete | varchar | NO |  |\n| Origial quatity | decimal | NO |  |\n| Customer item code | varchar | NO |  |\n| Salesperso 1 | varchar | NO |  |## dbo.vwFORCH_Ship_to_Address (VIEW)| Column | Type | Nullable | Default |\n|--|--|--|--|\n| Customer No_ | nvarchar | NO |  |\n| Code | nvarchar | NO |  |\n| Name | nvarchar | NO |  |\n| Name 2 | nvarchar | NO |  |\n| Address | nvarchar | NO |  |\n| Address 2 | nvarchar | NO |  |\n| City | nvarchar | NO |  |\n| Contact | nvarchar | NO |  |\n| Phone No_ | nvarchar | NO |  |\n| Telex No_ | nvarchar | NO |  |\n| Shipment Method Code | nvarchar | NO |  |\n| Shipping Agent Code | nvarchar | NO |  |\n| Place of Export | nvarchar | NO |  |\n| Country_Region Code | nvarchar | NO |  |\n| Last Date Modified | datetime | NO |  |\n| Location Code | nvarchar | NO |  |\n| Fax No_ | nvarchar | NO |  |\n| Telex Answer Back | nvarchar | NO |  |\n| Post Code | nvarchar | NO |  |\n| County | nvarchar | NO |  |\n| E-Mail | nvarchar | NO |  |\n| Home Page | nvarchar | NO |  |\n| Tax Area Code | nvarchar | NO |  |\n| Tax Liable | tinyint | NO |  |\n| Shipping Agent Service Code | nvarchar | NO |  |\n| Service Zone Code | nvarchar | NO |  |\n| Salesperson Code | nvarchar | NO |  |## dbo.vwFORCH_SottogruppoCliente (VIEW)| Column | Type | Nullable | Default |\n|--|--|--|--|\n| timestamp | timestamp | NO |  |\n| Code | nvarchar | NO |  |\n| Description | nvarchar | NO |  |\n| New | tinyint | NO |  |\n| Group Code | nvarchar | NO |  |\n| Cust_ Class Code | nvarchar | NO |  |## dbo.vwFORCH_Statisitiche_Vendita_Agenti (VIEW)| Column | Type | Nullable | Default |\n|--|--|--|--|\n| timestamp | timestamp | NO |  |\n| Salesperson Code | nvarchar | NO |  |\n| Anno | int | NO |  |\n| Mese | int | NO |  |\n| Trimestre | int | NO |  |\n| Periodo | nvarchar | NO |  |\n| Group Code | nvarchar | NO |  |\n| Area Code | nvarchar | NO |  |\n| Giorni Lavorativi | int | NO |  |\n| Giorni Lavorati | int | NO |  |\n| Budget | decimal | NO |  |\n| Clienti Con ordine nel mese | int | NO |  |\n| Clienti Attivi | int | NO |  |\n| Clienti Nuovi | int | NO |  |\n| Clienti Riattivati | int | NO |  |\n| Importo ordini | decimal | NO |  |\n| Ordini nel Periodo | int | NO |  |\n| Righe Ordini periodo | int | NO |  |\n| Nr Visite periodo | int | NO |  |\n\nID: 55\n├── Title: navision_schema_enriched.json\n└── Content:\n{\"360\": {\"metadata\": {\"sample_data\": {\"0\": {\"FIRR Over 2nd Band One Repr_ _\": \"1.00000000000000000000\", \"FIRR 1st Band Multi Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band Multi Repr_ _\": \"2.00000000000000000000\", \"FIRR Over 2nd Band MultiRepr _\": \"1.00000000000000000000\", \"Assistential Fund 1st Band\": \"0E-20\", \"Assistential Fund 2nd Band\": \"0E-20\", \"Assistential Fund 3rd Band\": \"0E-20\", \"Assistential Fund 1st Band _\": \"0E-20\", \"Assistential Fund 2nd Band _\": \"0E-20\", \"Assistential Fund 3rd Band _\": \"0E-20\", \"Assist_ Fund Over 3rd Band _\": \"0E-20\", \"Nr_ Posizione ENASARCO\": \"\", \"Nr_ Prot_ Interfaccia ENASARCO\": \"\", \"Ind_ Agenti Mesi Fascia 1\": \"0\", \"Ind_ Agenti Mesi Fascia 2\": \"0\", \"Ind_ Agenti Mesi Fascia 3\": \"0\", \"Indennità  _ Agenti Fascia 1\": \"0E-20\", \"Indennità _ Agenti Fascia 2\": \"0E-20\", \"Indennità _ Agenti Fascia 3\": \"0E-20\", \"Conto Debiti V_Enasarco\": \"3373753750\", \"Conto Costo Enasarco Az_\": \"8020012002\", \"Conto Debiti V_FIRR\": \"3373753760\", \"Conto Costo FIRR\": \"8020012003\"}}}}}{\"360\": {\"metadata\": {\"sample_data\": {\"0\": {\"Conto Debiti Ind_ Suppl_\": \"\", \"Conto Costo Ind_ Suppl_\": \"\", \"Max Range FISC\": \"0E-20\", \"Batch Template Name\": \"\", \"Batch Name\": \"\", \"Salesp_ Ass_ Fund 1st Band _\": \"0E-20\", \"Salesp_ Ass_ Fund 2nd Band _\": \"0E-20\", \"Salesp_ Ass_ Fund 3rd Band _\": \"0E-20\", \"Sal_ Ass_ Fund Over 3rd Band _\": \"0E-20\", \"FIRR Batch Template Name\": \"\", \"FIRR Batch Name\": \"\", \"Prev_ Fund _ - Company Ch mult\": \"3.00000000000000000000\", \"Prev_ Fund _ - Salesp_ Ch mult\": \"1.00000000000000000000\"}}}}}\n\nID: 74\n├── Title: navision_schema_enriched.json\n└── Content:\n{\"360\": {\"metadata\": {\"sample_data\": {\"1\": {\"timestamp\": \"<binary data>\", \"Primary Key\": \"\", \"Starting Date\": \"2017-01-01 00:00:00\", \"Prev_ Fund _\": \"15.65000000000000000000\", \"Prev_ Fund _ - Company Charged\": \"7.78000000000000000000\", \"Prev_ Fund _ - Salesp_ Charged\": \"7.78000000000000000000\", \"Prev_ Fund - Max Amount One\": \"37500.00000000000000000000\", \"Prev_ Fund - Max Amount Multi\": \"25000.00000000000000000000\", \"Prev_ Fund - Min Amount One\": \"836.00000000000000000000\", \"Prev_ Fund - Min Amount Multi\": \"418.00000000000000000000\", \"Prev-Min Amt Comp_ One-Assoc_\": \"0E-20\", \"Prev-Min Amt Company\": \"0E-20\", \"Assistential Fund _\": \"1.00000000000000000000\", \"FIRR 1st Band One Repr_\": \"12400.00000000000000000000\", \"FIRR 2nd Band One Repr_\": \"18600.00000000000000000000\", \"FIRR 1st Band Multi Repr_\": \"6200.00000000000000000000\", \"FIRR 2nd Band Multi Repr_\": \"9300.00000000000000000000\", \"FIRR 1st Band One Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band One Repr_ _\": \"2.00000000000000000000\"}}}}}{\"360\": {\"metadata\": {\"sample_data\": {\"1\": {\"FIRR Over 2nd Band One Repr_ _\": \"1.00000000000000000000\", \"FIRR 1st Band Multi Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band Multi Repr_ _\": \"2.00000000000000000000\", \"FIRR Over 2nd Band MultiRepr _\": \"1.00000000000000000000\", \"Assistential Fund 1st Band\": \"13000000.00000000000000000000\", \"Assistential Fund 2nd Band\": \"0E-20\", \"Assistential Fund 3rd Band\": \"0E-20\", \"Assistential Fund 1st Band _\": \"0E-20\", \"Assistential Fund 2nd Band _\": \"0E-20\", \"Assistential Fund 3rd Band _\": \"0E-20\", \"Assist_ Fund Over 3rd Band _\": \"0E-20\", \"Nr_ Posizione ENASARCO\": \"\", \"Nr_ Prot_ Interfaccia ENASARCO\": \"\", \"Ind_ Agenti Mesi Fascia 1\": \"0\", \"Ind_ Agenti Mesi Fascia 2\": \"0\", \"Ind_ Agenti Mesi Fascia 3\": \"0\", \"Indennità  _ Agenti Fascia 1\": \"0E-20\", \"Indennità _ Agenti Fascia 2\": \"0E-20\", \"Indennità _ Agenti Fascia 3\": \"0E-20\", \"Conto Debiti V_Enasarco\": \"3373753750\", \"Conto Costo Enasarco Az_\": \"8020012002\", \"Conto Debiti V_FIRR\": \"3373753760\"}}}}}\n\nID: 61\n├── Title: FORCH_NAVISION.md\n└── Content:\n<table>\n<thead>\n<tr>\n<th>Column</th>\n<th>Type</th>\n<th>Nullable</th>\n<th>Default</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>timestamp</td>\n<td>timestamp</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Primary Key</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Starting Date</td>\n<td>datetime</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund _ - Company Charged</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund _ - Salesp_ Charged</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund - Max Amount One</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund - Max Amount Multi</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund - Min Amount One</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund - Min Amount Multi</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev-Min Amt Comp_ One-Assoc_</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev-Min Amt Company</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assistential Fund _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 1st Band One Repr_</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 2nd Band One Repr_</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 1st Band Multi Repr_</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 2nd Band Multi Repr_</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 1st Band One Repr_ _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 2nd Band One Repr_ _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR Over 2nd Band One Repr_ _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 1st Band Multi Repr_ _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 2nd Band Multi Repr_ _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR Over 2nd Band MultiRepr _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assistential Fund 1st Band</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assistential Fund 2nd Band</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assistential Fund 3rd Band</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assistential Fund 1st Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assistential Fund 2nd Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assistential Fund 3rd Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assist_ Fund Over 3rd Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Nr_ Posizione ENASARCO</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Nr_ Prot_ Interfaccia ENASARCO</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Ind_ Agenti Mesi Fascia 1</td>\n<td>int</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Ind_ Agenti Mesi Fascia 2</td>\n<td>int</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Ind_ Agenti Mesi Fascia 3</td>\n<td>int</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Indennità  _ Agenti Fascia 1</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Indennità _ Agenti Fascia 2</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Indennità _ Agenti Fascia 3</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Conto Debiti V_Enasarco</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Conto Costo Enasarco Az_</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Conto Debiti V_FIRR</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Conto Costo FIRR</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Conto Debiti Ind_ Suppl_</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Conto Costo Ind_ Suppl_</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Max Range FISC</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Batch Template Name</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Batch Name</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Salesp_ Ass_ Fund 1st Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Salesp_ Ass_ Fund 2nd Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Salesp_ Ass_ Fund 3rd Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Sal_ Ass_ Fund Over 3rd Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR Batch Template Name</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR Batch Name</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund _ - Company Ch mult</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund _ - Salesp_ Ch mult</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n\nID: 57\n├── Title: navision_schema_enriched.json\n└── Content:\n{\"86\": {\"table\": \"FORCH$Area Agenti\", \"text\": \"Table: FORCH$Area Agenti\\nRow Count: 14\\nDescription: Records and transactions related to forch$area agenti.\\nColumns:\\n- timestamp (timestamp, NOT NULL)\\n- Codice Area (nvarchar(10), NOT NULL, Primary Key)\\n- Descrizione (nvarchar(30), NOT NULL)\\n\\nSample Data:\\nRow 1:\\n  timestamp: <binary data>\\n  Codice Area: 0\\n  Descrizione: \\nRow 2:\\n  timestamp: <binary data>\\n  Codice Area: 10\\n  Descrizione: \\nRow 3:\\n  timestamp: <binary data>\\n  Codice Area: 11\\n  Descrizione: Area Fornoni\"}}{\"86\": {\"metadata\": {\"primary_key\": {\"0\": \"Codice Area\"}, \"foreign_keys\": {}, \"row_count\": 14, \"columns\": {\"timestamp\": {\"data_type\": \"timestamp\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Codice Area\": {\"data_type\": \"nvarchar\", \"max_length\": 10, \"is_nullable\": \"NO\", \"default_value\": null}, \"Descrizione\": {\"data_type\": \"nvarchar\", \"max_length\": 30, \"is_nullable\": \"NO\", \"default_value\": null}}, \"sample_data\": {\"0\": {\"timestamp\": \"<binary data>\", \"Codice Area\": \"0\", \"Descrizione\": \"\"}, \"1\": {\"timestamp\": \"<binary data>\", \"Codice Area\": \"10\", \"Descrizione\": \"\"}, \"2\": {\"timestamp\": \"<binary data>\", \"Codice Area\": \"11\", \"Descrizione\": \"Area Fornoni\"}}}, \"description\": \"Records and transactions related to forch$area agenti.\"}}{\"87\": {\"table\": \"FORCH$Articoli - Accisa\", \"text\": \"Table: FORCH$Articoli - Accisa\\nRow Count: 197\\nDescription: Records and transactions related to forch$articoli - accisa.\\nColumns:\\n- timestamp (timestamp, NOT NULL)\\n- Item No_ (nvarchar(20), NOT NULL, Primary Key)\\n- Tipologia Accisa (nvarchar(10), NOT NULL, Primary Key)\\n- Descrizione (nvarchar(30), NOT NULL)\\n- Peso Articolo Unitario (gr) (decimal, NOT NULL)\\n- Peso Olio Minerale (gr) (decimal, NOT NULL)\\n- _Olio Minerale Unitario (decimal, NOT NULL)\\n\\nSample Data:\\nRow 1:\\n  timestamp: <binary data>\\n  Item No_: 548220001\\n  Tipologia Accisa: GAS COMB\\n  Descrizione: \\n  Peso Articolo Unitario (gr): 190.00000000000000000000\\n  Peso Olio Minerale (gr): 0E-20\\n  _Olio Minerale Unitario: 0E-20\\nRow 2:\\n  timestamp: <binary data>\\n  Item No_: 548260\\n  Tipologia Accisa: GAS COMB\\n  Descrizione: \\n  Peso Articolo Unitario (gr): 600.00000000000000000000\\n  Peso Olio Minerale (gr): 0E-20\\n  _Olio Minerale Unitario: 0E-20\\nRow 3:\\n  timestamp: <binary data>\\n  Item No_: 548263\\n  Tipologia Accisa: GAS COMB\\n  Descrizione: \\n  Peso Articolo Unitario (gr): 600.00000000000000000000\\n  Peso Olio Minerale (gr): 0E-20\\n  _Olio Minerale Unitario: 0E-20\"}}"
                            }
                        },
                        "query": "sys.query",
                        "rerank_id": "",
                        "similarity_threshold": 0.2,
                        "top_k": 1024,
                        "top_n": 8,
                        "use_kg": false
                    }
                },
                "upstream": [
                    "begin"
                ]
            },
            "Retrieval:SmartNewsHammer": {
                "downstream": [
                    "Agent:WickedGoatsDivide"
                ],
                "obj": {
                    "component_name": "Retrieval",
                    "params": {
                        "cross_languages": [],
                        "debug_inputs": [],
                        "delay_after_error": 2.0,
                        "description": "This tool can be utilized for relevant content searching in the datasets.",
                        "empty_response": "",
                        "exception_default_value": null,
                        "exception_goto": null,
                        "exception_method": null,
                        "function_name": "search_my_dateset",
                        "inputs": {
                            "query": {
                                "default": "",
                                "description": "The keywords to search the dataset. The keywords should be the most important words/terms(includes synonyms) from the original request.",
                                "required": true,
                                "type": "string",
                                "value": "Quanti agenti attivi ci sono al momento?"
                            }
                        },
                        "kb_ids": [
                            "0f968106727311f08357bafe6e7908e6",
                            "50bc853487d311f08786de8075d81b0a"
                        ],
                        "kb_vars": [],
                        "keywords_similarity_weight": 0.7,
                        "max_retries": 0,
                        "message_history_window_size": 13,
                        "meta": {
                            "description": "This tool can be utilized for relevant content searching in the datasets.",
                            "name": "search_my_dateset",
                            "parameters": {
                                "query": {
                                    "default": "",
                                    "description": "The keywords to search the dataset. The keywords should be the most important words/terms(includes synonyms) from the original request.",
                                    "required": true,
                                    "type": "string"
                                }
                            }
                        },
                        "outputs": {
                            "_created_time": {
                                "type": "<class 'float'>",
                                "value": 103618.530943577
                            },
                            "_elapsed_time": {
                                "type": "<class 'float'>",
                                "value": 1.2293232520023594
                            },
                            "formalized_content": {
                                "type": "string",
                                "value": "\nID: 29\n├── Title: italian_query_examples.md\n└── Content:\n**Note importanti**:\r- La query mostra i primi 10 agenti per numero di note di credito\r\n- Include sia il numero di note di credito che l'importo totale\r\n- I risultati sono ordinati per numero di note di credito in ordine decrescente\r\n- Il periodo di riferimento è il mese precedente\r\n- Il JOIN con la tabella Salesperson è necessario per ottenere i nomi degli agenti\r\n\r### \"Chi ha fatto la vendita più grande a gennaio?\"\r**SQL**:\r```sql\r\nSELECT TOP 1\r\n    sp.[No_] AS CodiceAgente,\r\n    sp.[Name] AS NomeAgente,\r\n    SUM(sl.[Line Amount]) AS ImportoTotaleVendite,\r\n    COUNT(DISTINCT sh.[No_]) AS NumeroOrdini\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Salesperson] sp\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh \r\n        ON sp.[No_] = sh.[Salesperson Code]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Line] sl \r\n        ON sh.[No_] = sl.[Document No_] \r\n        AND sh.[Document Type] = sl.[Document Type]\r\nWHERE \r\n    MONTH(sh.[Posting Date]) = 1  -- Gennaio\r\n    AND YEAR(sh.[Posting Date]) = YEAR(GETDATE())  -- Anno corrente\r\n    AND sh.[Document Type] = 1  -- 1 = Order\r\nGROUP BY \r\n    sp.[No_], sp.[Name]\r\nORDER BY \r\n    ImportoTotaleVendite DESC;\r\n```\r**Note importanti**:\r- La query mostra l'agente con l'importo totale di vendite più alto\r\n- Include sia l'importo totale che il numero di ordini\r\n- Considera solo gli ordini (Document Type = 1)\r\n- Il periodo di riferimento è gennaio dell'anno corrente\r\n- I risultati sono ordinati per importo totale in ordine decrescente\r\n\r### \"Negli ultimi 5 anni, quanti agenti sono entrati e quanti sono usciti dalla forza vendita?\"\r**SQL**:\r```sql\r\nWITH AgentChanges AS (\r\n    SELECT \r\n        [No_] AS CodiceAgente,\r\n        [Name] AS NomeAgente,\r\n        [Data Inizio Mandato] AS DataInizio,\r\n        [Data Fine Mandato] AS DataFine\r\n    FROM \r\n        [FORCH_NAVISION].[dbo].[FORCH$Salesperson]\r\n    WHERE \r\n        [Data Inizio Mandato] >= DATEADD(YEAR, -5, GETDATE())  -- Entrati negli ultimi 5 anni\r\n        OR [Data Fine Mandato] >= DATEADD(YEAR, -5, GETDATE())  -- Usciti negli ultimi 5 anni\r\n)\r\nSELECT \r\n    COUNT(CASE WHEN DataInizio >= DATEADD(YEAR, -5, GETDATE()) THEN 1 END) AS AgentiEntrati,\r\n    COUNT(CASE WHEN DataFine >= DATEADD(YEAR, -5, GETDATE()) THEN 1 END) AS AgentiUsciti,\r\n    COUNT(*) AS TotaleAgenti\r\nFROM \r\n    AgentChanges;\r\n```\r\n\nID: 88\n├── Title: italian_query_examples.md\n└── Content:\n**Note importanti**:\r- Quando un utente chiede informazioni sugli \"Agenti\", si riferisce ai \"Salesperson\" nel database\r\n- Utilizzare l'alias \"sp\" per la tabella Salesperson\r\n- Collegare Salesperson a Sales Header tramite il campo \"Salesperson Code\"\r\n\r### \"Quanti viti dell'AGR 1011 sono state vendute il 24 febbraio e da chi?\"\r**SQL**:\r```sql\r\nSELECT \r\n    sp.[No_] AS CodiceAgente,\r\n    sp.[Name] AS NomeAgente,\r\n    SUM(sl.[Quantity]) AS QuantitàVenduta,\r\n    SUM(sl.[Line Amount]) AS ImportoTotale\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Line] sl\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh \r\n        ON sl.[Document No_] = sh.[No_] \r\n        AND sl.[Document Type] = sh.[Document Type]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Item] i \r\n        ON sl.[No_] = i.[No_]\r\nJOIN\r\n    [FORCH_NAVISION].[dbo].[FORCH$Salesperson] sp\r\n        ON sh.[Salesperson Code] = sp.[No_]\r\nWHERE \r\n    LEFT(i.[No_], 4) = '1011'  -- AGR code per viti specifiche\r\n    AND sh.[Posting Date] = '2025-02-24'\r\nGROUP BY \r\n    sp.[No_], sp.[Name]\r\nORDER BY \r\n    QuantitàVenduta DESC;\r\n```\r**Note importanti**:\r- La query mostra sia il codice che il nome dell'agente per una migliore identificazione\r\n- Include anche l'importo totale delle vendite per ogni agente\r\n- I risultati sono ordinati per quantità venduta in ordine decrescente\r\n- Il JOIN con la tabella Salesperson è necessario per ottenere il nome dell'agente\r\n\r### \"Chi sono gli agenti che hanno avuto più note di credito il mese scorso?\"\r**SQL**:\r```sql\r\nSELECT TOP 10\r\n    sp.[No_] AS CodiceAgente,\r\n    sp.[Name] AS NomeAgente,\r\n    COUNT(DISTINCT scmh.[No_]) AS NumeroNoteCredito,\r\n    SUM(scml.[Line Amount]) AS ImportoTotaleNoteCredito\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Salesperson] sp\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Cr_Memo Header] scmh \r\n        ON sp.[No_] = scmh.[Salesperson Code]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Cr_Memo Line] scml \r\n        ON scmh.[No_] = scml.[Document No_]\r\nWHERE \r\n    scmh.[Posting Date] >= DATEADD(MONTH, -1, GETDATE())\r\nGROUP BY \r\n    sp.[No_], sp.[Name]\r\nORDER BY \r\n    NumeroNoteCredito DESC;\r\n```\r\n\nID: 72\n├── Title: italian_query_examples.md\n└── Content:\n# Esempi di Query SQL in Italiano\rQuesto documento fornisce esempi di come tradurre domande in italiano in query SQL per il database Navision, con particolare attenzione ai problemi di mappatura delle categorie di prodotti.\r## Importante: Traduzione di Termini Comuni\r- **\"Agenti\"** si riferisce ai venditori o rappresentanti commerciali (tabella \"Salesperson\" in inglese)\r\n- **\"Cliente Attivo\"** si riferisce a un cliente che ha effettuato almeno un ordine in un determinato periodo di tempo\r\n- **\"Settore\"** può riferirsi a due concetti distinti:\r\n  - Per i clienti: si riferisce al codice ATECO (campo `Ateco Group Code` della tabella Customer)\r\n  - Per gli agenti: si riferisce al campo `ADM Description` della tabella Salesperson\r\n\r## Query di Vendita\r### \"Quanti trapani sono stati venduti il mese scorso?\"\r**Mappatura Vector DB**: \"trapano\" → Item Category Code '53'\r\n\r\n**SQL**:\r```sql\r\n-- Query per contare quanti trapani sono stati venduti il mese scorso\r\nSELECT \r\n    SUM(sl.[Quantity]) AS TotalTrapanitVenduti\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Line] sl\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh \r\n        ON sl.[Document No_] = sh.[No_] \r\n        AND sl.[Document Type] = sh.[Document Type]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Item] i \r\n        ON sl.[No_] = i.[No_]\r\nWHERE \r\n    i.[Item Category Code] = '53'  -- Codice categoria come testo con apici\r\n    AND sh.[Posting Date] >= DATEADD(MONTH, -1, GETDATE());\r\n```\r**Punto importante**: Il codice della categoria articolo (`Item Category Code`) deve essere trattato come testo ('53') e non come numero (53).\r### \"Quali sono i trapani più venduti?\"\r**Mappatura Vector DB**: \"trapano\" → Item Category Code '53'\r\n\r\n**SQL**:\r```sql\r\n-- Query per trovare i trapani più venduti\r\nSELECT TOP 10\r\n    i.[No_], \r\n    i.[Description],\r\n    SUM(sl.[Quantity]) AS QuantitàVenduta\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Line] sl\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh \r\n        ON sl.[Document No_] = sh.[No_] \r\n        AND sl.[Document Type] = sh.[Document Type]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Item] i \r\n        ON sl.[No_] = i.[No_]\r\nWHERE \r\n    i.[Item Category Code] = '53'  -- Codice categoria come testo con apici\r\n    AND sh.[Posting Date] >= DATEADD(MONTH, -6, GETDATE())\r\nGROUP BY \r\n    i.[No_], i.[Description]\r\nORDER BY \r\n    QuantitàVenduta DESC;\r\n```\r\n\nID: 38\n├── Title: italian_query_examples.md\n└── Content:\n### \"Qual è la media dei clienti attivi per ogni agente nel 2024?\"\r**SQL**:\r```sql\r\nWITH ActiveClients AS (\r\n    SELECT \r\n        COUNT(DISTINCT sh.[Sell-to Customer No_]) AS TotalActiveClients\r\n    FROM \r\n        [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh\r\n    WHERE \r\n        sh.[Document Type] = 1  -- Only orders\r\n        AND YEAR(sh.[Posting Date]) = 2024\r\n),\r\nActiveSalespeople AS (\r\n    SELECT \r\n        COUNT(DISTINCT sh.[Salesperson Code]) AS TotalActiveSalespeople\r\n    FROM \r\n        [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh\r\n    WHERE \r\n        sh.[Document Type] = 1  -- Only orders\r\n        AND YEAR(sh.[Posting Date]) = 2024\r\n        AND sh.[Salesperson Code] <> ''  -- Exclude empty salesperson codes\r\n)\r\nSELECT \r\n    FORMAT(CAST(ac.TotalActiveClients AS FLOAT) / asp.TotalActiveSalespeople, 'N2') AS MediaClientiAttiviPerAgente,\r\n    ac.TotalActiveClients AS TotaleClientiAttivi,\r\n    asp.TotalActiveSalespeople AS NumeroAgentiAttivi\r\nFROM \r\n    ActiveClients ac\r\nCROSS JOIN \r\n    ActiveSalespeople asp;\r\n```\r**Note importanti**:\r- La query calcola la media di clienti attivi per agente nel 2024\r\n- Un cliente è considerato attivo se ha effettuato almeno un ordine nel 2024\r\n- Un agente è considerato attivo se ha effettuato almeno una vendita nel 2024\r\n- Il calcolo viene fatto dividendo il numero totale di clienti attivi per il numero di agenti attivi\r\n- La query mostra:\r\n  - Media di clienti attivi per agente (arrotondata a 2 decimali)\r\n  - Numero totale di clienti attivi nel 2024\r\n  - Numero di agenti che hanno effettuato vendite nel 2024\r\n- Considera solo gli ordini effettivi (Document Type = 1)\r\n- La data di riferimento è la data di registrazione (Posting Date) dell'ordine\r\n- Il risultato rappresenta il numero medio di clienti attivi che ogni agente attivo gestisce\n\nID: 66\n├── Title: italian_query_examples.md\n└── Content:\n**Note importanti**:\r- Utilizzare i campi `[Data Inizio Mandato]` e `[Data Fine Mandato]` della tabella Salesperson\r\n- La query considera gli ultimi 5 anni dalla data corrente\r\n- Un agente può essere sia entrato che uscito negli ultimi 5 anni\r\n- Il totale degli agenti include tutti quelli che hanno avuto cambiamenti negli ultimi 5 anni\r\n- La query mostra:\r\n  - Numero di agenti entrati negli ultimi 5 anni\r\n  - Numero di agenti usciti negli ultimi 5 anni\r\n  - Totale degli agenti con cambiamenti negli ultimi 5 anni\r\n\r## Query relative al DB (Margine di Profitto)\r### \"Quanto è il DB medio per gli articoli 8017?\"\r**SQL**:\r```sql\r\nSELECT \r\n    i.[No_],\r\n    i.[Description],\r\n    AVG(sl.[Line Amount] - (sl.[Unit Cost] * sl.[Quantity])) AS DBMedio,\r\n    AVG((sl.[Line Amount] - (sl.[Unit Cost] * sl.[Quantity])) / NULLIF(sl.[Line Amount], 0) * 100) AS DBPercentuale\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Item] i\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Line] sl ON i.[No_] = sl.[No_]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh \r\n        ON sl.[Document No_] = sh.[No_] \r\n        AND sl.[Document Type] = sh.[Document Type]\r\nWHERE \r\n    LEFT(i.[No_], 4) = '8017'  -- AGR code per articoli specifici\r\n    AND sh.[Posting Date] >= DATEADD(MONTH, -12, GETDATE())  -- Ultimi 12 mesi\r\nGROUP BY \r\n    i.[No_], i.[Description]\r\nORDER BY \r\n    DBMedio DESC;\r\n```\r**Note importanti**:\r- DB (Deckungsbeitrag) si riferisce al margine di profitto\r\n- Il DB si calcola come differenza tra il prezzo di vendita (`Line Amount`) e il costo totale (`Unit Cost * Quantity`)\r\n- La percentuale di DB si calcola come (DB / Prezzo di vendita) * 100\r\n- NULLIF viene utilizzato per evitare divisioni per zero\r\n- La query mostra:\r\n  - Codice e descrizione dell'articolo\r\n  - DB medio in valore assoluto\r\n  - DB medio in percentuale\r\n- I risultati sono ordinati per DB medio in ordine decrescente\r\n- Il periodo di riferimento è l'ultimo anno per avere dati significativi\r\n\r\n\nID: 38\n├── Title: italian_query_examples.md\n└── Content:\n### \"Quale cliente ha acquistato più trapani?\"\r**Mappatura Vector DB**: \"trapano\" → Item Category Code '53'\r\n\r\n**SQL**:\r```sql\r\n-- Query per trovare il cliente che ha acquistato più trapani\r\nSELECT TOP 1\r\n    c.[No_],\r\n    c.[Name],\r\n    SUM(sl.[Quantity]) AS QuantitàTrapaniAcquistati\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Customer] c\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh \r\n        ON c.[No_] = sh.[Sell-to Customer No_]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Line] sl \r\n        ON sh.[No_] = sl.[Document No_] \r\n        AND sh.[Document Type] = sl.[Document Type]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Item] i \r\n        ON sl.[No_] = i.[No_]\r\nWHERE \r\n    i.[Item Category Code] = '53'  -- Codice categoria come testo con apici\r\n    AND sh.[Posting Date] >= DATEADD(MONTH, -12, GETDATE())\r\nGROUP BY \r\n    c.[No_], c.[Name]\r\nORDER BY \r\n    QuantitàTrapaniAcquistati DESC;\r\n```\r## Query relative agli Agenti (Salespersons)\r### \"Quali sono le vendite per agente nell'ultimo trimestre?\"\r**SQL**:\r```sql\r\n-- Query per mostrare le vendite totali per agente\r\nSELECT \r\n    sp.[No_], \r\n    sp.[Name] AS NomeAgente,\r\n    SUM(sl.[Quantity]) AS QuantitàVenduta,\r\n    SUM(sl.[Line Amount]) AS ImportoTotale\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Salesperson] sp\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh ON sp.[No_] = sh.[Salesperson Code]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Line] sl \r\n        ON sh.[No_] = sl.[Document No_] \r\n        AND sh.[Document Type] = sh.[Document Type]\r\nWHERE \r\n    sh.[Posting Date] >= DATEADD(MONTH, -3, GETDATE())\r\nGROUP BY \r\n    sp.[No_], sp.[Name]\r\nORDER BY \r\n    ImportoTotale DESC;\r\n```\r\n\nID: 85\n├── Title: italian_query_examples.md\n└── Content:\n**Note importanti**:\r- La query calcola la media giornaliera di ordini per ogni agente nel 2024\r\n- Utilizza una subquery per prima calcolare il valore totale degli ordini per ogni giorno e agente\r\n- Considera solo gli ordini effettivi (Document Type = 1)\r\n- Il valore dell'ordine è la somma di tutti i Line Amount per quel giorno\r\n- La data di riferimento è la data di registrazione (Posting Date) dell'ordine\r\n- FORMAT('N2') viene utilizzato per arrotondare i risultati a 2 decimali\r\n- Il simbolo € viene aggiunto ai valori monetari\r\n- La query mostra:\r\n  - Codice e nome dell'agente\r\n  - Media giornaliera di ordini\r\n  - Numero di giorni con ordini\r\n  - Valore totale degli ordini\r\n- I risultati sono ordinati per media giornaliera in ordine decrescente\r\n\r### \"Quanti ordini trasmette in media al giorno un venditore?\"\r**SQL**:\r```sql\r\nSELECT \r\n    FORMAT(AVG(DailyOrdersPerSalesperson), 'N2') AS MediaOrdiniGiornalieriPerVenditore\r\nFROM (\r\n    SELECT \r\n        sh.[Salesperson Code],\r\n        CAST(sh.[Posting Date] AS DATE) AS OrderDate,\r\n        COUNT(DISTINCT sh.[No_]) AS DailyOrdersPerSalesperson\r\n    FROM \r\n        [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh\r\n    WHERE \r\n        sh.[Document Type] = 1  -- Only orders\r\n        AND sh.[Posting Date] >= DATEADD(MONTH, -12, GETDATE())  -- Ultimi 12 mesi\r\n    GROUP BY \r\n        sh.[Salesperson Code],\r\n        CAST(sh.[Posting Date] AS DATE)\r\n) AS DailyOrdersPerSalesperson;\r\n```\r**Note importanti**:\r- La query calcola la media di ordini giornalieri per venditore\r\n- Utilizza una subquery per prima calcolare il numero di ordini per ogni venditore per ogni giorno\r\n- Considera solo gli ordini effettivi (Document Type = 1)\r\n- La data di riferimento è la data di registrazione (Posting Date) dell'ordine\r\n- FORMAT('N2') viene utilizzato per arrotondare la media a 2 decimali\r\n- Il periodo di riferimento è l'ultimo anno per avere dati significativi\r\n- Il risultato rappresenta il numero medio di ordini che un venditore tipicamente processa in un giorno\r\n\r\n\nID: 93\n├── Title: italian_query_examples.md\n└── Content:\n## Query di Inventario\r### \"Quanti trapani abbiamo in magazzino?\"\r**Mappatura Vector DB**: \"trapano\" → Item Category Code '53'\r\n\r\n**SQL**:\r```sql\r\n-- Query per contare quanti trapani sono disponibili in magazzino\r\nSELECT \r\n    COUNT(*) AS NumeroTrapani\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Item] i\r\nWHERE \r\n    i.[Item Category Code] = '53'  -- Codice categoria come testo con apici\r\n    AND i.[Blocked] = 0;\r\n```\r### \"Quanti set di cacciaviti abbiamo in vendita?\"\r**Mappatura Vector DB**: \"cacciaviti\" → Item Category Code '42'\r\n\r\n**SQL**:\r```sql\r\n-- Query per trovare i set di cacciaviti disponibili\r\nSELECT \r\n    i.[No_], \r\n    i.[Description],\r\n    i.[Unit Price]\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Item] i\r\nWHERE \r\n    i.[Item Category Code] = '42'  -- Codice categoria per cacciaviti\r\n    AND (\r\n        UPPER(i.[Description]) LIKE '%SET%' \r\n        OR UPPER(i.[Description]) LIKE '%KIT%'\r\n    )\r\n    AND i.[Blocked] = 0\r\nORDER BY \r\n    i.[Description];\r\n```\r**Note importanti**:\r- La query cerca sia \"SET\" che \"KIT\" nella descrizione del prodotto\r\n- UPPER() viene utilizzato per gestire le variazioni di maiuscole/minuscole\r\n- Vengono mostrati solo gli articoli non bloccati\r\n- I risultati sono ordinati per descrizione per una migliore leggibilità\r\n\r### \"Quali viti sono quasi esaurite?\"\r**Mappatura Vector DB**: \"viti\" → AGG code '1'\r\n\r\n**SQL**:\r```sql\r\n-- Query per trovare le viti\r\nSELECT \r\n    i.[No_], \r\n    i.[Description],\r\n    i.[Reorder Point]\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Item] i\r\nWHERE \r\n    LEFT(i.[No_], 1) = '1'  -- AGG code per viti\r\n    AND i.[Blocked] = 0\r\nORDER BY \r\n    i.[Reorder Point] DESC;\r\n```\r## Query di Analisi Cliente\r"
                            }
                        },
                        "query": "sys.query",
                        "rerank_id": "",
                        "similarity_threshold": 0.2,
                        "top_k": 1024,
                        "top_n": 8,
                        "use_kg": false
                    }
                },
                "upstream": [
                    "begin"
                ]
            },
            "Retrieval:SweetDancersAppear": {
                "downstream": [
                    "Agent:WickedGoatsDivide"
                ],
                "obj": {
                    "component_name": "Retrieval",
                    "params": {
                        "cross_languages": [],
                        "debug_inputs": [],
                        "delay_after_error": 2.0,
                        "description": "This tool can be utilized for relevant content searching in the datasets.",
                        "empty_response": "",
                        "exception_default_value": null,
                        "exception_goto": null,
                        "exception_method": null,
                        "function_name": "search_my_dateset",
                        "inputs": {
                            "query": {
                                "default": "",
                                "description": "The keywords to search the dataset. The keywords should be the most important words/terms(includes synonyms) from the original request.",
                                "required": true,
                                "type": "string",
                                "value": "Quanti agenti attivi ci sono al momento?"
                            }
                        },
                        "kb_ids": [
                            "4ad1f9d0727311f0827dbafe6e7908e6",
                            "50bf820c87d311f0b8a6de8075d81b0a"
                        ],
                        "kb_vars": [],
                        "keywords_similarity_weight": 0.7,
                        "max_retries": 0,
                        "message_history_window_size": 13,
                        "meta": {
                            "description": "This tool can be utilized for relevant content searching in the datasets.",
                            "name": "search_my_dateset",
                            "parameters": {
                                "query": {
                                    "default": "",
                                    "description": "The keywords to search the dataset. The keywords should be the most important words/terms(includes synonyms) from the original request.",
                                    "required": true,
                                    "type": "string"
                                }
                            }
                        },
                        "outputs": {
                            "_created_time": {
                                "type": "<class 'float'>",
                                "value": 103618.532261183
                            },
                            "_elapsed_time": {
                                "type": "<class 'float'>",
                                "value": 1.2328808710008161
                            },
                            "formalized_content": {
                                "type": "string",
                                "value": "\nID: 72\n├── Title: navision_schema_docs.json\n└── Content:\n{\"360\": {\"metadata\": {\"sample_data\": {\"0\": {\"timestamp\": \"<binary data>\", \"Primary Key\": \"\", \"Starting Date\": \"2016-01-01 00:00:00\", \"Prev_ Fund _\": \"15.10000000000000000000\", \"Prev_ Fund _ - Company Charged\": \"7.55000000000000000000\", \"Prev_ Fund _ - Salesp_ Charged\": \"7.55000000000000000000\", \"Prev_ Fund - Max Amount One\": \"37500.00000000000000000000\", \"Prev_ Fund - Max Amount Multi\": \"25000.00000000000000000000\", \"Prev_ Fund - Min Amount One\": \"836.00000000000000000000\", \"Prev_ Fund - Min Amount Multi\": \"418.00000000000000000000\", \"Prev-Min Amt Comp_ One-Assoc_\": \"0E-20\", \"Prev-Min Amt Company\": \"0E-20\", \"Assistential Fund _\": \"1.00000000000000000000\", \"FIRR 1st Band One Repr_\": \"12400.00000000000000000000\", \"FIRR 2nd Band One Repr_\": \"18600.00000000000000000000\", \"FIRR 1st Band Multi Repr_\": \"6200.00000000000000000000\", \"FIRR 2nd Band Multi Repr_\": \"9300.00000000000000000000\", \"FIRR 1st Band One Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band One Repr_ _\": \"2.00000000000000000000\"}}}}}{\"360\": {\"metadata\": {\"sample_data\": {\"0\": {\"FIRR Over 2nd Band One Repr_ _\": \"1.00000000000000000000\", \"FIRR 1st Band Multi Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band Multi Repr_ _\": \"2.00000000000000000000\", \"FIRR Over 2nd Band MultiRepr _\": \"1.00000000000000000000\", \"Assistential Fund 1st Band\": \"0E-20\", \"Assistential Fund 2nd Band\": \"0E-20\", \"Assistential Fund 3rd Band\": \"0E-20\", \"Assistential Fund 1st Band _\": \"0E-20\", \"Assistential Fund 2nd Band _\": \"0E-20\", \"Assistential Fund 3rd Band _\": \"0E-20\", \"Assist_ Fund Over 3rd Band _\": \"0E-20\", \"Nr_ Posizione ENASARCO\": \"\", \"Nr_ Prot_ Interfaccia ENASARCO\": \"\", \"Ind_ Agenti Mesi Fascia 1\": \"0\", \"Ind_ Agenti Mesi Fascia 2\": \"0\", \"Ind_ Agenti Mesi Fascia 3\": \"0\", \"Indennità  _ Agenti Fascia 1\": \"0E-20\", \"Indennità _ Agenti Fascia 2\": \"0E-20\", \"Indennità _ Agenti Fascia 3\": \"0E-20\", \"Conto Debiti V_Enasarco\": \"3373753750\", \"Conto Costo Enasarco Az_\": \"8020012002\", \"Conto Debiti V_FIRR\": \"3373753760\", \"Conto Costo FIRR\": \"8020012003\"}}}}}\n\nID: 6\n├── Title: navision_schema_docs.json\n└── Content:\n{\"360\": {\"metadata\": {\"sample_data\": {\"1\": {\"FIRR Over 2nd Band One Repr_ _\": \"1.00000000000000000000\", \"FIRR 1st Band Multi Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band Multi Repr_ _\": \"2.00000000000000000000\", \"FIRR Over 2nd Band MultiRepr _\": \"1.00000000000000000000\", \"Assistential Fund 1st Band\": \"13000000.00000000000000000000\", \"Assistential Fund 2nd Band\": \"0E-20\", \"Assistential Fund 3rd Band\": \"0E-20\", \"Assistential Fund 1st Band _\": \"0E-20\", \"Assistential Fund 2nd Band _\": \"0E-20\", \"Assistential Fund 3rd Band _\": \"0E-20\", \"Assist_ Fund Over 3rd Band _\": \"0E-20\", \"Nr_ Posizione ENASARCO\": \"\", \"Nr_ Prot_ Interfaccia ENASARCO\": \"\", \"Ind_ Agenti Mesi Fascia 1\": \"0\", \"Ind_ Agenti Mesi Fascia 2\": \"0\", \"Ind_ Agenti Mesi Fascia 3\": \"0\", \"Indennità  _ Agenti Fascia 1\": \"0E-20\", \"Indennità _ Agenti Fascia 2\": \"0E-20\", \"Indennità _ Agenti Fascia 3\": \"0E-20\", \"Conto Debiti V_Enasarco\": \"3373753750\", \"Conto Costo Enasarco Az_\": \"8020012002\", \"Conto Debiti V_FIRR\": \"3373753760\"}}}}}{\"360\": {\"metadata\": {\"sample_data\": {\"1\": {\"Conto Costo FIRR\": \"8020012003\", \"Conto Debiti Ind_ Suppl_\": \"\", \"Conto Costo Ind_ Suppl_\": \"\", \"Max Range FISC\": \"0E-20\", \"Batch Template Name\": \"\", \"Batch Name\": \"\", \"Salesp_ Ass_ Fund 1st Band _\": \"0E-20\", \"Salesp_ Ass_ Fund 2nd Band _\": \"0E-20\", \"Salesp_ Ass_ Fund 3rd Band _\": \"0E-20\", \"Sal_ Ass_ Fund Over 3rd Band _\": \"0E-20\", \"FIRR Batch Template Name\": \"\", \"FIRR Batch Name\": \"\", \"Prev_ Fund _ - Company Ch mult\": \"3.00000000000000000000\", \"Prev_ Fund _ - Salesp_ Ch mult\": \"1.00000000000000000000\"}}}}}\n\nID: 1\n├── Title: navision_schema_docs.json\n└── Content:\n{\"360\": {\"metadata\": {\"sample_data\": {\"2\": {\"timestamp\": \"<binary data>\", \"Primary Key\": \"\", \"Starting Date\": \"2018-01-01 00:00:00\", \"Prev_ Fund _\": \"16.00000000000000000000\", \"Prev_ Fund _ - Company Charged\": \"8.00000000000000000000\", \"Prev_ Fund _ - Salesp_ Charged\": \"8.00000000000000000000\", \"Prev_ Fund - Max Amount One\": \"37913.00000000000000000000\", \"Prev_ Fund - Max Amount Multi\": \"25275.00000000000000000000\", \"Prev_ Fund - Min Amount One\": \"846.00000000000000000000\", \"Prev_ Fund - Min Amount Multi\": \"423.00000000000000000000\", \"Prev-Min Amt Comp_ One-Assoc_\": \"0E-20\", \"Prev-Min Amt Company\": \"0E-20\", \"Assistential Fund _\": \"1.00000000000000000000\", \"FIRR 1st Band One Repr_\": \"12400.00000000000000000000\", \"FIRR 2nd Band One Repr_\": \"18600.00000000000000000000\", \"FIRR 1st Band Multi Repr_\": \"6200.00000000000000000000\", \"FIRR 2nd Band Multi Repr_\": \"9300.00000000000000000000\", \"FIRR 1st Band One Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band One Repr_ _\": \"2.00000000000000000000\"}}}}}{\"360\": {\"metadata\": {\"sample_data\": {\"2\": {\"FIRR Over 2nd Band One Repr_ _\": \"1.00000000000000000000\", \"FIRR 1st Band Multi Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band Multi Repr_ _\": \"2.00000000000000000000\", \"FIRR Over 2nd Band MultiRepr _\": \"1.00000000000000000000\", \"Assistential Fund 1st Band\": \"13000000.00000000000000000000\", \"Assistential Fund 2nd Band\": \"0E-20\", \"Assistential Fund 3rd Band\": \"0E-20\", \"Assistential Fund 1st Band _\": \"0E-20\", \"Assistential Fund 2nd Band _\": \"0E-20\", \"Assistential Fund 3rd Band _\": \"0E-20\", \"Assist_ Fund Over 3rd Band _\": \"0E-20\", \"Nr_ Posizione ENASARCO\": \"\", \"Nr_ Prot_ Interfaccia ENASARCO\": \"\", \"Ind_ Agenti Mesi Fascia 1\": \"0\", \"Ind_ Agenti Mesi Fascia 2\": \"0\", \"Ind_ Agenti Mesi Fascia 3\": \"0\", \"Indennità  _ Agenti Fascia 1\": \"0E-20\", \"Indennità _ Agenti Fascia 2\": \"0E-20\", \"Indennità _ Agenti Fascia 3\": \"0E-20\", \"Conto Debiti V_Enasarco\": \"3373753750\", \"Conto Costo Enasarco Az_\": \"8020012002\", \"Conto Debiti V_FIRR\": \"3373753760\"}}}}}\n\nID: 59\n├── Title: database_structure.md\n└── Content:\n<table>\n<thead>\n<tr>\n<th>Table Name</th>\n<th>Description</th>\n<th>Key Fields</th>\n<th>Usage</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>FORCH$Sales Header</td>\n<td>Header information for sales documents</td>\n<td>No_, Document Type, Posting Date, Sell-to Customer No_</td>\n<td>Contains customer reference and posting date</td>\n</tr>\n<tr>\n<td>FORCH$Sales Line</td>\n<td>Line items for sales documents</td>\n<td>Document No_, Document Type, Line No_, No_, Quantity, Line Amount</td>\n<td>Contains the products sold and quantities</td>\n</tr>\n<tr>\n<td>FORCH$Customer</td>\n<td>Customer master data</td>\n<td>No_, Name, Address</td>\n<td>Contains customer details</td>\n</tr>\n<tr>\n<td>FORCH$Salesperson</td>\n<td>Salesperson data (referred to as \"Agenti\" in Italian)</td>\n<td>No_, Name</td>\n<td>Tracks sales representatives information</td>\n</tr>\n</tbody>\n</table>\n\nID: 76\n├── Title: navision_schema_docs.json\n└── Content:\n{\"1500\": {\"metadata\": {\"sample_data\": {\"1\": {\"timestamp\": \"<binary data>\", \"Salesperson Code\": \"51\", \"Nr Riga\": \"2\", \"Anno\": \"2025\", \"Mese\": \"2\", \"Trimestre\": \"1\", \"Periodo\": \"2025/02\", \"Group Code\": \"\", \"Area Code\": \"\", \"Giorni Lavorativi\": \"0\", \"Giorni Lavorati\": \"0\", \"Budget\": \"0E-20\", \"Sales Amount\": \"0E-20\", \"Cost Amount\": \"0E-20\", \"Clienti Con ordine nel mese\": \"0\", \"Clienti Attivi\": \"0\", \"Clienti Nuovi\": \"0\", \"Clienti Riattivati\": \"0\", \"Importo ordini\": \"0E-20\", \"Ordini nel Periodo\": \"0\", \"Righe Ordini periodo\": \"0\", \"Nr Visite periodo\": \"0\", \"GA_\": \"0E-20\", \"EVOL_\": \"-100.00000000000000000000\", \"CM_\": \"0E-20\", \"CM EUR\": \"0E-20\", \"EVOLCM_\": \"-100.00000000000000000000\", \"FattLastYear\": \"75400.08000000000000000000\", \"LastYearCM_\": \"54.13000000000000000000\", \"Last Year CM EUR\": \"40814.12000000000000000000\", \"OADAY\": \"0E-20\", \"OP_O\": \"0E-20\", \"OP_AV_VALUE\": \"0E-20\", \"O_AV_VALUE\": \"0E-20\", \"AV_VISIT\": \"0E-20\", \"AV_Order_VISIT\": \"0E-20\", \"CostLastYear\": \"-34585.96000000000000000000\", \"Counter\": \"0\"}}}}}{\"1500\": {\"metadata\": {\"sample_data\": {\"2\": {\"timestamp\": \"<binary data>\", \"Salesperson Code\": \"51\", \"Nr Riga\": \"3\", \"Anno\": \"2025\", \"Mese\": \"3\", \"Trimestre\": \"1\", \"Periodo\": \"2025/03\", \"Group Code\": \"\", \"Area Code\": \"\", \"Giorni Lavorativi\": \"0\", \"Giorni Lavorati\": \"0\", \"Budget\": \"0E-20\", \"Sales Amount\": \"0E-20\", \"Cost Amount\": \"0E-20\", \"Clienti Con ordine nel mese\": \"0\", \"Clienti Attivi\": \"0\", \"Clienti Nuovi\": \"0\", \"Clienti Riattivati\": \"0\", \"Importo ordini\": \"0E-20\", \"Ordini nel Periodo\": \"0\", \"Righe Ordini periodo\": \"0\", \"Nr Visite periodo\": \"0\", \"GA_\": \"0E-20\", \"EVOL_\": \"-100.00000000000000000000\", \"CM_\": \"0E-20\", \"CM EUR\": \"0E-20\", \"EVOLCM_\": \"-100.00000000000000000000\", \"FattLastYear\": \"80290.39000000000000000000\", \"LastYearCM_\": \"55.64000000000000000000\", \"Last Year CM EUR\": \"44672.62000000000000000000\", \"OADAY\": \"0E-20\", \"OP_O\": \"0E-20\", \"OP_AV_VALUE\": \"0E-20\", \"O_AV_VALUE\": \"0E-20\", \"AV_VISIT\": \"0E-20\", \"AV_Order_VISIT\": \"0E-20\", \"CostLastYear\": \"-35617.77000000000000000000\", \"Counter\": \"0\"}}}}}\n\nID: 51\n├── Title: intranet_schema_with_descriptions.json\n└── Content:\n{\"371\": {\"metadata\": {\"columns\": {\"Nr Visite periodo\": {\"data_type\": \"int\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}}, \"sample_data\": {\"0\": {\"timestamp\": \"<binary data>\", \"Salesperson Code\": \"001\", \"Anno\": \"2006\", \"Mese\": \"1\", \"Trimestre\": \"1\", \"Periodo\": \"\", \"Group Code\": \"\", \"Area Code\": \"\", \"Giorni Lavorativi\": \"16\", \"Giorni Lavorati\": \"16\", \"Budget\": \"0E-20\", \"Clienti Con ordine nel mese\": \"0\", \"Clienti Attivi\": \"0\", \"Clienti Nuovi\": \"0\", \"Clienti Riattivati\": \"0\", \"Importo ordini\": \"0E-20\", \"Ordini nel Periodo\": \"0\", \"Righe Ordini periodo\": \"0\", \"Nr Visite periodo\": \"0\"}}}}}{\"371\": {\"metadata\": {\"sample_data\": {\"1\": {\"timestamp\": \"<binary data>\", \"Salesperson Code\": \"001\", \"Anno\": \"2006\", \"Mese\": \"2\", \"Trimestre\": \"1\", \"Periodo\": \"\", \"Group Code\": \"\", \"Area Code\": \"\", \"Giorni Lavorativi\": \"19\", \"Giorni Lavorati\": \"19\", \"Budget\": \"0E-20\", \"Clienti Con ordine nel mese\": \"0\", \"Clienti Attivi\": \"0\", \"Clienti Nuovi\": \"0\", \"Clienti Riattivati\": \"0\", \"Importo ordini\": \"0E-20\", \"Ordini nel Periodo\": \"0\", \"Righe Ordini periodo\": \"0\", \"Nr Visite periodo\": \"0\"}, \"2\": {\"timestamp\": \"<binary data>\", \"Salesperson Code\": \"001\", \"Anno\": \"2006\", \"Mese\": \"3\", \"Trimestre\": \"1\", \"Periodo\": \"\", \"Group Code\": \"\", \"Area Code\": \"\", \"Giorni Lavorativi\": \"22\", \"Giorni Lavorati\": \"22\", \"Budget\": \"0E-20\", \"Clienti Con ordine nel mese\": \"0\", \"Clienti Attivi\": \"0\", \"Clienti Nuovi\": \"0\", \"Clienti Riattivati\": \"0\", \"Importo ordini\": \"0E-20\", \"Ordini nel Periodo\": \"0\", \"Righe Ordini periodo\": \"0\", \"Nr Visite periodo\": \"0\"}}}}}\n\nID: 58\n├── Title: navision_schema_docs.json\n└── Content:\n  Ordii el Periodo: 0  Righe Ordii periodo: 0  Nr Visite periodo: 0  GA_: 0E-20  EVOL_: -100.00000000000000000000  CM_: 0E-20  CM EUR: 0E-20  EVOLCM_: -100.00000000000000000000  FattLastYear: 72726.32000000000000000000  LastYearCM_: 53.06000000000000000000  Last Year CM EUR: 38591.12000000000000000000  OADAY: 0E-20  OP_O: 0E-20  OP_AV_VALUE: 0E-20  O_AV_VALUE: 0E-20  AV_VISIT: 0E-20  AV_Order_VISIT: 0E-20  CostLastYear: -34135.20000000000000000000  Couter: 0Row 2:  timestamp: <biary data>  Salesperso Code: 51  Nr Riga: 2  Ao: 2025  Mese: 2  Trimestre: 1  Periodo: 2025/02  Group Code:   Area Code:   Giori Lavorativi: 0  Giori Lavorati: 0  Budget: 0E-20  Sales Amout: 0E-20  Cost Amout: 0E-20  Clieti Co ordie el mese: 0  Clieti Attivi: 0  Clieti Nuovi: 0  Clieti Riattivati: 0  Importo ordii: 0E-20  Ordii el Periodo: 0  Righe Ordii periodo: 0  Nr Visite periodo: 0  GA_: 0E-20  EVOL_: -100.00000000000000000000  CM_: 0E-20  CM EUR: 0E-20  EVOLCM_: -100.00000000000000000000  FattLastYear: 75400.08000000000000000000  LastYearCM_: 54.13000000000000000000  Last Year CM EUR: 40814.12000000000000000000\n\nID: 43\n├── Title: navision_schema_docs.json\n└── Content:\n{\"360\": {\"metadata\": {\"columns\": {\"Assistential Fund 1st Band\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Assistential Fund 2nd Band\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Assistential Fund 3rd Band\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Assistential Fund 1st Band _\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Assistential Fund 2nd Band _\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Assistential Fund 3rd Band _\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Assist_ Fund Over 3rd Band _\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Nr_ Posizione ENASARCO\": {\"data_type\": \"nvarchar\", \"max_length\": 20, \"is_nullable\": \"NO\", \"default_value\": null}}}}}{\"360\": {\"metadata\": {\"columns\": {\"Nr_ Prot_ Interfaccia ENASARCO\": {\"data_type\": \"nvarchar\", \"max_length\": 4, \"is_nullable\": \"NO\", \"default_value\": null}, \"Ind_ Agenti Mesi Fascia 1\": {\"data_type\": \"int\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Ind_ Agenti Mesi Fascia 2\": {\"data_type\": \"int\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Ind_ Agenti Mesi Fascia 3\": {\"data_type\": \"int\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Indennità  _ Agenti Fascia 1\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Indennità _ Agenti Fascia 2\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Indennità _ Agenti Fascia 3\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Conto Debiti V_Enasarco\": {\"data_type\": \"nvarchar\", \"max_length\": 20, \"is_nullable\": \"NO\", \"default_value\": null}}}}}"
                            }
                        },
                        "query": "sys.query",
                        "rerank_id": "",
                        "similarity_threshold": 0.2,
                        "top_k": 1024,
                        "top_n": 8,
                        "use_kg": false
                    }
                },
                "upstream": [
                    "begin"
                ]
            },
            "ValidateSQL:CarefulSanitizer": {
                "downstream": [
                    "ExeSQL:TiredShirtsPull"
                ],
                "obj": {
                    "component_name": "ValidateSQL",
                    "params": {
                        "db_type": "mssql",
                        "debug_inputs": [],
                        "delay_after_error": 2.0,
                        "description": "",
                        "exception_default_value": null,
                        "exception_goto": null,
                        "exception_method": null,
                        "inputs": {
                            "db_type": {
                                "default": "mssql",
                                "description": "Database dialect (mysql|postgresql|mariadb|mssql).",
                                "required": true,
                                "type": "string",
                                "value": "mssql"
                            },
                            "max_limit": {
                                "default": 1000,
                                "description": "Maximum number of rows to return (safety).",
                                "required": false,
                                "type": "number",
                                "value": 1000
                            },
                            "sql": {
                                "default": "{sys.query}",
                                "description": "The SQL generated by the agent.",
                                "required": true,
                                "type": "string",
                                "value": "SELECT\n  COUNT(DISTINCT \"Salesperson Code\")\nFROM dbo.\"FORCH$Statisitiche Vendita Agenti\"\nWHERE\n  Anno = (\n    SELECT\n      MAX(Anno)\n    FROM dbo.\"FORCH$Statisitiche Vendita Agenti\"\n  ) AND Mese = (\n    SELECT\n      MAX(Mese)\n    FROM dbo.\"FORCH$Statisitiche Vendita Agenti\"\n    WHERE\n      Anno = (\n        SELECT\n          MAX(Anno)\n        FROM dbo.\"FORCH$Statisitiche Vendita Agenti\"\n      )\n  ) AND \"Ordini nel Periodo\" > 0;"
                            }
                        },
                        "max_limit": 1000,
                        "max_retries": 0,
                        "message_history_window_size": 13,
                        "meta": {
                            "description": "Validates and normalizes a single read-only SQL statement; injects safe limits.",
                            "name": "validate_sql",
                            "parameters": {
                                "db_type": {
                                    "default": "mssql",
                                    "description": "Database dialect (mysql|postgresql|mariadb|mssql).",
                                    "required": true,
                                    "type": "string"
                                },
                                "max_limit": {
                                    "default": 1000,
                                    "description": "Maximum number of rows to return (safety).",
                                    "required": false,
                                    "type": "number"
                                },
                                "sql": {
                                    "default": "{sys.query}",
                                    "description": "The SQL generated by the agent.",
                                    "required": true,
                                    "type": "string"
                                }
                            }
                        },
                        "outputs": {
                            "_created_time": {
                                "type": "<class 'float'>",
                                "value": 103632.232453242
                            },
                            "_elapsed_time": {
                                "type": "<class 'float'>",
                                "value": 0.0004566749994410202
                            },
                            "sql": {
                                "type": "string",
                                "value": "SELECT TOP 1000 COUNT(DISTINCT \"Salesperson Code\")\nFROM dbo.\"FORCH$Statisitiche Vendita Agenti\"\nWHERE\n  Anno = (\n    SELECT\n      MAX(Anno)\n    FROM dbo.\"FORCH$Statisitiche Vendita Agenti\"\n  ) AND Mese = (\n    SELECT\n      MAX(Mese)\n    FROM dbo.\"FORCH$Statisitiche Vendita Agenti\"\n    WHERE\n      Anno = (\n        SELECT\n          MAX(Anno)\n        FROM dbo.\"FORCH$Statisitiche Vendita Agenti\"\n      )\n  ) AND \"Ordini nel Periodo\" > 0"
                            }
                        },
                        "sql": "Agent:WickedGoatsDivide@content"
                    }
                },
                "upstream": [
                    "Agent:WickedGoatsDivide"
                ]
            },
            "begin": {
                "downstream": [
                    "Retrieval:HappyTiesFilm",
                    "Retrieval:SmartNewsHammer",
                    "Retrieval:SweetDancersAppear"
                ],
                "obj": {
                    "component_name": "Begin",
                    "params": {
                        "debug_inputs": {},
                        "delay_after_error": 2.0,
                        "description": "",
                        "enablePrologue": true,
                        "enable_tips": true,
                        "exception_default_value": null,
                        "exception_goto": null,
                        "exception_method": null,
                        "inputs": {},
                        "max_retries": 0,
                        "message_history_window_size": 13,
                        "mode": "conversational",
                        "outputs": {
                            "_created_time": {
                                "type": "<class 'float'>",
                                "value": 103618.529451859
                            },
                            "_elapsed_time": {
                                "type": "<class 'float'>",
                                "value": 1.262400473933667e-05
                            }
                        },
                        "prologue": "Ciao! Sono il tuo assistente Forch. Come posso aiutarti?",
                        "tips": "Please fill up the form"
                    }
                },
                "upstream": []
            },
            "LogSQLLearning:KeenArchivist": {
                "downstream": [
                    "Message:ShaggyMasksAttend"
                ],
                "obj": {
                    "component_name": "LogSQLLearning",
                    "params": {
                        "question": "sys.query",
                        "sql": "{ValidateSQL:CarefulSanitizer@sql}",
                        "db": "{sys.db}",
                        "result_markdown": "{ExeSQL:TiredShirtsPull@formalized_content}",
                        "agent_id": "ee7ca6ce871411f083903a1bfe1c5f54",
                        "learning_dataset_id": "",
                        "learning_document_id": "",
                        "outputs": {
                            "status": {
                                "type": "string",
                                "value": ""
                            }
                        }
                    }
                },
                "upstream": [
                    "ExeSQL:TiredShirtsPull"
                ]
            }
        },
        "globals": {
            "sys.conversation_turns": 1,
            "sys.db": "",
            "sys.files": [],
            "sys.query": "Quanti agenti attivi ci sono al momento?",
            "sys.user_id": "a8963e7084d211f0bce63a3d79856364"
        },
        "graph": {
            "edges": [
                {
                    "data": {
                        "isHovered": false
                    },
                    "id": "xy-edge__beginstart-Retrieval:HappyTiesFilmend",
                    "source": "begin",
                    "sourceHandle": "start",
                    "target": "Retrieval:HappyTiesFilm",
                    "targetHandle": "end"
                },
                {
                    "id": "xy-edge__beginstart-Retrieval:SmartNewsHammerend",
                    "source": "begin",
                    "sourceHandle": "start",
                    "target": "Retrieval:SmartNewsHammer",
                    "targetHandle": "end"
                },
                {
                    "data": {
                        "isHovered": false
                    },
                    "id": "xy-edge__beginstart-Retrieval:SweetDancersAppearend",
                    "source": "begin",
                    "sourceHandle": "start",
                    "target": "Retrieval:SweetDancersAppear",
                    "targetHandle": "end"
                },
                {
                    "data": {
                        "isHovered": false
                    },
                    "id": "xy-edge__Retrieval:HappyTiesFilmstart-Agent:WickedGoatsDivideend",
                    "source": "Retrieval:HappyTiesFilm",
                    "sourceHandle": "start",
                    "target": "Agent:WickedGoatsDivide",
                    "targetHandle": "end"
                },
                {
                    "data": {
                        "isHovered": false
                    },
                    "id": "xy-edge__Retrieval:SmartNewsHammerstart-Agent:WickedGoatsDivideend",
                    "markerEnd": "logo",
                    "source": "Retrieval:SmartNewsHammer",
                    "sourceHandle": "start",
                    "style": {
                        "stroke": "rgba(91, 93, 106, 1)",
                        "strokeWidth": 1
                    },
                    "target": "Agent:WickedGoatsDivide",
                    "targetHandle": "end",
                    "type": "buttonEdge",
                    "zIndex": 1001
                },
                {
                    "data": {
                        "isHovered": false
                    },
                    "id": "xy-edge__Retrieval:SweetDancersAppearstart-Agent:WickedGoatsDivideend",
                    "markerEnd": "logo",
                    "source": "Retrieval:SweetDancersAppear",
                    "sourceHandle": "start",
                    "style": {
                        "stroke": "rgba(91, 93, 106, 1)",
                        "strokeWidth": 1
                    },
                    "target": "Agent:WickedGoatsDivide",
                    "targetHandle": "end",
                    "type": "buttonEdge",
                    "zIndex": 1001
                },
                {
                    "data": {
                        "isHovered": false
                    },
                    "id": "xy-edge__Agent:WickedGoatsDividestart-ValidateSQL:CarefulSanitizerend",
                    "source": "Agent:WickedGoatsDivide",
                    "sourceHandle": "start",
                    "target": "ValidateSQL:CarefulSanitizer",
                    "targetHandle": "end"
                },
                {
                    "data": {
                        "isHovered": false
                    },
                    "id": "xy-edge__ValidateSQL:CarefulSanitizerstart-ExeSQL:TiredShirtsPullend",
                    "source": "ValidateSQL:CarefulSanitizer",
                    "sourceHandle": "start",
                    "target": "ExeSQL:TiredShirtsPull",
                    "targetHandle": "end"
                },
                {
                    "data": {
                        "isHovered": false
                    },
                    "id": "xy-edge__ExeSQL:TiredShirtsPullstart-LogSQLLearning:KeenArchivistend",
                    "source": "ExeSQL:TiredShirtsPull",
                    "sourceHandle": "start",
                    "target": "LogSQLLearning:KeenArchivist",
                    "targetHandle": "end"
                },
                {
                    "data": {
                        "isHovered": false
                    },
                    "id": "xy-edge__LogSQLLearning:KeenArchiviststart-Message:ShaggyMasksAttendend",
                    "source": "LogSQLLearning:KeenArchivist",
                    "sourceHandle": "start",
                    "target": "Message:ShaggyMasksAttend",
                    "targetHandle": "end"
                }
            ],
            "nodes": [
                {
                    "data": {
                        "form": {
                            "enablePrologue": true,
                            "inputs": {},
                            "mode": "conversational",
                            "prologue": "Ciao! Sono il tuo assistente Forch. Come posso aiutarti?"
                        },
                        "label": "Begin",
                        "name": "begin"
                    },
                    "id": "begin",
                    "measured": {
                        "height": 48,
                        "width": 200
                    },
                    "position": {
                        "x": 50,
                        "y": 200
                    },
                    "selected": false,
                    "sourcePosition": "left",
                    "targetPosition": "right",
                    "type": "beginNode"
                },
                {
                    "data": {
                        "form": {
                            "cross_languages": [],
                            "empty_response": "",
                            "kb_ids": [
                                "ed31364c727211f0bdb2bafe6e7908e6",
                                "04aa54e0873411f0b38c865056c3bd63",
                                "e9f935a8873311f0a8af865056c3bd63"
                            ],
                            "keywords_similarity_weight": 0.7,
                            "outputs": {
                                "formalized_content": {
                                    "type": "string",
                                    "value": ""
                                }
                            },
                            "query": "sys.query",
                            "rerank_id": "",
                            "similarity_threshold": 0.2,
                            "top_k": 1024,
                            "top_n": 8,
                            "use_kg": false
                        },
                        "label": "Retrieval",
                        "name": "Schema"
                    },
                    "dragging": false,
                    "id": "Retrieval:HappyTiesFilm",
                    "measured": {
                        "height": 167,
                        "width": 200
                    },
                    "position": {
                        "x": 350.3234264314942,
                        "y": -122.77229052913808
                    },
                    "selected": false,
                    "sourcePosition": "right",
                    "targetPosition": "left",
                    "type": "retrievalNode"
                },
                {
                    "data": {
                        "form": {
                            "cross_languages": [],
                            "empty_response": "",
                            "kb_ids": [
                                "0f968106727311f08357bafe6e7908e6",
                                "50bc853487d311f08786de8075d81b0a"
                            ],
                            "keywords_similarity_weight": 0.7,
                            "outputs": {
                                "formalized_content": {
                                    "type": "string",
                                    "value": ""
                                }
                            },
                            "query": "sys.query",
                            "rerank_id": "",
                            "similarity_threshold": 0.2,
                            "top_k": 1024,
                            "top_n": 8,
                            "use_kg": false
                        },
                        "label": "Retrieval",
                        "name": "Question to SQL"
                    },
                    "dragging": false,
                    "id": "Retrieval:SmartNewsHammer",
                    "measured": {
                        "height": 131,
                        "width": 200
                    },
                    "position": {
                        "x": 406.5,
                        "y": 175.5
                    },
                    "selected": false,
                    "sourcePosition": "right",
                    "targetPosition": "left",
                    "type": "retrievalNode"
                },
                {
                    "data": {
                        "form": {
                            "cross_languages": [],
                            "empty_response": "",
                            "kb_ids": [
                                "4ad1f9d0727311f0827dbafe6e7908e6",
                                "50bf820c87d311f0b8a6de8075d81b0a"
                            ],
                            "keywords_similarity_weight": 0.7,
                            "outputs": {
                                "formalized_content": {
                                    "type": "string",
                                    "value": ""
                                }
                            },
                            "query": "sys.query",
                            "rerank_id": "",
                            "similarity_threshold": 0.2,
                            "top_k": 1024,
                            "top_n": 8,
                            "use_kg": false
                        },
                        "label": "Retrieval",
                        "name": "Database Description"
                    },
                    "dragging": false,
                    "id": "Retrieval:SweetDancersAppear",
                    "measured": {
                        "height": 131,
                        "width": 200
                    },
                    "position": {
                        "x": 403.5,
                        "y": 328
                    },
                    "selected": false,
                    "sourcePosition": "right",
                    "targetPosition": "left",
                    "type": "retrievalNode"
                },
                {
                    "data": {
                        "form": {
                            "delay_after_error": 1,
                            "description": "",
                            "exception_default_value": "",
                            "exception_goto": [],
                            "exception_method": "",
                            "frequencyPenaltyEnabled": false,
                            "frequency_penalty": 0.7,
                            "llm_id": "gemini-2.5-flash@Gemini",
                            "maxTokensEnabled": false,
                            "max_retries": 3,
                            "max_rounds": 5,
                            "max_tokens": 256,
                            "mcp": [],
                            "message_history_window_size": 12,
                            "outputs": {
                                "content": {
                                    "type": "string",
                                    "value": ""
                                }
                            },
                            "presencePenaltyEnabled": false,
                            "presence_penalty": 0.4,
                            "prompts": [
                                {
                                    "content": "User's query: {sys.query}\n\nSchema: {Retrieval:HappyTiesFilm@formalized_content}\n\nSamples about question to SQL: {Retrieval:SmartNewsHammer@formalized_content}\n\nDescription about meanings of tables and files: {Retrieval:SweetDancersAppear@formalized_content}",
                                    "role": "user"
                                }
                            ],
                        "sys_prompt": "### ROLE\nYou are a Text-to-SQL assistant for Microsoft SQL Server (T-SQL). Given a database schema and a natural-language request, produce a **single, syntactically-correct T-SQL SELECT** that answers the request. Return **only the SQL statement** — no fences, no commentary, no comments.\n\n### DIALECT RULES (MSSQL)\n1. Use square brackets for identifiers with spaces/special chars: [Salesperson Code], [FORCH$Statisitiche Vendita Agenti].\n2. Prefer schema-qualified names (e.g., dbo.[Table Name]).\n3. Use TOP n instead of LIMIT. For pagination, use OFFSET .. ROWS FETCH NEXT .. ROWS ONLY.\n4. Date helpers: YEAR(col), MONTH(col), DATENAME(MONTH,col), FORMAT(col,'yyyy-MM'), DATEADD, DATEDIFF.\n5. String helpers: CONCAT, LEFT, RIGHT, SUBSTRING, CHARINDEX, LEN, LOWER/UPPER, REPLACE.\n6. Count distinct: COUNT(DISTINCT col).\n7. Always generate **one single SELECT statement** (CTEs allowed). No DML/DDL.\n8. Convert any backtick or double-quoted identifiers to [bracketed] identifiers.\n9. If result size is unspecified, include TOP 1000.\n10. If a database name override is necessary, add a leading directive on the first line exactly as: `-- DB: DatabaseName`.\n\n### OUTPUT GUIDELINES\n- Output only the final SQL, no trailing semicolon required.\n- Use explicit joins.\n- Normalize object names from sources that use quotes/backticks to brackets.\n\n### EXAMPLES\n-- Example A\nUser: Show the last month available and count of active agents.\nSQL:\nWITH last_month AS (\n  SELECT MAX(CONVERT(date, DATEFROMPARTS(Anno, Mese, 1))) AS d\n  FROM dbo.[FORCH$Statisitiche Vendita Agenti]\n)\nSELECT COUNT(DISTINCT [Salesperson Code]) AS active_agents\nFROM dbo.[FORCH$Statisitiche Vendita Agenti] t\nCROSS JOIN last_month\nWHERE DATEFROMPARTS(t.Anno, t.Mese, 1) = last_month.d;",
                            "temperature": 0.1,
                            "temperatureEnabled": false,
                            "tools": [],
                            "topPEnabled": false,
                            "top_p": 0.3,
                            "user_prompt": "",
                            "visual_files_var": ""
                        },
                        "label": "Agent",
                        "name": "SQL Generator "
                    },
                    "dragging": false,
                    "id": "Agent:WickedGoatsDivide",
                    "measured": {
                        "height": 80,
                        "width": 200
                    },
                    "position": {
                        "x": 981,
                        "y": 174
                    },
                    "selected": false,
                    "sourcePosition": "right",
                    "targetPosition": "left",
                    "type": "agentNode"
                },
                {
                    "data": {
                        "form": {
                            "db_type": "mssql",
                            "max_limit": 1000,
                            "outputs": {
                                "sql": {
                                    "type": "string",
                                    "value": ""
                                }
                            },
                            "sql": "Agent:WickedGoatsDivide@content"
                        },
                        "label": "ValidateSQL",
                        "name": "ValidateSQL"
                    },
                    "dragging": false,
                    "id": "ValidateSQL:CarefulSanitizer",
                    "measured": {
                        "height": 56,
                        "width": 200
                    },
                    "position": {
                        "x": 1255.5177854461585,
                        "y": 162.24256982362064
                    },
                    "selected": false,
                    "sourcePosition": "right",
                    "targetPosition": "left",
                    "type": "ragNode"
                },
                {
                    "data": {
                        "form": {
                            "connection_profile": "mssql_rag",
                            "database": "",
                            "db_type": "mssql",
                            "host": "",
                            "max_records": 1024,
                            "outputs": {
                                "formalized_content": {
                                    "type": "string",
                                    "value": ""
                                },
                                "json": {
                                    "type": "Array<Object>",
                                    "value": []
                                }
                            },
                            "password": "",
                            "port": 1433,
                            "sql": "ValidateSQL:CarefulSanitizer@sql",
                            "username": ""
                        },
                        "label": "ExeSQL",
                        "name": "ExeSQL"
                    },
                    "dragging": false,
                    "id": "ExeSQL:TiredShirtsPull",
                    "measured": {
                        "height": 58,
                        "width": 200
                    },
                    "position": {
                        "x": 1529.882867842529,
                        "y": 143.92522846468606
                    },
                    "selected": true,
                    "sourcePosition": "right",
                    "targetPosition": "left",
                    "type": "ragNode"
                },
                {
                    "data": {
                        "form": {
                            "content": [
                                "{ExeSQL:TiredShirtsPull@formalized_content}"
                            ]
                        },
                        "label": "Message",
                        "name": "Message"
                    },
                    "dragging": false,
                    "id": "Message:ShaggyMasksAttend",
                    "measured": {
                        "height": 56,
                        "width": 200
                    },
                    "position": {
                        "x": 1856.3120302284797,
                        "y": -46.26620545657847
                    },
                    "selected": false,
                    "sourcePosition": "right",
                    "targetPosition": "left",
                    "type": "messageNode"
                },
                {
                    "data": {
                        "form": {
                            "text": "Searches for relevant database creation statements.\n\nIt should label with a knowledgebase to which the schema is dumped in. You could use \" General \" as parsing method, \" 2 \" as chunk size and \" ; \"  as delimiter."
                        },
                        "label": "Note",
                        "name": "Note Schema"
                    },
                    "dragHandle": ".note-drag-handle",
                    "dragging": false,
                    "height": 188,
                    "id": "Note:ThickClubsFloat",
                    "measured": {
                        "height": 188,
                        "width": 392
                    },
                    "position": {
                        "x": 689,
                        "y": -180.31251144409183
                    },
                    "resizing": false,
                    "selected": false,
                    "sourcePosition": "right",
                    "targetPosition": "left",
                    "type": "noteNode",
                    "width": 392
                },
                {
                    "data": {
                        "form": {
                            "text": "Searches for samples about question to SQL. \n\nYou could use \" Q&A \" as parsing method.\n\nPlease check this dataset:\nhttps://huggingface.co/datasets/InfiniFlow/text2sql"
                        },
                        "label": "Note",
                        "name": "Note: Question to SQL"
                    },
                    "dragHandle": ".note-drag-handle",
                    "dragging": false,
                    "height": 154,
                    "id": "Note:ElevenLionsJoke",
                    "measured": {
                        "height": 154,
                        "width": 345
                    },
                    "position": {
                        "x": 693.5,
                        "y": 138
                    },
                    "resizing": false,
                    "selected": false,
                    "sourcePosition": "right",
                    "targetPosition": "left",
                    "type": "noteNode",
                    "width": 345
                },
                {
                    "data": {
                        "form": {
                            "text": "Searches for description about meanings of tables and fields.\n\nYou could use \" General \" as parsing method, \" 2 \" as chunk size and \" ### \"  as delimiter."
                        },
                        "label": "Note",
                        "name": "Note: Database Description"
                    },
                    "dragHandle": ".note-drag-handle",
                    "dragging": false,
                    "height": 158,
                    "id": "Note:ManyRosesTrade",
                    "measured": {
                        "height": 158,
                        "width": 408
                    },
                    "position": {
                        "x": 691.5,
                        "y": 435.69736389555317
                    },
                    "resizing": false,
                    "selected": false,
                    "sourcePosition": "right",
                    "targetPosition": "left",
                    "type": "noteNode",
                    "width": 408
                },
                {
                    "data": {
                        "form": {
                            "text": "The Agent learns which tables may be available based on the responses from three knowledge bases and converts the user's input into SQL statements."
                        },
                        "label": "Note",
                        "name": "Note: SQL Generator"
                    },
                    "dragHandle": ".note-drag-handle",
                    "dragging": false,
                    "height": 132,
                    "id": "Note:RudeHousesInvite",
                    "measured": {
                        "height": 132,
                        "width": 383
                    },
                    "position": {
                        "x": 1106.9254833678003,
                        "y": 290.5891036507015
                    },
                    "resizing": false,
                    "selected": false,
                    "sourcePosition": "right",
                    "targetPosition": "left",
                    "type": "noteNode",
                    "width": 383
                },
                {
                    "data": {
                        "form": {
                            "text": "Connect to your database to execute SQL statements."
                        },
                        "label": "Note",
                        "name": "Note: SQL Executor"
                    },
                    "dragHandle": ".note-drag-handle",
                    "dragging": false,
                    "id": "Note:HungryBatsLay",
                    "measured": {
                        "height": 136,
                        "width": 255
                    },
                    "position": {
                        "x": 1185,
                        "y": -30
                    },
                    "selected": false,
                    "sourcePosition": "right",
                    "targetPosition": "left",
                    "type": "noteNode"
                },
                {
                    "data": {
                        "form": {
                            "question": "sys.query",
                            "sql": "{ValidateSQL:CarefulSanitizer@sql}",
                            "db": "{sys.db}",
                            "result_markdown": "{ExeSQL:TiredShirtsPull@formalized_content}",
                            "agent_id": "ee7ca6ce871411f083903a1bfe1c5f54",
                            "learning_dataset_id": "",
                            "learning_document_id": ""
                        },
                        "label": "LogSQLLearning",
                        "name": "LogSQLLearning:KeenArchivist"
                    },
                    "id": "LogSQLLearning:KeenArchivist",
                    "measured": {
                        "height": 96,
                        "width": 240
                    },
                    "position": {
                        "x": 930,
                        "y": 210
                    },
                    "selected": false,
                    "sourcePosition": "right",
                    "targetPosition": "left",
                    "type": "ragNode"
                }
            ]
        },
        "history": [
            [
                "user",
                "Quanti agenti attivi ci sono al momento?"
            ],
            [
                "assistant",
                {
                    "_created_time": 103632.543711735,
                    "_elapsed_time": 0.0006317080114968121,
                    "content": "|            |\n|-----------:|\n| 132.000000 |"
                }
            ]
        ],
        "memory": [],
        "messages": [],
        "path": [
            "begin",
            "Retrieval:HappyTiesFilm",
            "Retrieval:SmartNewsHammer",
            "Retrieval:SweetDancersAppear",
            "Agent:WickedGoatsDivide",
            "ValidateSQL:CarefulSanitizer",
            "ExeSQL:TiredShirtsPull",
            "Message:ShaggyMasksAttend"
        ],
        "retrieval": [
            {
                "chunks": [],
                "doc_aggs": []
            },
            {
                "chunks": {
                    "1": {
                        "content": "{\"360\": {\"metadata\": {\"sample_data\": {\"2\": {\"timestamp\": \"<binary data>\", \"Primary Key\": \"\", \"Starting Date\": \"2018-01-01 00:00:00\", \"Prev_ Fund _\": \"16.00000000000000000000\", \"Prev_ Fund _ - Company Charged\": \"8.00000000000000000000\", \"Prev_ Fund _ - Salesp_ Charged\": \"8.00000000000000000000\", \"Prev_ Fund - Max Amount One\": \"37913.00000000000000000000\", \"Prev_ Fund - Max Amount Multi\": \"25275.00000000000000000000\", \"Prev_ Fund - Min Amount One\": \"846.00000000000000000000\", \"Prev_ Fund - Min Amount Multi\": \"423.00000000000000000000\", \"Prev-Min Amt Comp_ One-Assoc_\": \"0E-20\", \"Prev-Min Amt Company\": \"0E-20\", \"Assistential Fund _\": \"1.00000000000000000000\", \"FIRR 1st Band One Repr_\": \"12400.00000000000000000000\", \"FIRR 2nd Band One Repr_\": \"18600.00000000000000000000\", \"FIRR 1st Band Multi Repr_\": \"6200.00000000000000000000\", \"FIRR 2nd Band Multi Repr_\": \"9300.00000000000000000000\", \"FIRR 1st Band One Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band One Repr_ _\": \"2.00000000000000000000\"}}}}}{\"360\": {\"metadata\": {\"sample_data\": {\"2\": {\"FIRR Over 2nd Band One Repr_ _\": \"1.00000000000000000000\", \"FIRR 1st Band Multi Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band Multi Repr_ _\": \"2.00000000000000000000\", \"FIRR Over 2nd Band MultiRepr _\": \"1.00000000000000000000\", \"Assistential Fund 1st Band\": \"13000000.00000000000000000000\", \"Assistential Fund 2nd Band\": \"0E-20\", \"Assistential Fund 3rd Band\": \"0E-20\", \"Assistential Fund 1st Band _\": \"0E-20\", \"Assistential Fund 2nd Band _\": \"0E-20\", \"Assistential Fund 3rd Band _\": \"0E-20\", \"Assist_ Fund Over 3rd Band _\": \"0E-20\", \"Nr_ Posizione ENASARCO\": \"\", \"Nr_ Prot_ Interfaccia ENASARCO\": \"\", \"Ind_ Agenti Mesi Fascia 1\": \"0\", \"Ind_ Agenti Mesi Fascia 2\": \"0\", \"Ind_ Agenti Mesi Fascia 3\": \"0\", \"Indennità  _ Agenti Fascia 1\": \"0E-20\", \"Indennità _ Agenti Fascia 2\": \"0E-20\", \"Indennità _ Agenti Fascia 3\": \"0E-20\", \"Conto Debiti V_Enasarco\": \"3373753750\", \"Conto Costo Enasarco Az_\": \"8020012002\", \"Conto Debiti V_FIRR\": \"3373753760\"}}}}}",
                        "dataset_id": "50bf820c87d311f0b8a6de8075d81b0a",
                        "doc_type": "",
                        "document_id": "327c888487d411f0ad7bde8075d81b0a",
                        "document_name": "navision_schema_docs.json",
                        "id": "af8222176943afa8",
                        "image_id": "",
                        "positions": [
                            [
                                633,
                                632,
                                632,
                                632,
                                632
                            ]
                        ],
                        "similarity": 0.3421504484551967,
                        "term_similarity": 0.18359105375669824,
                        "url": null,
                        "vector_similarity": 0.7121223694183596
                    },
                    "24": {
                        "content": "{\"360\": {\"metadata\": {\"sample_data\": {\"2\": {\"FIRR Over 2nd Band One Repr_ _\": \"1.00000000000000000000\", \"FIRR 1st Band Multi Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band Multi Repr_ _\": \"2.00000000000000000000\", \"FIRR Over 2nd Band MultiRepr _\": \"1.00000000000000000000\", \"Assistential Fund 1st Band\": \"13000000.00000000000000000000\", \"Assistential Fund 2nd Band\": \"0E-20\", \"Assistential Fund 3rd Band\": \"0E-20\", \"Assistential Fund 1st Band _\": \"0E-20\", \"Assistential Fund 2nd Band _\": \"0E-20\", \"Assistential Fund 3rd Band _\": \"0E-20\", \"Assist_ Fund Over 3rd Band _\": \"0E-20\", \"Nr_ Posizione ENASARCO\": \"\", \"Nr_ Prot_ Interfaccia ENASARCO\": \"\", \"Ind_ Agenti Mesi Fascia 1\": \"0\", \"Ind_ Agenti Mesi Fascia 2\": \"0\", \"Ind_ Agenti Mesi Fascia 3\": \"0\", \"Indennità  _ Agenti Fascia 1\": \"0E-20\", \"Indennità _ Agenti Fascia 2\": \"0E-20\", \"Indennità _ Agenti Fascia 3\": \"0E-20\", \"Conto Debiti V_Enasarco\": \"3373753750\", \"Conto Costo Enasarco Az_\": \"8020012002\", \"Conto Debiti V_FIRR\": \"3373753760\"}}}}}{\"360\": {\"metadata\": {\"sample_data\": {\"2\": {\"Conto Costo FIRR\": \"8020012003\", \"Conto Debiti Ind_ Suppl_\": \"\", \"Conto Costo Ind_ Suppl_\": \"\", \"Max Range FISC\": \"0E-20\", \"Batch Template Name\": \"\", \"Batch Name\": \"\", \"Salesp_ Ass_ Fund 1st Band _\": \"0E-20\", \"Salesp_ Ass_ Fund 2nd Band _\": \"0E-20\", \"Salesp_ Ass_ Fund 3rd Band _\": \"0E-20\", \"Sal_ Ass_ Fund Over 3rd Band _\": \"0E-20\", \"FIRR Batch Template Name\": \"\", \"FIRR Batch Name\": \"\", \"Prev_ Fund _ - Company Ch mult\": \"3.00000000000000000000\", \"Prev_ Fund _ - Salesp_ Ch mult\": \"1.00000000000000000000\"}}}, \"description\": \"Records and transactions related to forch$contribution setup.\"}}",
                        "dataset_id": "e9f935a8873311f0a8af865056c3bd63",
                        "doc_type": "",
                        "document_id": "31b4ff3a87d411f0a612de8075d81b0a",
                        "document_name": "navision_schema_enriched.json",
                        "id": "012e8aef2754bb62",
                        "image_id": "",
                        "positions": [
                            [
                                657,
                                656,
                                656,
                                656,
                                656
                            ]
                        ],
                        "similarity": 0.3914830756547293,
                        "term_similarity": 0.26726473276560414,
                        "url": null,
                        "vector_similarity": 0.6813258757293547
                    },
                    "26": {
                        "content": "## dbo.FORCH$Statisitiche Vendita Agenti (BASE TABLE)Primary Key: Salesperson Code, Anno, Mese\n\n| Column | Type | Nullable | Default |\n|--|--|--|--|\n| timestamp | timestamp | NO |  |\n| Salesperson Code | nvarchar | NO |  |\n| Anno | int | NO |  |\n| Mese | int | NO |  |\n| Trimestre | int | NO |  |\n| Periodo | nvarchar | NO |  |\n| Group Code | nvarchar | NO |  |\n| Area Code | nvarchar | NO |  |\n| Giorni Lavorativi | int | NO |  |\n| Giorni Lavorati | int | NO |  |\n| Budget | decimal | NO |  |\n| Clienti Con ordine nel mese | int | NO |  |\n| Clienti Attivi | int | NO |  |\n| Clienti Nuovi | int | NO |  |\n| Clienti Riattivati | int | NO |  |\n| Importo ordini | decimal | NO |  |\n| Ordini nel Periodo | int | NO |  |\n| Righe Ordini periodo | int | NO |  |\n| Nr Visite periodo | int | NO |  |## dbo.FORCH$Statisitiche Vendita Agenti 2 (BASE TABLE)Primary Key: Salesperson Code, Nr Riga\n\n| Column | Type | Nullable | Default |\n|--|--|--|--|\n| timestamp | timestamp | NO |  |\n| Salesperson Code | nvarchar | NO |  |\n| Nr Riga | int | NO |  |\n| Anno | int | NO |  |\n| Mese | int | NO |  |\n| Trimestre | int | NO |  |\n| Periodo | nvarchar | NO |  |\n| Group Code | nvarchar | NO |  |\n| Area Code | nvarchar | NO |  |\n| Giorni Lavorativi | int | NO |  |\n| Giorni Lavorati | int | NO |  |\n| Budget | decimal | NO |  |\n| Sales Amount | decimal | NO |  |\n| Cost Amount | decimal | NO |  |\n| Clienti Con ordine nel mese | int | NO |  |\n| Clienti Attivi | int | NO |  |\n| Clienti Nuovi | int | NO |  |\n| Clienti Riattivati | int | NO |  |\n| Importo ordini | decimal | NO |  |\n| Ordini nel Periodo | int | NO |  |\n| Righe Ordini periodo | int | NO |  |\n| Nr Visite periodo | int | NO |  |\n| GA_ | decimal | NO |  |\n| EVOL_ | decimal | NO |  |\n| CM_ | decimal | NO |  |\n| CM EUR | decimal | NO |  |\n| EVOLCM_ | decimal | NO |  |\n| FattLastYear | decimal | NO |  |\n| LastYearCM_ | decimal | NO |  |\n| Last Year CM EUR | decimal | NO |  |\n| OADAY | decimal | NO |  |\n| OP_O | decimal | NO |  |\n| OP_AV_VALUE | decimal | NO |  |\n| O_AV_VALUE | decimal | NO |  |\n| AV_VISIT | decimal | NO |  |\n| AV_Order_VISIT | decimal | NO |  |\n| CostLastYear | decimal | NO |  |\n| Counter | int | NO |  |",
                        "dataset_id": "e9f935a8873311f0a8af865056c3bd63",
                        "doc_type": "",
                        "document_id": "b8afbdda873511f08db3865056c3bd63",
                        "document_name": "FORCH_NAVISION.md",
                        "id": "4eaa778de9624f19",
                        "image_id": "",
                        "positions": [
                            [
                                694,
                                693,
                                693,
                                693,
                                693
                            ]
                        ],
                        "similarity": 0.3522731238372317,
                        "term_similarity": 0.1992388552501041,
                        "url": null,
                        "vector_similarity": 0.7093530838738628
                    },
                    "29": {
                        "content": "**Note importanti**:\r- La query mostra i primi 10 agenti per numero di note di credito\r\n- Include sia il numero di note di credito che l'importo totale\r\n- I risultati sono ordinati per numero di note di credito in ordine decrescente\r\n- Il periodo di riferimento è il mese precedente\r\n- Il JOIN con la tabella Salesperson è necessario per ottenere i nomi degli agenti\r\n\r### \"Chi ha fatto la vendita più grande a gennaio?\"\r**SQL**:\r```sql\r\nSELECT TOP 1\r\n    sp.[No_] AS CodiceAgente,\r\n    sp.[Name] AS NomeAgente,\r\n    SUM(sl.[Line Amount]) AS ImportoTotaleVendite,\r\n    COUNT(DISTINCT sh.[No_]) AS NumeroOrdini\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Salesperson] sp\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh \r\n        ON sp.[No_] = sh.[Salesperson Code]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Line] sl \r\n        ON sh.[No_] = sl.[Document No_] \r\n        AND sh.[Document Type] = sl.[Document Type]\r\nWHERE \r\n    MONTH(sh.[Posting Date]) = 1  -- Gennaio\r\n    AND YEAR(sh.[Posting Date]) = YEAR(GETDATE())  -- Anno corrente\r\n    AND sh.[Document Type] = 1  -- 1 = Order\r\nGROUP BY \r\n    sp.[No_], sp.[Name]\r\nORDER BY \r\n    ImportoTotaleVendite DESC;\r\n```\r**Note importanti**:\r- La query mostra l'agente con l'importo totale di vendite più alto\r\n- Include sia l'importo totale che il numero di ordini\r\n- Considera solo gli ordini (Document Type = 1)\r\n- Il periodo di riferimento è gennaio dell'anno corrente\r\n- I risultati sono ordinati per importo totale in ordine decrescente\r\n\r### \"Negli ultimi 5 anni, quanti agenti sono entrati e quanti sono usciti dalla forza vendita?\"\r**SQL**:\r```sql\r\nWITH AgentChanges AS (\r\n    SELECT \r\n        [No_] AS CodiceAgente,\r\n        [Name] AS NomeAgente,\r\n        [Data Inizio Mandato] AS DataInizio,\r\n        [Data Fine Mandato] AS DataFine\r\n    FROM \r\n        [FORCH_NAVISION].[dbo].[FORCH$Salesperson]\r\n    WHERE \r\n        [Data Inizio Mandato] >= DATEADD(YEAR, -5, GETDATE())  -- Entrati negli ultimi 5 anni\r\n        OR [Data Fine Mandato] >= DATEADD(YEAR, -5, GETDATE())  -- Usciti negli ultimi 5 anni\r\n)\r\nSELECT \r\n    COUNT(CASE WHEN DataInizio >= DATEADD(YEAR, -5, GETDATE()) THEN 1 END) AS AgentiEntrati,\r\n    COUNT(CASE WHEN DataFine >= DATEADD(YEAR, -5, GETDATE()) THEN 1 END) AS AgentiUsciti,\r\n    COUNT(*) AS TotaleAgenti\r\nFROM \r\n    AgentChanges;\r\n```\r",
                        "dataset_id": "50bc853487d311f08786de8075d81b0a",
                        "doc_type": "",
                        "document_id": "320fa38687d411f09436de8075d81b0a",
                        "document_name": "italian_query_examples.md",
                        "id": "67ee5e5cd9fc78b9",
                        "image_id": "",
                        "positions": [
                            [
                                15,
                                14,
                                14,
                                14,
                                14
                            ]
                        ],
                        "similarity": 0.4880781864641769,
                        "term_similarity": 0.371401607760389,
                        "url": null,
                        "vector_similarity": 0.7603235367730152
                    },
                    "38": {
                        "content": "### \"Quale cliente ha acquistato più trapani?\"\r**Mappatura Vector DB**: \"trapano\" → Item Category Code '53'\r\n\r\n**SQL**:\r```sql\r\n-- Query per trovare il cliente che ha acquistato più trapani\r\nSELECT TOP 1\r\n    c.[No_],\r\n    c.[Name],\r\n    SUM(sl.[Quantity]) AS QuantitàTrapaniAcquistati\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Customer] c\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh \r\n        ON c.[No_] = sh.[Sell-to Customer No_]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Line] sl \r\n        ON sh.[No_] = sl.[Document No_] \r\n        AND sh.[Document Type] = sl.[Document Type]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Item] i \r\n        ON sl.[No_] = i.[No_]\r\nWHERE \r\n    i.[Item Category Code] = '53'  -- Codice categoria come testo con apici\r\n    AND sh.[Posting Date] >= DATEADD(MONTH, -12, GETDATE())\r\nGROUP BY \r\n    c.[No_], c.[Name]\r\nORDER BY \r\n    QuantitàTrapaniAcquistati DESC;\r\n```\r## Query relative agli Agenti (Salespersons)\r### \"Quali sono le vendite per agente nell'ultimo trimestre?\"\r**SQL**:\r```sql\r\n-- Query per mostrare le vendite totali per agente\r\nSELECT \r\n    sp.[No_], \r\n    sp.[Name] AS NomeAgente,\r\n    SUM(sl.[Quantity]) AS QuantitàVenduta,\r\n    SUM(sl.[Line Amount]) AS ImportoTotale\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Salesperson] sp\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh ON sp.[No_] = sh.[Salesperson Code]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Line] sl \r\n        ON sh.[No_] = sl.[Document No_] \r\n        AND sh.[Document Type] = sh.[Document Type]\r\nWHERE \r\n    sh.[Posting Date] >= DATEADD(MONTH, -3, GETDATE())\r\nGROUP BY \r\n    sp.[No_], sp.[Name]\r\nORDER BY \r\n    ImportoTotale DESC;\r\n```\r",
                        "dataset_id": "50bc853487d311f08786de8075d81b0a",
                        "doc_type": "",
                        "document_id": "320fa38687d411f09436de8075d81b0a",
                        "document_name": "italian_query_examples.md",
                        "id": "37363ce546dc593e",
                        "image_id": "",
                        "positions": [
                            [
                                13,
                                12,
                                12,
                                12,
                                12
                            ]
                        ],
                        "similarity": 0.4095841553878876,
                        "term_similarity": 0.27402467132059166,
                        "url": null,
                        "vector_similarity": 0.7258896182115782
                    },
                    "43": {
                        "content": "{\"360\": {\"metadata\": {\"columns\": {\"Assistential Fund 1st Band\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Assistential Fund 2nd Band\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Assistential Fund 3rd Band\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Assistential Fund 1st Band _\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Assistential Fund 2nd Band _\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Assistential Fund 3rd Band _\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Assist_ Fund Over 3rd Band _\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Nr_ Posizione ENASARCO\": {\"data_type\": \"nvarchar\", \"max_length\": 20, \"is_nullable\": \"NO\", \"default_value\": null}}}}}{\"360\": {\"metadata\": {\"columns\": {\"Nr_ Prot_ Interfaccia ENASARCO\": {\"data_type\": \"nvarchar\", \"max_length\": 4, \"is_nullable\": \"NO\", \"default_value\": null}, \"Ind_ Agenti Mesi Fascia 1\": {\"data_type\": \"int\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Ind_ Agenti Mesi Fascia 2\": {\"data_type\": \"int\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Ind_ Agenti Mesi Fascia 3\": {\"data_type\": \"int\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Indennità  _ Agenti Fascia 1\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Indennità _ Agenti Fascia 2\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Indennità _ Agenti Fascia 3\": {\"data_type\": \"decimal\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Conto Debiti V_Enasarco\": {\"data_type\": \"nvarchar\", \"max_length\": 20, \"is_nullable\": \"NO\", \"default_value\": null}}}}}",
                        "dataset_id": "50bf820c87d311f0b8a6de8075d81b0a",
                        "doc_type": "",
                        "document_id": "327c888487d411f0ad7bde8075d81b0a",
                        "document_name": "navision_schema_docs.json",
                        "id": "3370376c771b1234",
                        "image_id": "",
                        "positions": [
                            [
                                628,
                                627,
                                627,
                                627,
                                627
                            ]
                        ],
                        "similarity": 0.28347053205765965,
                        "term_similarity": 0.09961942812505205,
                        "url": null,
                        "vector_similarity": 0.712456441233744
                    },
                    "51": {
                        "content": "{\"371\": {\"metadata\": {\"columns\": {\"Nr Visite periodo\": {\"data_type\": \"int\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}}, \"sample_data\": {\"0\": {\"timestamp\": \"<binary data>\", \"Salesperson Code\": \"001\", \"Anno\": \"2006\", \"Mese\": \"1\", \"Trimestre\": \"1\", \"Periodo\": \"\", \"Group Code\": \"\", \"Area Code\": \"\", \"Giorni Lavorativi\": \"16\", \"Giorni Lavorati\": \"16\", \"Budget\": \"0E-20\", \"Clienti Con ordine nel mese\": \"0\", \"Clienti Attivi\": \"0\", \"Clienti Nuovi\": \"0\", \"Clienti Riattivati\": \"0\", \"Importo ordini\": \"0E-20\", \"Ordini nel Periodo\": \"0\", \"Righe Ordini periodo\": \"0\", \"Nr Visite periodo\": \"0\"}}}}}{\"371\": {\"metadata\": {\"sample_data\": {\"1\": {\"timestamp\": \"<binary data>\", \"Salesperson Code\": \"001\", \"Anno\": \"2006\", \"Mese\": \"2\", \"Trimestre\": \"1\", \"Periodo\": \"\", \"Group Code\": \"\", \"Area Code\": \"\", \"Giorni Lavorativi\": \"19\", \"Giorni Lavorati\": \"19\", \"Budget\": \"0E-20\", \"Clienti Con ordine nel mese\": \"0\", \"Clienti Attivi\": \"0\", \"Clienti Nuovi\": \"0\", \"Clienti Riattivati\": \"0\", \"Importo ordini\": \"0E-20\", \"Ordini nel Periodo\": \"0\", \"Righe Ordini periodo\": \"0\", \"Nr Visite periodo\": \"0\"}, \"2\": {\"timestamp\": \"<binary data>\", \"Salesperson Code\": \"001\", \"Anno\": \"2006\", \"Mese\": \"3\", \"Trimestre\": \"1\", \"Periodo\": \"\", \"Group Code\": \"\", \"Area Code\": \"\", \"Giorni Lavorativi\": \"22\", \"Giorni Lavorati\": \"22\", \"Budget\": \"0E-20\", \"Clienti Con ordine nel mese\": \"0\", \"Clienti Attivi\": \"0\", \"Clienti Nuovi\": \"0\", \"Clienti Riattivati\": \"0\", \"Importo ordini\": \"0E-20\", \"Ordini nel Periodo\": \"0\", \"Righe Ordini periodo\": \"0\", \"Nr Visite periodo\": \"0\"}}}}}",
                        "dataset_id": "50bf820c87d311f0b8a6de8075d81b0a",
                        "doc_type": "",
                        "document_id": "33eb2ec887d411f0aaabde8075d81b0a",
                        "document_name": "intranet_schema_with_descriptions.json",
                        "id": "9128108c6b7af305",
                        "image_id": "",
                        "positions": [
                            [
                                38395,
                                38394,
                                38394,
                                38394,
                                38394
                            ]
                        ],
                        "similarity": 0.28518066212788545,
                        "term_similarity": 0.09961942812505205,
                        "url": null,
                        "vector_similarity": 0.7181568748011633
                    },
                    "55": {
                        "content": "{\"360\": {\"metadata\": {\"sample_data\": {\"0\": {\"FIRR Over 2nd Band One Repr_ _\": \"1.00000000000000000000\", \"FIRR 1st Band Multi Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band Multi Repr_ _\": \"2.00000000000000000000\", \"FIRR Over 2nd Band MultiRepr _\": \"1.00000000000000000000\", \"Assistential Fund 1st Band\": \"0E-20\", \"Assistential Fund 2nd Band\": \"0E-20\", \"Assistential Fund 3rd Band\": \"0E-20\", \"Assistential Fund 1st Band _\": \"0E-20\", \"Assistential Fund 2nd Band _\": \"0E-20\", \"Assistential Fund 3rd Band _\": \"0E-20\", \"Assist_ Fund Over 3rd Band _\": \"0E-20\", \"Nr_ Posizione ENASARCO\": \"\", \"Nr_ Prot_ Interfaccia ENASARCO\": \"\", \"Ind_ Agenti Mesi Fascia 1\": \"0\", \"Ind_ Agenti Mesi Fascia 2\": \"0\", \"Ind_ Agenti Mesi Fascia 3\": \"0\", \"Indennità  _ Agenti Fascia 1\": \"0E-20\", \"Indennità _ Agenti Fascia 2\": \"0E-20\", \"Indennità _ Agenti Fascia 3\": \"0E-20\", \"Conto Debiti V_Enasarco\": \"3373753750\", \"Conto Costo Enasarco Az_\": \"8020012002\", \"Conto Debiti V_FIRR\": \"3373753760\", \"Conto Costo FIRR\": \"8020012003\"}}}}}{\"360\": {\"metadata\": {\"sample_data\": {\"0\": {\"Conto Debiti Ind_ Suppl_\": \"\", \"Conto Costo Ind_ Suppl_\": \"\", \"Max Range FISC\": \"0E-20\", \"Batch Template Name\": \"\", \"Batch Name\": \"\", \"Salesp_ Ass_ Fund 1st Band _\": \"0E-20\", \"Salesp_ Ass_ Fund 2nd Band _\": \"0E-20\", \"Salesp_ Ass_ Fund 3rd Band _\": \"0E-20\", \"Sal_ Ass_ Fund Over 3rd Band _\": \"0E-20\", \"FIRR Batch Template Name\": \"\", \"FIRR Batch Name\": \"\", \"Prev_ Fund _ - Company Ch mult\": \"3.00000000000000000000\", \"Prev_ Fund _ - Salesp_ Ch mult\": \"1.00000000000000000000\"}}}}}",
                        "dataset_id": "e9f935a8873311f0a8af865056c3bd63",
                        "doc_type": "",
                        "document_id": "31b4ff3a87d411f0a612de8075d81b0a",
                        "document_name": "navision_schema_enriched.json",
                        "id": "539d3f4ef87bda0c",
                        "image_id": "",
                        "positions": [
                            [
                                654,
                                653,
                                653,
                                653,
                                653
                            ]
                        ],
                        "similarity": 0.34215572238888003,
                        "term_similarity": 0.18359105375669824,
                        "url": null,
                        "vector_similarity": 0.7121399491973041
                    },
                    "57": {
                        "content": "{\"86\": {\"table\": \"FORCH$Area Agenti\", \"text\": \"Table: FORCH$Area Agenti\\nRow Count: 14\\nDescription: Records and transactions related to forch$area agenti.\\nColumns:\\n- timestamp (timestamp, NOT NULL)\\n- Codice Area (nvarchar(10), NOT NULL, Primary Key)\\n- Descrizione (nvarchar(30), NOT NULL)\\n\\nSample Data:\\nRow 1:\\n  timestamp: <binary data>\\n  Codice Area: 0\\n  Descrizione: \\nRow 2:\\n  timestamp: <binary data>\\n  Codice Area: 10\\n  Descrizione: \\nRow 3:\\n  timestamp: <binary data>\\n  Codice Area: 11\\n  Descrizione: Area Fornoni\"}}{\"86\": {\"metadata\": {\"primary_key\": {\"0\": \"Codice Area\"}, \"foreign_keys\": {}, \"row_count\": 14, \"columns\": {\"timestamp\": {\"data_type\": \"timestamp\", \"max_length\": null, \"is_nullable\": \"NO\", \"default_value\": null}, \"Codice Area\": {\"data_type\": \"nvarchar\", \"max_length\": 10, \"is_nullable\": \"NO\", \"default_value\": null}, \"Descrizione\": {\"data_type\": \"nvarchar\", \"max_length\": 30, \"is_nullable\": \"NO\", \"default_value\": null}}, \"sample_data\": {\"0\": {\"timestamp\": \"<binary data>\", \"Codice Area\": \"0\", \"Descrizione\": \"\"}, \"1\": {\"timestamp\": \"<binary data>\", \"Codice Area\": \"10\", \"Descrizione\": \"\"}, \"2\": {\"timestamp\": \"<binary data>\", \"Codice Area\": \"11\", \"Descrizione\": \"Area Fornoni\"}}}, \"description\": \"Records and transactions related to forch$area agenti.\"}}{\"87\": {\"table\": \"FORCH$Articoli - Accisa\", \"text\": \"Table: FORCH$Articoli - Accisa\\nRow Count: 197\\nDescription: Records and transactions related to forch$articoli - accisa.\\nColumns:\\n- timestamp (timestamp, NOT NULL)\\n- Item No_ (nvarchar(20), NOT NULL, Primary Key)\\n- Tipologia Accisa (nvarchar(10), NOT NULL, Primary Key)\\n- Descrizione (nvarchar(30), NOT NULL)\\n- Peso Articolo Unitario (gr) (decimal, NOT NULL)\\n- Peso Olio Minerale (gr) (decimal, NOT NULL)\\n- _Olio Minerale Unitario (decimal, NOT NULL)\\n\\nSample Data:\\nRow 1:\\n  timestamp: <binary data>\\n  Item No_: 548220001\\n  Tipologia Accisa: GAS COMB\\n  Descrizione: \\n  Peso Articolo Unitario (gr): 190.00000000000000000000\\n  Peso Olio Minerale (gr): 0E-20\\n  _Olio Minerale Unitario: 0E-20\\nRow 2:\\n  timestamp: <binary data>\\n  Item No_: 548260\\n  Tipologia Accisa: GAS COMB\\n  Descrizione: \\n  Peso Articolo Unitario (gr): 600.00000000000000000000\\n  Peso Olio Minerale (gr): 0E-20\\n  _Olio Minerale Unitario: 0E-20\\nRow 3:\\n  timestamp: <binary data>\\n  Item No_: 548263\\n  Tipologia Accisa: GAS COMB\\n  Descrizione: \\n  Peso Articolo Unitario (gr): 600.00000000000000000000\\n  Peso Olio Minerale (gr): 0E-20\\n  _Olio Minerale Unitario: 0E-20\"}}",
                        "dataset_id": "e9f935a8873311f0a8af865056c3bd63",
                        "doc_type": "",
                        "document_id": "31b4ff3a87d411f0a612de8075d81b0a",
                        "document_name": "navision_schema_enriched.json",
                        "id": "9fe726d6923ee77b",
                        "image_id": "",
                        "positions": [
                            [
                                119,
                                118,
                                118,
                                118,
                                118
                            ]
                        ],
                        "similarity": 0.33704054584402954,
                        "term_similarity": 0.18329310713395797,
                        "url": null,
                        "vector_similarity": 0.6957845695008631
                    },
                    "58": {
                        "content": "  Ordii el Periodo: 0  Righe Ordii periodo: 0  Nr Visite periodo: 0  GA_: 0E-20  EVOL_: -100.00000000000000000000  CM_: 0E-20  CM EUR: 0E-20  EVOLCM_: -100.00000000000000000000  FattLastYear: 72726.32000000000000000000  LastYearCM_: 53.06000000000000000000  Last Year CM EUR: 38591.12000000000000000000  OADAY: 0E-20  OP_O: 0E-20  OP_AV_VALUE: 0E-20  O_AV_VALUE: 0E-20  AV_VISIT: 0E-20  AV_Order_VISIT: 0E-20  CostLastYear: -34135.20000000000000000000  Couter: 0Row 2:  timestamp: <biary data>  Salesperso Code: 51  Nr Riga: 2  Ao: 2025  Mese: 2  Trimestre: 1  Periodo: 2025/02  Group Code:   Area Code:   Giori Lavorativi: 0  Giori Lavorati: 0  Budget: 0E-20  Sales Amout: 0E-20  Cost Amout: 0E-20  Clieti Co ordie el mese: 0  Clieti Attivi: 0  Clieti Nuovi: 0  Clieti Riattivati: 0  Importo ordii: 0E-20  Ordii el Periodo: 0  Righe Ordii periodo: 0  Nr Visite periodo: 0  GA_: 0E-20  EVOL_: -100.00000000000000000000  CM_: 0E-20  CM EUR: 0E-20  EVOLCM_: -100.00000000000000000000  FattLastYear: 75400.08000000000000000000  LastYearCM_: 54.13000000000000000000  Last Year CM EUR: 40814.12000000000000000000",
                        "dataset_id": "50bf820c87d311f0b8a6de8075d81b0a",
                        "doc_type": "",
                        "document_id": "327c888487d411f0ad7bde8075d81b0a",
                        "document_name": "navision_schema_docs.json",
                        "id": "17229f1e48503bcb",
                        "image_id": "",
                        "positions": [
                            [
                                4079,
                                4078,
                                4078,
                                4078,
                                4078
                            ]
                        ],
                        "similarity": 0.2849273051960468,
                        "term_similarity": 0.09961942812505205,
                        "url": null,
                        "vector_similarity": 0.7173123516950344
                    },
                    "59": {
                        "content": "<table>\n<thead>\n<tr>\n<th>Table Name</th>\n<th>Description</th>\n<th>Key Fields</th>\n<th>Usage</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>FORCH$Sales Header</td>\n<td>Header information for sales documents</td>\n<td>No_, Document Type, Posting Date, Sell-to Customer No_</td>\n<td>Contains customer reference and posting date</td>\n</tr>\n<tr>\n<td>FORCH$Sales Line</td>\n<td>Line items for sales documents</td>\n<td>Document No_, Document Type, Line No_, No_, Quantity, Line Amount</td>\n<td>Contains the products sold and quantities</td>\n</tr>\n<tr>\n<td>FORCH$Customer</td>\n<td>Customer master data</td>\n<td>No_, Name, Address</td>\n<td>Contains customer details</td>\n</tr>\n<tr>\n<td>FORCH$Salesperson</td>\n<td>Salesperson data (referred to as \"Agenti\" in Italian)</td>\n<td>No_, Name</td>\n<td>Tracks sales representatives information</td>\n</tr>\n</tbody>\n</table>",
                        "dataset_id": "50bf820c87d311f0b8a6de8075d81b0a",
                        "doc_type": "",
                        "document_id": "322e530887d411f086bade8075d81b0a",
                        "document_name": "database_structure.md",
                        "id": "51194382f6bcd814",
                        "image_id": "",
                        "positions": [],
                        "similarity": 0.33415749534931505,
                        "term_similarity": 0.18329310713395797,
                        "url": null,
                        "vector_similarity": 0.6861744011851482
                    },
                    "6": {
                        "content": "{\"360\": {\"metadata\": {\"sample_data\": {\"1\": {\"FIRR Over 2nd Band One Repr_ _\": \"1.00000000000000000000\", \"FIRR 1st Band Multi Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band Multi Repr_ _\": \"2.00000000000000000000\", \"FIRR Over 2nd Band MultiRepr _\": \"1.00000000000000000000\", \"Assistential Fund 1st Band\": \"13000000.00000000000000000000\", \"Assistential Fund 2nd Band\": \"0E-20\", \"Assistential Fund 3rd Band\": \"0E-20\", \"Assistential Fund 1st Band _\": \"0E-20\", \"Assistential Fund 2nd Band _\": \"0E-20\", \"Assistential Fund 3rd Band _\": \"0E-20\", \"Assist_ Fund Over 3rd Band _\": \"0E-20\", \"Nr_ Posizione ENASARCO\": \"\", \"Nr_ Prot_ Interfaccia ENASARCO\": \"\", \"Ind_ Agenti Mesi Fascia 1\": \"0\", \"Ind_ Agenti Mesi Fascia 2\": \"0\", \"Ind_ Agenti Mesi Fascia 3\": \"0\", \"Indennità  _ Agenti Fascia 1\": \"0E-20\", \"Indennità _ Agenti Fascia 2\": \"0E-20\", \"Indennità _ Agenti Fascia 3\": \"0E-20\", \"Conto Debiti V_Enasarco\": \"3373753750\", \"Conto Costo Enasarco Az_\": \"8020012002\", \"Conto Debiti V_FIRR\": \"3373753760\"}}}}}{\"360\": {\"metadata\": {\"sample_data\": {\"1\": {\"Conto Costo FIRR\": \"8020012003\", \"Conto Debiti Ind_ Suppl_\": \"\", \"Conto Costo Ind_ Suppl_\": \"\", \"Max Range FISC\": \"0E-20\", \"Batch Template Name\": \"\", \"Batch Name\": \"\", \"Salesp_ Ass_ Fund 1st Band _\": \"0E-20\", \"Salesp_ Ass_ Fund 2nd Band _\": \"0E-20\", \"Salesp_ Ass_ Fund 3rd Band _\": \"0E-20\", \"Sal_ Ass_ Fund Over 3rd Band _\": \"0E-20\", \"FIRR Batch Template Name\": \"\", \"FIRR Batch Name\": \"\", \"Prev_ Fund _ - Company Ch mult\": \"3.00000000000000000000\", \"Prev_ Fund _ - Salesp_ Ch mult\": \"1.00000000000000000000\"}}}}}",
                        "dataset_id": "50bf820c87d311f0b8a6de8075d81b0a",
                        "doc_type": "",
                        "document_id": "327c888487d411f0ad7bde8075d81b0a",
                        "document_name": "navision_schema_docs.json",
                        "id": "da2d093508c5dec3",
                        "image_id": "",
                        "positions": [
                            [
                                632,
                                631,
                                631,
                                631,
                                631
                            ]
                        ],
                        "similarity": 0.34215285663060696,
                        "term_similarity": 0.18359105375669824,
                        "url": null,
                        "vector_similarity": 0.7121303966697272
                    },
                    "61": {
                        "content": "<table>\n<thead>\n<tr>\n<th>Column</th>\n<th>Type</th>\n<th>Nullable</th>\n<th>Default</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>timestamp</td>\n<td>timestamp</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Primary Key</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Starting Date</td>\n<td>datetime</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund _ - Company Charged</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund _ - Salesp_ Charged</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund - Max Amount One</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund - Max Amount Multi</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund - Min Amount One</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund - Min Amount Multi</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev-Min Amt Comp_ One-Assoc_</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev-Min Amt Company</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assistential Fund _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 1st Band One Repr_</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 2nd Band One Repr_</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 1st Band Multi Repr_</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 2nd Band Multi Repr_</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 1st Band One Repr_ _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 2nd Band One Repr_ _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR Over 2nd Band One Repr_ _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 1st Band Multi Repr_ _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR 2nd Band Multi Repr_ _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR Over 2nd Band MultiRepr _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assistential Fund 1st Band</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assistential Fund 2nd Band</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assistential Fund 3rd Band</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assistential Fund 1st Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assistential Fund 2nd Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assistential Fund 3rd Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Assist_ Fund Over 3rd Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Nr_ Posizione ENASARCO</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Nr_ Prot_ Interfaccia ENASARCO</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Ind_ Agenti Mesi Fascia 1</td>\n<td>int</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Ind_ Agenti Mesi Fascia 2</td>\n<td>int</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Ind_ Agenti Mesi Fascia 3</td>\n<td>int</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Indennità  _ Agenti Fascia 1</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Indennità _ Agenti Fascia 2</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Indennità _ Agenti Fascia 3</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Conto Debiti V_Enasarco</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Conto Costo Enasarco Az_</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Conto Debiti V_FIRR</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Conto Costo FIRR</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Conto Debiti Ind_ Suppl_</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Conto Costo Ind_ Suppl_</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Max Range FISC</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Batch Template Name</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Batch Name</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Salesp_ Ass_ Fund 1st Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Salesp_ Ass_ Fund 2nd Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Salesp_ Ass_ Fund 3rd Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Sal_ Ass_ Fund Over 3rd Band _</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR Batch Template Name</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>FIRR Batch Name</td>\n<td>nvarchar</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund _ - Company Ch mult</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n<tr>\n<td>Prev_ Fund _ - Salesp_ Ch mult</td>\n<td>decimal</td>\n<td>NO</td>\n<td></td>\n</tr>\n</tbody>\n</table>",
                        "dataset_id": "e9f935a8873311f0a8af865056c3bd63",
                        "doc_type": "",
                        "document_id": "b8afbdda873511f08db3865056c3bd63",
                        "document_name": "FORCH_NAVISION.md",
                        "id": "67e304bac82d21d4",
                        "image_id": "",
                        "positions": [],
                        "similarity": 0.3380389968672691,
                        "term_similarity": 0.18359105375669824,
                        "url": null,
                        "vector_similarity": 0.6984175307919345
                    },
                    "66": {
                        "content": "**Note importanti**:\r- Utilizzare i campi `[Data Inizio Mandato]` e `[Data Fine Mandato]` della tabella Salesperson\r\n- La query considera gli ultimi 5 anni dalla data corrente\r\n- Un agente può essere sia entrato che uscito negli ultimi 5 anni\r\n- Il totale degli agenti include tutti quelli che hanno avuto cambiamenti negli ultimi 5 anni\r\n- La query mostra:\r\n  - Numero di agenti entrati negli ultimi 5 anni\r\n  - Numero di agenti usciti negli ultimi 5 anni\r\n  - Totale degli agenti con cambiamenti negli ultimi 5 anni\r\n\r## Query relative al DB (Margine di Profitto)\r### \"Quanto è il DB medio per gli articoli 8017?\"\r**SQL**:\r```sql\r\nSELECT \r\n    i.[No_],\r\n    i.[Description],\r\n    AVG(sl.[Line Amount] - (sl.[Unit Cost] * sl.[Quantity])) AS DBMedio,\r\n    AVG((sl.[Line Amount] - (sl.[Unit Cost] * sl.[Quantity])) / NULLIF(sl.[Line Amount], 0) * 100) AS DBPercentuale\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Item] i\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Line] sl ON i.[No_] = sl.[No_]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh \r\n        ON sl.[Document No_] = sh.[No_] \r\n        AND sl.[Document Type] = sh.[Document Type]\r\nWHERE \r\n    LEFT(i.[No_], 4) = '8017'  -- AGR code per articoli specifici\r\n    AND sh.[Posting Date] >= DATEADD(MONTH, -12, GETDATE())  -- Ultimi 12 mesi\r\nGROUP BY \r\n    i.[No_], i.[Description]\r\nORDER BY \r\n    DBMedio DESC;\r\n```\r**Note importanti**:\r- DB (Deckungsbeitrag) si riferisce al margine di profitto\r\n- Il DB si calcola come differenza tra il prezzo di vendita (`Line Amount`) e il costo totale (`Unit Cost * Quantity`)\r\n- La percentuale di DB si calcola come (DB / Prezzo di vendita) * 100\r\n- NULLIF viene utilizzato per evitare divisioni per zero\r\n- La query mostra:\r\n  - Codice e descrizione dell'articolo\r\n  - DB medio in valore assoluto\r\n  - DB medio in percentuale\r\n- I risultati sono ordinati per DB medio in ordine decrescente\r\n- Il periodo di riferimento è l'ultimo anno per avere dati significativi\r\n\r",
                        "dataset_id": "50bc853487d311f08786de8075d81b0a",
                        "doc_type": "",
                        "document_id": "320fa38687d411f09436de8075d81b0a",
                        "document_name": "italian_query_examples.md",
                        "id": "12e70eae48b1ad48",
                        "image_id": "",
                        "positions": [
                            [
                                16,
                                15,
                                15,
                                15,
                                15
                            ]
                        ],
                        "similarity": 0.41329434954260946,
                        "term_similarity": 0.274878026706229,
                        "url": null,
                        "vector_similarity": 0.7362657694941639
                    },
                    "72": {
                        "content": "{\"360\": {\"metadata\": {\"sample_data\": {\"0\": {\"timestamp\": \"<binary data>\", \"Primary Key\": \"\", \"Starting Date\": \"2016-01-01 00:00:00\", \"Prev_ Fund _\": \"15.10000000000000000000\", \"Prev_ Fund _ - Company Charged\": \"7.55000000000000000000\", \"Prev_ Fund _ - Salesp_ Charged\": \"7.55000000000000000000\", \"Prev_ Fund - Max Amount One\": \"37500.00000000000000000000\", \"Prev_ Fund - Max Amount Multi\": \"25000.00000000000000000000\", \"Prev_ Fund - Min Amount One\": \"836.00000000000000000000\", \"Prev_ Fund - Min Amount Multi\": \"418.00000000000000000000\", \"Prev-Min Amt Comp_ One-Assoc_\": \"0E-20\", \"Prev-Min Amt Company\": \"0E-20\", \"Assistential Fund _\": \"1.00000000000000000000\", \"FIRR 1st Band One Repr_\": \"12400.00000000000000000000\", \"FIRR 2nd Band One Repr_\": \"18600.00000000000000000000\", \"FIRR 1st Band Multi Repr_\": \"6200.00000000000000000000\", \"FIRR 2nd Band Multi Repr_\": \"9300.00000000000000000000\", \"FIRR 1st Band One Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band One Repr_ _\": \"2.00000000000000000000\"}}}}}{\"360\": {\"metadata\": {\"sample_data\": {\"0\": {\"FIRR Over 2nd Band One Repr_ _\": \"1.00000000000000000000\", \"FIRR 1st Band Multi Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band Multi Repr_ _\": \"2.00000000000000000000\", \"FIRR Over 2nd Band MultiRepr _\": \"1.00000000000000000000\", \"Assistential Fund 1st Band\": \"0E-20\", \"Assistential Fund 2nd Band\": \"0E-20\", \"Assistential Fund 3rd Band\": \"0E-20\", \"Assistential Fund 1st Band _\": \"0E-20\", \"Assistential Fund 2nd Band _\": \"0E-20\", \"Assistential Fund 3rd Band _\": \"0E-20\", \"Assist_ Fund Over 3rd Band _\": \"0E-20\", \"Nr_ Posizione ENASARCO\": \"\", \"Nr_ Prot_ Interfaccia ENASARCO\": \"\", \"Ind_ Agenti Mesi Fascia 1\": \"0\", \"Ind_ Agenti Mesi Fascia 2\": \"0\", \"Ind_ Agenti Mesi Fascia 3\": \"0\", \"Indennità  _ Agenti Fascia 1\": \"0E-20\", \"Indennità _ Agenti Fascia 2\": \"0E-20\", \"Indennità _ Agenti Fascia 3\": \"0E-20\", \"Conto Debiti V_Enasarco\": \"3373753750\", \"Conto Costo Enasarco Az_\": \"8020012002\", \"Conto Debiti V_FIRR\": \"3373753760\", \"Conto Costo FIRR\": \"8020012003\"}}}}}",
                        "dataset_id": "50bf820c87d311f0b8a6de8075d81b0a",
                        "doc_type": "",
                        "document_id": "327c888487d411f0ad7bde8075d81b0a",
                        "document_name": "navision_schema_docs.json",
                        "id": "bf034a0d6acac2a7",
                        "image_id": "",
                        "positions": [
                            [
                                630,
                                629,
                                629,
                                629,
                                629
                            ]
                        ],
                        "similarity": 0.34298074722096694,
                        "term_similarity": 0.18359105375669824,
                        "url": null,
                        "vector_similarity": 0.7148900319709272
                    },
                    "74": {
                        "content": "{\"360\": {\"metadata\": {\"sample_data\": {\"1\": {\"timestamp\": \"<binary data>\", \"Primary Key\": \"\", \"Starting Date\": \"2017-01-01 00:00:00\", \"Prev_ Fund _\": \"15.65000000000000000000\", \"Prev_ Fund _ - Company Charged\": \"7.78000000000000000000\", \"Prev_ Fund _ - Salesp_ Charged\": \"7.78000000000000000000\", \"Prev_ Fund - Max Amount One\": \"37500.00000000000000000000\", \"Prev_ Fund - Max Amount Multi\": \"25000.00000000000000000000\", \"Prev_ Fund - Min Amount One\": \"836.00000000000000000000\", \"Prev_ Fund - Min Amount Multi\": \"418.00000000000000000000\", \"Prev-Min Amt Comp_ One-Assoc_\": \"0E-20\", \"Prev-Min Amt Company\": \"0E-20\", \"Assistential Fund _\": \"1.00000000000000000000\", \"FIRR 1st Band One Repr_\": \"12400.00000000000000000000\", \"FIRR 2nd Band One Repr_\": \"18600.00000000000000000000\", \"FIRR 1st Band Multi Repr_\": \"6200.00000000000000000000\", \"FIRR 2nd Band Multi Repr_\": \"9300.00000000000000000000\", \"FIRR 1st Band One Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band One Repr_ _\": \"2.00000000000000000000\"}}}}}{\"360\": {\"metadata\": {\"sample_data\": {\"1\": {\"FIRR Over 2nd Band One Repr_ _\": \"1.00000000000000000000\", \"FIRR 1st Band Multi Repr_ _\": \"4.00000000000000000000\", \"FIRR 2nd Band Multi Repr_ _\": \"2.00000000000000000000\", \"FIRR Over 2nd Band MultiRepr _\": \"1.00000000000000000000\", \"Assistential Fund 1st Band\": \"13000000.00000000000000000000\", \"Assistential Fund 2nd Band\": \"0E-20\", \"Assistential Fund 3rd Band\": \"0E-20\", \"Assistential Fund 1st Band _\": \"0E-20\", \"Assistential Fund 2nd Band _\": \"0E-20\", \"Assistential Fund 3rd Band _\": \"0E-20\", \"Assist_ Fund Over 3rd Band _\": \"0E-20\", \"Nr_ Posizione ENASARCO\": \"\", \"Nr_ Prot_ Interfaccia ENASARCO\": \"\", \"Ind_ Agenti Mesi Fascia 1\": \"0\", \"Ind_ Agenti Mesi Fascia 2\": \"0\", \"Ind_ Agenti Mesi Fascia 3\": \"0\", \"Indennità  _ Agenti Fascia 1\": \"0E-20\", \"Indennità _ Agenti Fascia 2\": \"0E-20\", \"Indennità _ Agenti Fascia 3\": \"0E-20\", \"Conto Debiti V_Enasarco\": \"3373753750\", \"Conto Costo Enasarco Az_\": \"8020012002\", \"Conto Debiti V_FIRR\": \"3373753760\"}}}}}",
                        "dataset_id": "e9f935a8873311f0a8af865056c3bd63",
                        "doc_type": "",
                        "document_id": "31b4ff3a87d411f0a612de8075d81b0a",
                        "document_name": "navision_schema_enriched.json",
                        "id": "a7c1d1eb0eebae66",
                        "image_id": "",
                        "positions": [
                            [
                                655,
                                654,
                                654,
                                654,
                                654
                            ]
                        ],
                        "similarity": 0.34188700132792726,
                        "term_similarity": 0.18359105375669824,
                        "url": null,
                        "vector_similarity": 0.7112442123274615
                    },
                    "76": {
                        "content": "{\"1500\": {\"metadata\": {\"sample_data\": {\"1\": {\"timestamp\": \"<binary data>\", \"Salesperson Code\": \"51\", \"Nr Riga\": \"2\", \"Anno\": \"2025\", \"Mese\": \"2\", \"Trimestre\": \"1\", \"Periodo\": \"2025/02\", \"Group Code\": \"\", \"Area Code\": \"\", \"Giorni Lavorativi\": \"0\", \"Giorni Lavorati\": \"0\", \"Budget\": \"0E-20\", \"Sales Amount\": \"0E-20\", \"Cost Amount\": \"0E-20\", \"Clienti Con ordine nel mese\": \"0\", \"Clienti Attivi\": \"0\", \"Clienti Nuovi\": \"0\", \"Clienti Riattivati\": \"0\", \"Importo ordini\": \"0E-20\", \"Ordini nel Periodo\": \"0\", \"Righe Ordini periodo\": \"0\", \"Nr Visite periodo\": \"0\", \"GA_\": \"0E-20\", \"EVOL_\": \"-100.00000000000000000000\", \"CM_\": \"0E-20\", \"CM EUR\": \"0E-20\", \"EVOLCM_\": \"-100.00000000000000000000\", \"FattLastYear\": \"75400.08000000000000000000\", \"LastYearCM_\": \"54.13000000000000000000\", \"Last Year CM EUR\": \"40814.12000000000000000000\", \"OADAY\": \"0E-20\", \"OP_O\": \"0E-20\", \"OP_AV_VALUE\": \"0E-20\", \"O_AV_VALUE\": \"0E-20\", \"AV_VISIT\": \"0E-20\", \"AV_Order_VISIT\": \"0E-20\", \"CostLastYear\": \"-34585.96000000000000000000\", \"Counter\": \"0\"}}}}}{\"1500\": {\"metadata\": {\"sample_data\": {\"2\": {\"timestamp\": \"<binary data>\", \"Salesperson Code\": \"51\", \"Nr Riga\": \"3\", \"Anno\": \"2025\", \"Mese\": \"3\", \"Trimestre\": \"1\", \"Periodo\": \"2025/03\", \"Group Code\": \"\", \"Area Code\": \"\", \"Giorni Lavorativi\": \"0\", \"Giorni Lavorati\": \"0\", \"Budget\": \"0E-20\", \"Sales Amount\": \"0E-20\", \"Cost Amount\": \"0E-20\", \"Clienti Con ordine nel mese\": \"0\", \"Clienti Attivi\": \"0\", \"Clienti Nuovi\": \"0\", \"Clienti Riattivati\": \"0\", \"Importo ordini\": \"0E-20\", \"Ordini nel Periodo\": \"0\", \"Righe Ordini periodo\": \"0\", \"Nr Visite periodo\": \"0\", \"GA_\": \"0E-20\", \"EVOL_\": \"-100.00000000000000000000\", \"CM_\": \"0E-20\", \"CM EUR\": \"0E-20\", \"EVOLCM_\": \"-100.00000000000000000000\", \"FattLastYear\": \"80290.39000000000000000000\", \"LastYearCM_\": \"55.64000000000000000000\", \"Last Year CM EUR\": \"44672.62000000000000000000\", \"OADAY\": \"0E-20\", \"OP_O\": \"0E-20\", \"OP_AV_VALUE\": \"0E-20\", \"O_AV_VALUE\": \"0E-20\", \"AV_VISIT\": \"0E-20\", \"AV_Order_VISIT\": \"0E-20\", \"CostLastYear\": \"-35617.77000000000000000000\", \"Counter\": \"0\"}}}}}",
                        "dataset_id": "50bf820c87d311f0b8a6de8075d81b0a",
                        "doc_type": "",
                        "document_id": "327c888487d411f0ad7bde8075d81b0a",
                        "document_name": "navision_schema_docs.json",
                        "id": "530819433d46b627",
                        "image_id": "",
                        "positions": [
                            [
                                4084,
                                4083,
                                4083,
                                4083,
                                4083
                            ]
                        ],
                        "similarity": 0.2873923866108224,
                        "term_similarity": 0.09961942812505205,
                        "url": null,
                        "vector_similarity": 0.7255292897442864
                    },
                    "85": {
                        "content": "**Note importanti**:\r- La query calcola la media giornaliera di ordini per ogni agente nel 2024\r\n- Utilizza una subquery per prima calcolare il valore totale degli ordini per ogni giorno e agente\r\n- Considera solo gli ordini effettivi (Document Type = 1)\r\n- Il valore dell'ordine è la somma di tutti i Line Amount per quel giorno\r\n- La data di riferimento è la data di registrazione (Posting Date) dell'ordine\r\n- FORMAT('N2') viene utilizzato per arrotondare i risultati a 2 decimali\r\n- Il simbolo € viene aggiunto ai valori monetari\r\n- La query mostra:\r\n  - Codice e nome dell'agente\r\n  - Media giornaliera di ordini\r\n  - Numero di giorni con ordini\r\n  - Valore totale degli ordini\r\n- I risultati sono ordinati per media giornaliera in ordine decrescente\r\n\r### \"Quanti ordini trasmette in media al giorno un venditore?\"\r**SQL**:\r```sql\r\nSELECT \r\n    FORMAT(AVG(DailyOrdersPerSalesperson), 'N2') AS MediaOrdiniGiornalieriPerVenditore\r\nFROM (\r\n    SELECT \r\n        sh.[Salesperson Code],\r\n        CAST(sh.[Posting Date] AS DATE) AS OrderDate,\r\n        COUNT(DISTINCT sh.[No_]) AS DailyOrdersPerSalesperson\r\n    FROM \r\n        [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh\r\n    WHERE \r\n        sh.[Document Type] = 1  -- Only orders\r\n        AND sh.[Posting Date] >= DATEADD(MONTH, -12, GETDATE())  -- Ultimi 12 mesi\r\n    GROUP BY \r\n        sh.[Salesperson Code],\r\n        CAST(sh.[Posting Date] AS DATE)\r\n) AS DailyOrdersPerSalesperson;\r\n```\r**Note importanti**:\r- La query calcola la media di ordini giornalieri per venditore\r\n- Utilizza una subquery per prima calcolare il numero di ordini per ogni venditore per ogni giorno\r\n- Considera solo gli ordini effettivi (Document Type = 1)\r\n- La data di riferimento è la data di registrazione (Posting Date) dell'ordine\r\n- FORMAT('N2') viene utilizzato per arrotondare la media a 2 decimali\r\n- Il periodo di riferimento è l'ultimo anno per avere dati significativi\r\n- Il risultato rappresenta il numero medio di ordini che un venditore tipicamente processa in un giorno\r\n\r",
                        "dataset_id": "50bc853487d311f08786de8075d81b0a",
                        "doc_type": "",
                        "document_id": "320fa38687d411f09436de8075d81b0a",
                        "document_name": "italian_query_examples.md",
                        "id": "debace2d7fb66aaa",
                        "image_id": "",
                        "positions": [
                            [
                                8,
                                7,
                                7,
                                7,
                                7
                            ]
                        ],
                        "similarity": 0.40885888313359164,
                        "term_similarity": 0.27263553602097423,
                        "url": null,
                        "vector_similarity": 0.7267133597296989
                    },
                    "88": {
                        "content": "**Note importanti**:\r- Quando un utente chiede informazioni sugli \"Agenti\", si riferisce ai \"Salesperson\" nel database\r\n- Utilizzare l'alias \"sp\" per la tabella Salesperson\r\n- Collegare Salesperson a Sales Header tramite il campo \"Salesperson Code\"\r\n\r### \"Quanti viti dell'AGR 1011 sono state vendute il 24 febbraio e da chi?\"\r**SQL**:\r```sql\r\nSELECT \r\n    sp.[No_] AS CodiceAgente,\r\n    sp.[Name] AS NomeAgente,\r\n    SUM(sl.[Quantity]) AS QuantitàVenduta,\r\n    SUM(sl.[Line Amount]) AS ImportoTotale\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Line] sl\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Header] sh \r\n        ON sl.[Document No_] = sh.[No_] \r\n        AND sl.[Document Type] = sh.[Document Type]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Item] i \r\n        ON sl.[No_] = i.[No_]\r\nJOIN\r\n    [FORCH_NAVISION].[dbo].[FORCH$Salesperson] sp\r\n        ON sh.[Salesperson Code] = sp.[No_]\r\nWHERE \r\n    LEFT(i.[No_], 4) = '1011'  -- AGR code per viti specifiche\r\n    AND sh.[Posting Date] = '2025-02-24'\r\nGROUP BY \r\n    sp.[No_], sp.[Name]\r\nORDER BY \r\n    QuantitàVenduta DESC;\r\n```\r**Note importanti**:\r- La query mostra sia il codice che il nome dell'agente per una migliore identificazione\r\n- Include anche l'importo totale delle vendite per ogni agente\r\n- I risultati sono ordinati per quantità venduta in ordine decrescente\r\n- Il JOIN con la tabella Salesperson è necessario per ottenere il nome dell'agente\r\n\r### \"Chi sono gli agenti che hanno avuto più note di credito il mese scorso?\"\r**SQL**:\r```sql\r\nSELECT TOP 10\r\n    sp.[No_] AS CodiceAgente,\r\n    sp.[Name] AS NomeAgente,\r\n    COUNT(DISTINCT scmh.[No_]) AS NumeroNoteCredito,\r\n    SUM(scml.[Line Amount]) AS ImportoTotaleNoteCredito\r\nFROM \r\n    [FORCH_NAVISION].[dbo].[FORCH$Salesperson] sp\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Cr_Memo Header] scmh \r\n        ON sp.[No_] = scmh.[Salesperson Code]\r\nJOIN \r\n    [FORCH_NAVISION].[dbo].[FORCH$Sales Cr_Memo Line] scml \r\n        ON scmh.[No_] = scml.[Document No_]\r\nWHERE \r\n    scmh.[Posting Date] >= DATEADD(MONTH, -1, GETDATE())\r\nGROUP BY \r\n    sp.[No_], sp.[Name]\r\nORDER BY \r\n    NumeroNoteCredito DESC;\r\n```\r",
                        "dataset_id": "50bc853487d311f08786de8075d81b0a",
                        "doc_type": "",
                        "document_id": "320fa38687d411f09436de8075d81b0a",
                        "document_name": "italian_query_examples.md",
                        "id": "b1e1005a72a8a914",
                        "image_id": "",
                        "positions": [
                            [
                                14,
                                13,
                                13,
                                13,
                                13
                            ]
                        ],
                        "similarity": 0.47855813941707825,
                        "term_similarity": 0.371401607760389,
                        "url": null,
                        "vector_similarity": 0.7285900466160197
                    },
                    "93": {
                        "content": "## dbo.FRC_Statisitiche_Vendita_Agenti (VIEW)| Column | Type | Nullable | Default |\n|--|--|--|--|\n| timestamp | timestamp | NO |  |\n| Salesperson Code | nvarchar | NO |  |\n| Anno | int | NO |  |\n| Mese | int | NO |  |\n| Trimestre | int | NO |  |\n| Periodo | nvarchar | NO |  |\n| Group Code | nvarchar | NO |  |\n| Area Code | nvarchar | NO |  |\n| Giorni Lavorativi | int | NO |  |\n| Giorni Lavorati | int | NO |  |\n| Budget | decimal | NO |  |\n| Clienti Con ordine nel mese | int | NO |  |\n| Clienti Attivi | int | NO |  |\n| Clienti Nuovi | int | NO |  |\n| Clienti Riattivati | int | NO |  |\n| Importo ordini | decimal | NO |  |\n| Ordini nel Periodo | int | NO |  |\n| Righe Ordini periodo | int | NO |  |\n| Nr Visite periodo | int | NO |  |## dbo.FRC_Statisitiche_Vendita_Articoli (VIEW)| Colum | Type | Nullable | Default |\n|--|--|--|--|\n| timestamp | timestamp | NO |  |\n| Documet No_ | varchar | NO |  |\n| Salesperso Code | varchar | NO |  |\n| Lie No_ | it | NO |  |\n| Cod_ Articolo | varchar | NO |  |\n| Postig date | datetime | NO |  |\n| Gruppo | varchar | NO |  |\n| Sottogruppo | varchar | NO |  |\n| Tipo Riga | it | NO |  |\n| Nr_ Coto C_G | varchar | NO |  |\n| Group Code | varchar | NO |  |\n| Area Code | varchar | NO |  |\n| Cod_ raggr_ Art_ | varchar | NO |  |\n| Documet Sales Qty | decimal | NO |  |\n| Documet Sales Amout | decimal | NO |  |\n| Documet Cost Amout | decimal | NO |  |\n| Ao | it | NO |  |\n| Mese | i",
                        "dataset_id": "e9f935a8873311f0a8af865056c3bd63",
                        "doc_type": "",
                        "document_id": "b8afbdda873511f08db3865056c3bd63",
                        "document_name": "FORCH_NAVISION.md",
                        "id": "8d01e933571a9a65",
                        "image_id": "",
                        "positions": [
                            [
                                875,
                                874,
                                874,
                                874,
                                874
                            ]
                        ],
                        "similarity": 0.35447644228688774,
                        "term_similarity": 0.1992388552501041,
                        "url": null,
                        "vector_similarity": 0.7166974787060495
                    },
                    "97": {
                        "content": "e Cliete | varchar | NO |  |\n| Origial quatity | decimal | NO |  |\n| Customer item code | varchar | NO |  |\n| Salesperso 1 | varchar | NO |  |## dbo.vwFORCH_Ship_to_Address (VIEW)| Column | Type | Nullable | Default |\n|--|--|--|--|\n| Customer No_ | nvarchar | NO |  |\n| Code | nvarchar | NO |  |\n| Name | nvarchar | NO |  |\n| Name 2 | nvarchar | NO |  |\n| Address | nvarchar | NO |  |\n| Address 2 | nvarchar | NO |  |\n| City | nvarchar | NO |  |\n| Contact | nvarchar | NO |  |\n| Phone No_ | nvarchar | NO |  |\n| Telex No_ | nvarchar | NO |  |\n| Shipment Method Code | nvarchar | NO |  |\n| Shipping Agent Code | nvarchar | NO |  |\n| Place of Export | nvarchar | NO |  |\n| Country_Region Code | nvarchar | NO |  |\n| Last Date Modified | datetime | NO |  |\n| Location Code | nvarchar | NO |  |\n| Fax No_ | nvarchar | NO |  |\n| Telex Answer Back | nvarchar | NO |  |\n| Post Code | nvarchar | NO |  |\n| County | nvarchar | NO |  |\n| E-Mail | nvarchar | NO |  |\n| Home Page | nvarchar | NO |  |\n| Tax Area Code | nvarchar | NO |  |\n| Tax Liable | tinyint | NO |  |\n| Shipping Agent Service Code | nvarchar | NO |  |\n| Service Zone Code | nvarchar | NO |  |\n| Salesperson Code | nvarchar | NO |  |## dbo.vwFORCH_SottogruppoCliente (VIEW)| Column | Type | Nullable | Default |\n|--|--|--|--|\n| timestamp | timestamp | NO |  |\n| Code | nvarchar | NO |  |\n| Description | nvarchar | NO |  |\n| New | tinyint | NO |  |\n| Group Code | nvarchar | NO |  |\n| Cust_ Class Code | nvarchar | NO |  |## dbo.vwFORCH_Statisitiche_Vendita_Agenti (VIEW)| Column | Type | Nullable | Default |\n|--|--|--|--|\n| timestamp | timestamp | NO |  |\n| Salesperson Code | nvarchar | NO |  |\n| Anno | int | NO |  |\n| Mese | int | NO |  |\n| Trimestre | int | NO |  |\n| Periodo | nvarchar | NO |  |\n| Group Code | nvarchar | NO |  |\n| Area Code | nvarchar | NO |  |\n| Giorni Lavorativi | int | NO |  |\n| Giorni Lavorati | int | NO |  |\n| Budget | decimal | NO |  |\n| Clienti Con ordine nel mese | int | NO |  |\n| Clienti Attivi | int | NO |  |\n| Clienti Nuovi | int | NO |  |\n| Clienti Riattivati | int | NO |  |\n| Importo ordini | decimal | NO |  |\n| Ordini nel Periodo | int | NO |  |\n| Righe Ordini periodo | int | NO |  |\n| Nr Visite periodo | int | NO |  |",
                        "dataset_id": "04aa54e0873411f0b38c865056c3bd63",
                        "doc_type": "",
                        "document_id": "b8bdd212873511f0971e865056c3bd63",
                        "document_name": "FORCH2002.md",
                        "id": "d429ed4bbd2587b4",
                        "image_id": "",
                        "positions": [
                            [
                                167,
                                166,
                                166,
                                166,
                                166
                            ]
                        ],
                        "similarity": 0.34518073641648483,
                        "term_similarity": 0.1992388552501041,
                        "url": null,
                        "vector_similarity": 0.6857117924713731
                    }
                },
                "doc_aggs": {
                    "FORCH2002.md": {
                        "count": 1,
                        "doc_id": "b8bdd212873511f0971e865056c3bd63",
                        "doc_name": "FORCH2002.md"
                    },
                    "FORCH_NAVISION.md": {
                        "count": 3,
                        "doc_id": "b8afbdda873511f08db3865056c3bd63",
                        "doc_name": "FORCH_NAVISION.md"
                    },
                    "database_structure.md": {
                        "count": 1,
                        "doc_id": "322e530887d411f086bade8075d81b0a",
                        "doc_name": "database_structure.md"
                    },
                    "intranet_schema_with_descriptions.json": {
                        "count": 1,
                        "doc_id": "33eb2ec887d411f0aaabde8075d81b0a",
                        "doc_name": "intranet_schema_with_descriptions.json"
                    },
                    "italian_query_examples.md": {
                        "count": 8,
                        "doc_id": "320fa38687d411f09436de8075d81b0a",
                        "doc_name": "italian_query_examples.md"
                    },
                    "navision_schema_docs.json": {
                        "count": 6,
                        "doc_id": "327c888487d411f0ad7bde8075d81b0a",
                        "doc_name": "navision_schema_docs.json"
                    },
                    "navision_schema_enriched.json": {
                        "count": 4,
                        "doc_id": "31b4ff3a87d411f0a612de8075d81b0a",
                        "doc_name": "navision_schema_enriched.json"
                    }
                }
            }
        ],
        "task_id": "ee7ca6ce871411f083903a1bfe1c5f54"
    },
    "avatar": "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAcFBQYFBAcGBQYIBwcIChELCgkJChUPEAwRGBUaGRgVGBcbHichGx0lHRcYIi4iJSgpKywrGiAvMy8qMicqKyr/2wBDAQcICAoJChQLCxQqHBgcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKir/wAARCAAwADADAREAAhEBAxEB/8QAGgAAAwEBAQEAAAAAAAAAAAAABQYHBAMAAf/EADIQAAEDAwMCBAMHBQAAAAAAAAECAwQFESEABjESEyJBUYEUYXEHFSNSkaGxMjNictH/xAAZAQADAQEBAAAAAAAAAAAAAAACAwQBAAX/xAAlEQACAgICAgEEAwAAAAAAAAABAgARAyESMQRBEyIycYFCkbH/2gAMAwEAAhEDEQA/AKHt2DGpNHXDLrZdWtSrIub39tZ5GbGwPA+pmDFkX7x7idvra85xqQaFNkxUTVIVJQzf8QpBFjbgEenNs681MnA9WJ6fEOKJoxVpSpFLTCo6KEZlTlLcQBIJS20hAv1D1ve+qPk52b0IsYuIGtyt7ZkVVNP+H3A5GdlN2u7GQUBSfmkk8cXH10tmLD6Yl0CG5qmTXBMZiQEMuvupUoKdc6UeEi4FsqOeBxrsKnv1AY+hJ2l5yfu6qQ6/UZtPDRHZ+Eldpsqz1hSrXJGLXwRxqxUQizFs7galPYUFDKT+h15oMuImspQpFiL+2i1A3A1bgxmixUgwlT8ZfgJ/y8P8HXdRuPZoxaqtfkQKbKqF03jtEoDeFKV1lNgfK4H764XfccVUgipvdiwKpFaXMLklFg4juuqV0m3Izg/MaEZCDYMScYqiJOd6xmqfUVfBJcWwtHV1Elfi87k51ViyhrsxL4ivQj1KrFZjTGjTJ8aShdyph5SUqFhwPzX9jpC0dXUqZK3ViHNq7oNaVJjz2Vw5LCrdKknpULZyfMf801MfI1e5NmpAGHUL12EZNFWWlhXSUuWHKgk3xomwEDuDhzLysySU9EndEVyIz3GmxJR+KpBIdCLlRHn/AFEjjIF9AMJlZ8gLZ/qUiJSg1Tu0HO4plFj4FC1h9NYfHIU7kwzgnqCJlKLiCO2s6hKytWiPJoFdfnLW7HS0or6bqXbjg2AI99XjAa3NPlL6jFTduOR5sd1+oyfjQMONqI7QOMA4V7/pqjHjC9SLNn56I1HiqrqTUKM0hbq2lpst5CQSST54xjSPJbICOHUhawISiRQ02T2Uq6AAkqFj/GquJQks1iEr/INLU82bploKSFXusG9xfjHofXQuQUNRoQqQT0ZwVEST5687iZWGgpDsebNbaTDfKVL/ALnbQU/UkKNhjXpFt0BJBVXe/wAGGG6YMlvvNkjlBGmKeJimHIVc0TY89akCKspT28C5BKgDyR7fvrCFI+q/1DQsvVfudYcVyKw49KU6tZyQbmwHFhrOKr9s0uz0CAIpbr3RKo1Rbh02C4HJISp2ZIz0pJ8IQk5Nr/QXznSX6NSnGAwHI/gD/TM+3vtAj1arJpcpgtPdPSH0kFt5wDxAWOOLgamIAFwijCfD927N2tGXuNxlK2W0occUhJWpR+QzzrPjc+pvyqT3Ftf2zbObf7YYecb6CrrDAGfy20wYMkA5Vjbtev7b3nEcXRela27d1ogoWi/rnQsjrqZzHdwzKoKUsqWz3mOnJUlZJt8uokD621w+RdzgynUkUpoUafPZXMnSHlrKluyX1Eug8XF7GwxbgWxrubMO5WmNRsCKtLfcY3rAU0nIltkBP+w0X8Jjdz//2Q=="
}
